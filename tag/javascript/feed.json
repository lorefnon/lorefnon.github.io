{
    "version": "https://jsonfeed.org/version/1",
    "title": "Icicles of Thought • All posts by \"javascript\" tag",
    "description": "",
    "home_page_url": "https://lorefnon.me",
    "items": [
        {
            "id": "https://lorefnon.me/2018/06/09/javascript-async-await-with-arbitrary-thenables/",
            "url": "https://lorefnon.me/2018/06/09/javascript-async-await-with-arbitrary-thenables/",
            "title": "Javascript Async/Await with arbitrary Thenables",
            "date_published": "2018-06-09T00:00:00.000Z",
            "content_html": "<link rel=\"stylesheet\" href=\"/css/crayon.min.css\" >\n<link rel=\"stylesheet\" href=\"/css/crayon-flatui-light.css\" >\n\n\n\n\t<p>Usage of C# inspired <code>async/await</code> syntax (Now a <a href=\"https://github.com/tc39/proposals/blob/master/finished-proposals.md\" target=\"_blank\">stage 4 proposal</a>) is now fairly mainstream in javascript, and native support is available in major browsers and Node.</p>\n<p>Most of the times we <code>await</code> on promises (typically returned from async functions), however, it is relatively less well known that <code>await</code> works on arbitrary thenables. By thenables we mean any object with a <code>then</code> function member.</p>\n<p>This post covers this usage, and explores some scenarios where it can be interesting.</p>\n<p><span id=\"more-252\"></span></p>\n<h2>Using thenables to represent lazy computations</h2>\n<p>Promises are used to represent output of an operation which has been initiated but may not have yet completed. So by the time we have a promise, the operation it represents has already begun and using await keyword we can (effectively) wait for it to complete.</p>\n<p>Thenables can be useful to represent a computation that is yet to begin. For example:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051aef694301312\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-11\">11</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-2\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Started Then'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">setTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Finishing Task'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">resolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-10\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-11\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0049 seconds] -->\n<p></p>\n<p>It would be obvious here, that calling <code>fn</code> does not actually initiate an asynchronous operation, but simply returns an object – a thenable.</p>\n<p>However, given that <code>await</code> syntax implicitly calls <code>then</code>, we can simply <code>await</code> on the returned thenable exactly in the same way we could have awaited on a promise, but unlike the latter, in this case, calling await will actually initiate the execution of our asynchronous operation.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051afd651445880\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-10\">10</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-2\"><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">experimental</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">repl</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">await</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-3\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* Function above */</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-4\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-e\">fn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-5\"><span class=\"crayon-e\">Started </span><span class=\"crayon-st\">Then</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-6\"><span class=\"crayon-e\">Finishing </span><span class=\"crayon-e\">Task</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-7\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-8\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">_</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-9\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-10\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0010 seconds] -->\n<p></p>\n<p>Libraries like <a href=\"http://mongoosejs.com/\" target=\"_blank\">Mongoose</a> (A popular ODM for mongodb) utilize this behavior and implement the thenable protocol in their <a href=\"https://github.com/Automattic/mongoose/blob/master/lib/query.js#L3143\" target=\"_blank\">Query class</a>.</p>\n<p>This enables us to <code>await</code> on fluent query builder chains.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b01870047597\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b01870047597-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b01870047597-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b01870047597-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b01870047597-4\">4</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b01870047597-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b01870047597-2\"><span class=\"crayon-e\">await </span><span class=\"crayon-v\">Person</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">where</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'name'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">equals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'lorefnon'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b01870047597-3\"><span class=\"crayon-e\">await </span><span class=\"crayon-v\">Person</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">where</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'name'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">equals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'lorefnon'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">where</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'age'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">gt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b01870047597-4\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0008 seconds] -->\n<p></p>\n<h3>Caveats</h3>\n<p>Even though being a thenable enables Query to “quack” like a promise in this case, an important distinction is that calling then multiple times will trigger multiple calls to the database (unlike a promise which is guaranteed to resolve or reject exactly once).</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b04749275254\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-6\">6</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-2\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Person</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">where</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'name'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">equals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'lorefnon'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-3\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// triggers database query</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-4\"><span class=\"crayon-c\">// After some lines</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-5\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// triggers another database query</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-6\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0009 seconds] -->\n<p></p>\n<p>If this behavior is undesirable, then we can <a href=\"https://github.com/lodash/lodash/blob/4.17.10/lodash.js#L10539\" target=\"_blank\">memoize</a> our then function.</p>\n<p>Also, note that our <code>fn</code> function above could not be an async function.</p>\n<p>An async function is guaranteed to return a promise, and returning a thenable in async function, will cause its then to be invoked.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b07702009001\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-17\">17</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-18\">18</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-2\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">asycn</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Starting Task'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// ....</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-7\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-8\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-9\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">promise</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Without await</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-10\"><span class=\"crayon-e\">Starting </span><span class=\"crayon-v\">Task</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-11\"><span class=\"crayon-c\">// ...</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-12\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-13\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">promise</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-14\"><span class=\"crayon-e\">Promise</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-15\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">pending</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-16\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-17\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-18\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0016 seconds] -->\n<p></p>\n<h2>Stubbing/Spying</h2>\n<p>Since we know that await implicitly calls promises, we can safely spy on then of a promise in test cases. Or stub async methods to return spied thenables.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b0a860841833\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-7\">7</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-2\"><span class=\"crayon-v\">sinon</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stub</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">apiClient</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'makeRequest'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">returns</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sinon</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">spy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">resolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">title</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Dummy Response'</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-7\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0010 seconds] -->\n<p></p>\n<p>Since sinon’s stub/spy functions track invocations, we can later find if makeRequest was invoked as well as whether our (pseudo) promises returned were actually awaited upon.</p>\n<h2>Dynamic imports and Thenable modules</h2>\n<p>ES6 modules can export a then method which will be called when these modules are dynamically imported:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b0d585804715\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-8\">8</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-2\"><span class=\"crayon-c\">// importee.mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-3\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-4\"><span class=\"crayon-e\">export </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Running Task'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">resolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-7\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-8\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0008 seconds] -->\n<p></p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b10211716304\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-7\">7</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-2\"><span class=\"crayon-c\">// importer.mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-3\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">async</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'resolved =&gt;'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-e\">import</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'./importee'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-7\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0007 seconds] -->\n<p></p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b12392719844\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-6\">6</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">experimental</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">modules </span><span class=\"crayon-v\">importer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25619</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ExperimentalWarning</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">The </span><span class=\"crayon-e\">ESM </span><span class=\"crayon-e\">module </span><span class=\"crayon-e\">loader </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">experimental</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-4\"><span class=\"crayon-e\">Running </span><span class=\"crayon-e\">Task</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-5\"><span class=\"crayon-v\">resolved</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-6\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0009 seconds] -->\n<p></p>\n<p>Note that static imports are not asynchronous and don’t cause thenables to be executed:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b15466922518\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-10\">10</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-2\"><span class=\"crayon-c\">// importee.mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-3\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-4\"><span class=\"crayon-e\">export </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"foo\"</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-5\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-6\"><span class=\"crayon-e\">export </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Running Task'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">resolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-9\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-10\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0010 seconds] -->\n<p></p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b18426522605\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-6\">6</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-2\"><span class=\"crayon-c\">// importer.mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-3\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"./importee\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-4\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-5\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'foo =&gt;'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-6\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0006 seconds] -->\n<p></p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b1a362248770\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1a362248770-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1a362248770-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1a362248770-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1a362248770-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1a362248770-5\">5</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b1a362248770-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1a362248770-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">experimental</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">modules </span><span class=\"crayon-v\">importer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1a362248770-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25619</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ExperimentalWarning</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">The </span><span class=\"crayon-e\">ESM </span><span class=\"crayon-e\">module </span><span class=\"crayon-e\">loader </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">experimental</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1a362248770-4\"><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">foo</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1a362248770-5\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0008 seconds] -->\n<p></p>\n<h2>Chaining of thenables</h2>\n<p>Similar to promises, thenables can be chained:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b1d808928575\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-9\">9</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-2\"><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">experimental</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">repl</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">await</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-3\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">r</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">r</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">r</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-4\"><span class=\"crayon-v\">undefined</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-5\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-e\">thenable</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-6\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-7\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">_</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-8\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-9\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0016 seconds] -->\n<p></p>\n<h2>Usage with Proxies</h2>\n<p>Dynamic interception of then invocations through proxies works exactly the way we’d expect:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b20469144398\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-12\">12</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Proxy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">get</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">object</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prop</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">prop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'then'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">resolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-8\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-9\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-10\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-11\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-12\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0016 seconds] -->\n<p></p>\n<h2>Closure</h2>\n<p>While implicit resolution of thenables opens up some interesting opportunities, it can also lead to unexpected/surprising behavior if we are not aware of it.</p>\n\n\n    ",
            "tags": [
                "Javascript",
                "Frontend"
            ]
        },
        {
            "id": "https://lorefnon.me/2018/02/04/redux-loop-a-better-solution-for-managing-asynchronous-operations-in-redux/",
            "url": "https://lorefnon.me/2018/02/04/redux-loop-a-better-solution-for-managing-asynchronous-operations-in-redux/",
            "title": "Redux-loop: A better solution for managing asynchronous operations in redux",
            "date_published": "2018-02-04T00:00:00.000Z",
            "content_html": "<link rel=\"stylesheet\" href=\"/css/crayon.min.css\" >\n<link rel=\"stylesheet\" href=\"/css/crayon-flatui-light.css\" >\n\n\n\n\t<p>The lack of support for asynchronous operations in redux core has spawned a whole ecosystems for managing <em><strong>side-effects</strong></em>&nbsp;<sup><a id=\"side-effects-footer-link-back\" href=\"#side-effects-footer-link\">[1]</a></sup> in Redux.</p>\n<p>This post argues that the <a href=\"https://github.com/redux-loop/redux-loop\">redux-loop</a>&nbsp;library (1.5 k ★ as of this writing) is a much better solution for this job than other more popular alternatives like <a href=\"https://github.com/redux-saga/redux-saga\">redux-sagas</a> (11.8 k&nbsp;★) and <a href=\"https://github.com/gaearon/redux-thunk\">redux-thunk</a> (7.8 k&nbsp;★).</p>\n<p>As has always been prevalent in frontend ecosystem, popularity&nbsp; does not necessarily translate to better suitability.</p>\n<p><span id=\"more-113\"></span></p>\n<h1>What is redux-loop ?</h1>\n<p>Redux loop essentially exposes a <a href=\"https://github.com/reactjs/redux/blob/master/docs/Glossary.md#store-enhancer\">store enhancer</a>.</p>\n<p>Normally our reducers would take in the current state and action and return an updated state.</p>\n<p>For example:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44e6bd90c383944409\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-11\">11</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-1\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reducer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">switch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">type</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'ADD_TODO'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// Derive new state from current state</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">label</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">isDone</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=\"crayon-c\">// ... Other Cases</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-10\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-11\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0018 seconds] -->\n<p></p>\n<p>Redux encourages reducers to be pure functions and strongly discourages side-effects from <strong>being run from within reducers</strong> to <a href=\"https://hashnode.com/post/how-do-you-explain-the-term-predictable-state-container-in-simple-words-ciizdac5300wege53dogz8aqk\">ensure predictability</a>.</p>\n<p>When redux-loop’s enhancer is installed, our reducer could also return a <em><strong>loop</strong></em>.</p>\n<p>While it is a somewhat confusing name, a loop, in this context, is a combination of two things:</p>\n<ol>\n<li>An updated state (which is what you would have normally returned), and</li>\n<li>A command (A plain object which describes an asynchronous operation to be executed).</li>\n</ol>\n<p>A command describes what asynchronous operation is to be run <strong>after</strong> this dispatch cycle. For example:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44e6bd921466673431\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-9\">9</div><div class=\"crayon-num crayon-marked-num crayon-top\" data-line=\"crayon-5fba44e6bd921466673431-10\">10</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-11\">11</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-12\">12</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-13\">13</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-14\">14</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-15\">15</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-16\">16</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-17\">17</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-18\">18</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-19\">19</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-20\">20</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-21\">21</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-22\">22</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-23\">23</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-24\">24</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-25\">25</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-26\">26</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-27\">27</div><div class=\"crayon-num crayon-marked-num crayon-bottom\" data-line=\"crayon-5fba44e6bd921466673431-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-29\">29</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-31\">31</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-1\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reducer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">switch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">type</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'TODO/CREATE'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// 1. Derive new state from updated State</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nextState</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">label</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">isDone</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-marked-line crayon-top\" id=\"crayon-5fba44e6bd921466673431-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// 2. Describe what is to be done next through a command:</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nextOperation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Cmd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">createTask</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// An async function which takes the arguments below and returns a promise</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">args</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">label</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=\"crayon-c\">// Arguments to saveTask</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">successActionCreator</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">task</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Action which will be dispatched when the operation is successful</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"TODO/CREATE/SUCCESS\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">payload</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">task</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">failActionCreator</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-c\">// Action which will be dispatched when the operation is complete</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-21\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"TODO/CREATE/FAILURE\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">payload</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">error</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-23\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-25\">&nbsp;</div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// 3. Combine both in a loop:</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">loop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nextState</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nextOperation</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-marked-line crayon-bottom\" id=\"crayon-5fba44e6bd921466673431-28\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// ... Other Cases</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-30\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-31\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0038 seconds] -->\n<p></p>\n<p>While it may not be obvious looking at the example above, our <strong>reducer is still a pure function</strong>.</p>\n<p>The Command that we return as a part of the loop in just an object describing an operation. Even though the API is called <code>Cmd.run</code>, it does not actually run the asynchronous operation from within the reducer. Redux-loop executes the operation (described by the cmd) once the dispatch cycle is over.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44e6bd929710407303\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num crayon-marked-num crayon-top crayon-bottom\" data-line=\"crayon-5fba44e6bd929710407303-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-17\">17</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-19\">19</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-21\">21</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-23\">23</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-25\">25</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-27\">27</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-29\">29</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-31\">31</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-33\">33</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-35\">35</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-37\">37</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-39\">39</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line crayon-marked-line crayon-top crayon-bottom\" id=\"crayon-5fba44e6bd929710407303-1\">s&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DOM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Component&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Store&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redux-loop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-3\">User -----------------------&gt; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-4\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-5\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Click on \"Add Todo\"&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-6\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-----------&gt;||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-7\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| onClick&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-8\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +------------------------&gt; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-9\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | disatch({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-10\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; type: \"TODO/CREATE\",&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-11\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reducer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-12\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | })&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-13\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+--------------&gt; +&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-14\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-15\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-16\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-17\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&lt;--------------+--------------&gt; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-18\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;Apply&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; render&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ||&nbsp;&nbsp; nextState&nbsp;&nbsp;&nbsp;&nbsp; next&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;createTask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-19\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;diff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ||&lt;------------------------+|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(async operation)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-20\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +-----------&gt; +&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-21\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &lt;-----------+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;promise&nbsp;&nbsp;| |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-22\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | &lt;---------+ |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-23\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;dispatch({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-24\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;type: \"TODO/CREATE/SUCCESS\", | &lt;-----------+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-25\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;fulfill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-26\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-27\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&lt;-------------------------------+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-28\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-29\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reducer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-30\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+|------------&gt; +&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-31\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-32\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-33\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &lt;-----------+ +&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-34\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp; nextState&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-35\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; render&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-36\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;Apply&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&lt;------------------------+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-37\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;diff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-38\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &lt;-----------+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-39\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0044 seconds] -->\n<p></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>Interested readers are encouraged to explore the redux-loop documentation for advanced aspects. The rest of the post below compares redux-loop with prevalent alternatives.</p>\n<h1>A comparision with the alternatives</h1>\n<p>If you are writing a redux application today, it is likely that to manage asynchronous operations you are using either redux-thunks or redux-sagas, which are the most popular solutions in this space.</p>\n<p>I believe redux-loop is a better alternative to both of them.</p>\n<p>Redux-thunk encourages handling your asynchronous operations in action creators. The action creators can return thunks which can dispatch other actions when the operation has completed or when it fails.</p>\n<blockquote><p>Redux Thunk&nbsp;<a href=\"https://github.com/reactjs/redux/blob/master/docs/advanced/Middleware.md\">middleware</a>&nbsp;allows you to write action creators that return a function instead of an action. The thunk can be used to delay the dispatch of an action, or to dispatch only if a certain condition is met. The inner function receives the store methods&nbsp;<code>dispatch</code>&nbsp;and&nbsp;<code>getState</code>&nbsp;as parameters.</p></blockquote>\n<p>redux-sagas allows us to define long running generators in the application which can intercept arbitrary actions and perform asynchronous actions based on them.</p>\n<blockquote><p>The mental model is that a saga is like a separate thread in your application that’s solely responsible for side effects.&nbsp;<code>redux-saga</code>&nbsp;is a redux middleware, which means this thread can be started, paused and cancelled from the main application with normal redux actions, it has access to the full redux application state and it can dispatch redux actions as well.</p></blockquote>\n<h2>Coherent mental model</h2>\n<p>With redux-loop, when you are exploring your application codebase (or trying to debug a behavior) and trying to deduce what will happen due to an action dispatch, the starting point of investigation is always the reducer irrespective of whether the action corresponds to a synchronous operation or asynchronous.</p>\n<p>As the authors have explained this in the README:</p>\n<blockquote><p>With&nbsp;<code>redux-loop</code>, the <strong>reducer doesn’t just decide what happens&nbsp;<em>now</em>&nbsp;due to a particular action, it decides what happens&nbsp;<em>next</em>.</strong> All of the behavior of your application can be traced through one place, and that behavior can be easily broken apart and composed back together.</p></blockquote>\n<p><strong>This is not the case with either thunks or sagas.</strong></p>\n<p>In case of thunks, to investigate the impact of an action, along with all reducers which handle the action, we also need to go to each action creator which may have dispatched this action and investigate the thunks which they return.</p>\n<p>In case of sagas, along with all reducers, we need to investigate each saga which may have intercepted the action.</p>\n<p>In this regard it feels like a natural extension of the Redux API as opposed to a solution bolted on top of redux pretending that asynchronous operations are fundamentally different from synchronous operations.</p>\n<h2>Dispatch is decoupled from handling of operation</h2>\n<p>With redux-thunks, <strong>we don’t have a way to intercept actions when we don’t have control over the dispatch site.&nbsp;</strong></p>\n<p>Being able to intercept actions without modifying the dispatch site is handy in multiple scenarios. Let us say we want to show a loader when&nbsp;any asynchronous operation is in progress.</p>\n<p>We can implement this using redux-loop without all the action creators being aware of this. A single reducer can intercept all actions suffixed with <code>_PENDING</code>&nbsp;and <code>_COMPLETE</code>&nbsp;and use them to update the progress bar state in redux.</p>\n<p>Redux-sagas is capable of such interception, but debugging sagas can be quite difficult owning to the fact that sagas can spawn other sagas during their lifetime, so investigation of the impact of an action requires knowledge of what all sagas were running at the point of dispatch.</p>\n<h2>Time variant local state outside redux</h2>\n<p>This is essentially an extension of the above argument. Because sagas are long running, they make it very easy (and even encourage) to have local implicit state within the sagas which is not in the redux store and can not be investigated through redux-dev-tools. Based on this implicit time variant state encapsulated within local scopes of long running generators, sagas can do different things when same action is dispatched and in large complex applications this can be difficult to reason about.</p>\n<p>I believe it is much better to encode all these transient states of various asynchronous operation, which are in progress, within the redux store so that the store remains the primary source of truth in the application. It is much easier to reason about the behavior of application when the outcome of an action is directly deducible from store state and action.</p>\n<p>Can the same approach be adopted while using sagas ? Sure. But for a vast majority of use cases, redux-saga’s flexibility – especially the ability to arbitrarily fork and join sagas – is an undesirable footgun which can make post-mortem debugging a whole lot more complex.</p>\n<p>While it is likely that tooling efforts like <a href=\"https://github.com/redux-saga/redux-saga-devtools\">redux-saga-devtools&nbsp;</a>will help alleviate many of the debugging headaches associated with sagas, but I still prefer to treat the redux store as the singular state machine driving the application.</p>\n<hr>\n<p><sup><a id=\"side-effects-footer-link\" href=\"#side-effects-footer-link-back\">[1]</a></sup>&nbsp;I explicitly avoid the usage of the term <strong>side-effect&nbsp;</strong>because it seems to imply that these operations are something of lesser importance where as, in reality, for most applications, these side effects are the reasons these applications exist.</p>\n<p>In frontend application asynchrony is so prevalent that management of asynchronous flow of control is often the single most important thing in the application.</p>\n\n\n    ",
            "tags": [
                "Javascript",
                "Frontend",
                "Redux",
                "Redux-loop"
            ]
        },
        {
            "id": "https://lorefnon.me/2016/04/04/embracing-bem-methodology-in-react-applications.html",
            "url": "https://lorefnon.me/2016/04/04/embracing-bem-methodology-in-react-applications.html",
            "title": "Embracing BEM methodology in React applications",
            "date_published": "2016-04-03T18:30:00.000Z",
            "content_html": "\n<a class=\"header-link\" href=\"#react-and-modular-css\"><h2 id=\"react-and-modular-css\">React and modular CSS</h2></a>\n\n<p><a href=\"https://github.com/facebook/react\">React</a> provides an elegant component oriented approach towards structuring our User interface. However it is not very prescriptive of how to modularize the CSS. Many React core team members have <a href=\"https://speakerdeck.com/vjeux/react-css-in-js\">opined</a> that it is better to ditch css entirely and embrace js based inline styles. However that decision does not go well with a lot of frontend teams and makes things difficult for newcomers.</p>\n\n<p>However there many popular approaches for modularizing CSS that have evolved from community experience independent of React. Once such approach is <a href=\"http://getbem.com/\">BEM</a> which has proven to be quite popular and effective in practice.</p>\n\n<p>This post outlines a few functional utilities to effectively and succinctly use BEM alongside React.</p>\n\n<a class=\"header-link\" href=\"#composing-class-names\"><h2 id=\"composing-class-names\">Composing class names</h2></a>\n\n<p>While ES6 template strings provide a decent solution for string interpolation, it becomes cumbersome when we assign/toggle many classnames based on props or state variables. <a href=\"https://github.com/JedWatson/classnames\">JedWatson/classnames</a> is a nifty functional utility that alleviates some of this pain. Some examples directly taken from the <a href=\"https://github.com/JedWatson/classnames/blob/master/README.md\">README</a> illustrate the use case very well:</p>\n<div class=\"highlight\"><pre><code class=\"javascript language-javascript\" data-lang=\"javascript\"><span class=\"nx\">classNames</span><span class=\"p\">(</span><span class=\"s1\">'foo'</span><span class=\"p\">,</span> <span class=\"s1\">'bar'</span><span class=\"p\">);</span> <span class=\"c1\">// =&gt; 'foo bar'</span>\n<span class=\"nx\">classNames</span><span class=\"p\">(</span><span class=\"s1\">'foo'</span><span class=\"p\">,</span> <span class=\"p\">&#123;</span> <span class=\"nx\">bar</span><span class=\"o\">:</span> <span class=\"kc\">true</span> <span class=\"p\">&#125;);</span> <span class=\"c1\">// =&gt; 'foo bar'</span>\n<span class=\"nx\">classNames</span><span class=\"p\">(&#123;</span> <span class=\"s1\">'foo-bar'</span><span class=\"o\">:</span> <span class=\"kc\">true</span> <span class=\"p\">&#125;);</span> <span class=\"c1\">// =&gt; 'foo-bar'</span>\n<span class=\"nx\">classNames</span><span class=\"p\">(&#123;</span> <span class=\"s1\">'foo-bar'</span><span class=\"o\">:</span> <span class=\"kc\">false</span> <span class=\"p\">&#125;);</span> <span class=\"c1\">// =&gt; ''</span>\n<span class=\"nx\">classNames</span><span class=\"p\">(&#123;</span> <span class=\"nx\">foo</span><span class=\"o\">:</span> <span class=\"kc\">true</span> <span class=\"p\">&#125;,</span> <span class=\"p\">&#123;</span> <span class=\"nx\">bar</span><span class=\"o\">:</span> <span class=\"kc\">true</span> <span class=\"p\">&#125;);</span> <span class=\"c1\">// =&gt; 'foo bar'</span>\n<span class=\"nx\">classNames</span><span class=\"p\">(&#123;</span> <span class=\"nx\">foo</span><span class=\"o\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span> <span class=\"nx\">bar</span><span class=\"o\">:</span> <span class=\"kc\">true</span> <span class=\"p\">&#125;);</span> <span class=\"c1\">// =&gt; 'foo bar'</span>\n\n<span class=\"c1\">// lots of arguments of various types</span>\n<span class=\"nx\">classNames</span><span class=\"p\">(</span><span class=\"s1\">'foo'</span><span class=\"p\">,</span> <span class=\"p\">&#123;</span> <span class=\"nx\">bar</span><span class=\"o\">:</span> <span class=\"kc\">true</span><span class=\"p\">,</span> <span class=\"nx\">duck</span><span class=\"o\">:</span> <span class=\"kc\">false</span> <span class=\"p\">&#125;,</span> <span class=\"s1\">'baz'</span><span class=\"p\">,</span> <span class=\"p\">&#123;</span> <span class=\"nx\">quux</span><span class=\"o\">:</span> <span class=\"kc\">true</span> <span class=\"p\">&#125;);</span> <span class=\"c1\">// =&gt; 'foo bar baz quux'</span>\n\n<span class=\"c1\">// other falsy values are just ignored</span>\n<span class=\"nx\">classNames</span><span class=\"p\">(</span><span class=\"kc\">null</span><span class=\"p\">,</span> <span class=\"kc\">false</span><span class=\"p\">,</span> <span class=\"s1\">'bar'</span><span class=\"p\">,</span> <span class=\"kc\">undefined</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"p\">&#123;</span> <span class=\"nx\">baz</span><span class=\"o\">:</span> <span class=\"kc\">null</span> <span class=\"p\">&#125;,</span> <span class=\"s1\">''</span><span class=\"p\">);</span> <span class=\"c1\">// =&gt; 'bar 1'</span>\n</code></pre></div>\n<a class=\"header-link\" href=\"#eliminating-redundancy-in-class-names-using-css-precompilers\"><h2 id=\"eliminating-redundancy-in-class-names-using-css-precompilers\">Eliminating redundancy in class names using CSS precompilers</h2></a>\n\n<p>CSS precompilers like <a href=\"http://sass-lang.com/\">SASS</a> and <a href=\"http://lesscss.org/\">LESS</a> allow us to augment the parent context in included scope using ampersand (<code>&amp;</code>) prefix. This significantly helps towards keeping our stylesheets DRY:</p>\n<div class=\"highlight\"><pre><code class=\"text language-text\" data-lang=\"text\">.block &#123;\n    background: white;\n\n    &amp;__element-one &#123;\n        border-bottom: 1px solid red;\n\n        &amp;--modifier-one &#123;\n            color: red;\n        &#125;\n\n    &#125;\n&#125;\n</code></pre></div>\n<a class=\"header-link\" href=\"#eliminating-redundancy-in-class-names-in-react-components\"><h2 id=\"eliminating-redundancy-in-class-names-in-react-components\">Eliminating redundancy in class names in react components</h2></a>\n\n<p><a href=\"https://www.npmjs.com/package/bem-classname\"><code>bem-classname</code></a> is a nifty utility that allows us to eliminate the redundancy while assigning classnames to DOM elements.</p>\n\n<p>The canonical approach is to pass the block, element and modifier names to the function exposed by the utility:</p>\n<div class=\"highlight\"><pre><code class=\"javascript language-javascript\" data-lang=\"javascript\"><span class=\"nx\">bemClassName</span><span class=\"p\">(</span><span class=\"s1\">'block'</span><span class=\"p\">,</span> <span class=\"s1\">'element'</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"s1\">'awesome'</span><span class=\"p\">]);</span> <span class=\"c1\">// block__element block__element--awesome</span>\n</code></pre></div>\n<p>However the function can also be bound to a block context allowing us to strip away some of the boilerplate:</p>\n<div class=\"highlight\"><pre><code class=\"text language-text\" data-lang=\"text\">import React from 'react'\nimport bem from 'bem-classname'\n\nconst Home = () =&gt; (\n  &lt;div className=&#123;className()&#125;&gt;\n    &lt;h1 className=&#123;className('header')&#125;&gt; Lorefnon &lt;/h1&gt;\n    &lt;div className=&#123;className('description')&#125;&gt;\n      Full Stack Web Application Developer\n    &lt;/div&gt;\n  &lt;/div&gt;\n)\n\nexport default Home\n\n// Private:\n\nconst className = bem.bind(null, 'Home')\n</code></pre></div>\n<p>The above stateless component generates the following markup:</p>\n<div class=\"highlight\"><pre><code class=\"html language-html\" data-lang=\"html\">  <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"Home\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;h1</span> <span class=\"na\">class=</span><span class=\"s\">\"Home__header\"</span><span class=\"nt\">&gt;</span> Lorefnon <span class=\"nt\">&lt;/h1&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"Home__description\"</span><span class=\"nt\">&gt;</span>\n      Full Stack Web Application Developer\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/div&gt;</span>\n</code></pre></div>\n<p>Not that BEM does not restrict us to one block/element per node. So a single node can represent multiple blocks. In such cases it is helpful to combine the aforementioned two utilities.</p>\n\n<a class=\"header-link\" href=\"#compressing-classnames-in-production\"><h2 id=\"compressing-classnames-in-production\">Compressing classnames in production</h2></a>\n\n<p>While BEM is very useful from a developer perspective as it eliminates the tedium of dealing with CSS specificity to a significant extent - however it has been crticised for the elaborate classnames which contribute towards increased size of HTML &amp; CSS files.</p>\n\n<p>If your use case really demands this level of optimization, then there are utilities like <a href=\"https://www.npmjs.com/package/grunt-class-id-minifier\">grunt-class-id-minifier</a> which can compress these class names as a part of the build process.</p>\n\n<p>The plugin generates a mapping file which we can consume in our components as a normal javascript module.</p>\n<div class=\"highlight\"><pre><code class=\"javascript language-javascript\" data-lang=\"javascript\"><span class=\"nx\">module</span><span class=\"p\">.</span><span class=\"nx\">exports</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"kd\">function</span> <span class=\"p\">()</span> <span class=\"p\">&#123;</span>\n    <span class=\"k\">return</span> <span class=\"p\">&#123;</span>\n        <span class=\"s2\">\"Home__header\"</span><span class=\"o\">:</span> <span class=\"s2\">\"a\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"Home__description\"</span><span class=\"o\">:</span> <span class=\"s2\">\"b\"</span>\n    <span class=\"p\">&#125;;</span>\n<span class=\"p\">&#125;);</span>\n</code></pre></div>\n<div class=\"highlight\"><pre><code class=\"javascript language-javascript\" data-lang=\"javascript\"><span class=\"kr\">import</span> <span class=\"nx\">mapper</span> <span class=\"nx\">from</span> <span class=\"s1\">'./map.js'</span>\n\n<span class=\"kr\">const</span> <span class=\"nx\">_className</span> <span class=\"o\">=</span> <span class=\"nx\">bem</span><span class=\"p\">.</span><span class=\"nx\">bind</span><span class=\"p\">(</span><span class=\"kc\">null</span><span class=\"p\">,</span> <span class=\"s1\">'Home'</span><span class=\"p\">)</span>\n\n<span class=\"kr\">const</span> <span class=\"nx\">className</span> <span class=\"o\">=</span> <span class=\"p\">(...</span><span class=\"nx\">args</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"p\">&#123;</span>\n  <span class=\"kr\">const</span> <span class=\"nx\">c</span> <span class=\"o\">=</span> <span class=\"nx\">_className</span><span class=\"p\">(...</span><span class=\"nx\">args</span><span class=\"p\">)</span>\n  <span class=\"k\">return</span> <span class=\"nx\">mapper</span><span class=\"p\">[</span><span class=\"nx\">c</span><span class=\"p\">]</span> <span class=\"o\">||</span> <span class=\"nx\">c</span>\n<span class=\"p\">&#125;</span>\n</code></pre></div>\n",
            "tags": [
                "Javascript",
                "CSS"
            ]
        },
        {
            "id": "https://lorefnon.me/2015/11/26/boost-your-content-focussed-site-with-structured-page-fragments.html",
            "url": "https://lorefnon.me/2015/11/26/boost-your-content-focussed-site-with-structured-page-fragments.html",
            "title": "Boost your content focussed site with Structured Page Fragments",
            "date_published": "2015-11-25T18:30:00.000Z",
            "content_html": "<h2 id=\"The-context\"><a href=\"#The-context\" class=\"headerlink\" title=\"The context\"></a>The context</h2><p>SPF.js a lightweight javascript library to incorporate dynamic page updates that dramatically reduces perceived page latency. Quoting from the Repo Homepage:</p>\n<blockquote>\n<p>Using progressive enhancement and HTML5, SPF integrates with your site to enable a faster, more fluid user experience by updating just the sections of the page that change during navigation, not the whole page. SPF provides a response format for sending document fragments, a robust system for script and style management, an in-memory cache, on-the-fly processing, and more.</p>\n</blockquote>\n<p>While for complex dynamic sites which have a significant amount of client side logic, I still recommend adopting a client side javascript framework, but for content focussed sites, a nifty utility like SPF.js can be very useful.</p>\n<a id=\"more\"></a>\n\n<h2 id=\"Why-not-good-old-js-erb-templates\"><a href=\"#Why-not-good-old-js-erb-templates\" class=\"headerlink\" title=\"Why not good old js.erb templates ?\"></a>Why not good old js.erb templates ?</h2><p>While Rails allows us to render server generated javascript templates, using them to generate dynamic page updates is a bit cumbersome for most scenarios. Especially you have to handle page url updates manually, scroll back the pages manually etc. None of them are very complex concerns, but having a library deal with such cross cutting concerns is much more elegant IMHO.</p>\n<h2 id=\"What-about-turbolinks\"><a href=\"#What-about-turbolinks\" class=\"headerlink\" title=\"What about turbolinks ?\"></a>What about turbolinks ?</h2><p>While yes, turbolinks does enjoy being a part of the default Rails stack, but frankly, it has always seemed like a half baked product. While turbolinks does improve the experience over full page reloads, behind the scenes it still loads the full page content.</p>\n<p>SPF.js allows you to just fetch the parts of the page that really need updating. The GIF below, also taken from the official site, explains this much better:</p>\n<table style=\"margin: auto\">\n  <thead>\n    <tr>\n      <th> Full page re-rerendering </th>\n      <th> Partial section replacement with SPF.js </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td> <img src=\"/images/animation-static-340x178.gif\"></td>\n      <td> <img src=\"/images/animation-dynamic-340x178.gif\"></td>\n    </tr>\n  </tbody>\n</table>\n\n<h2 id=\"But-doesn-39-t-the-latest-version-of-turbolinks-include-support-for-partial-page-replacement\"><a href=\"#But-doesn-39-t-the-latest-version-of-turbolinks-include-support-for-partial-page-replacement\" class=\"headerlink\" title=\"But doesn&#39;t the latest version of turbolinks include support for partial page replacement ?\"></a>But doesn&#39;t the latest version of turbolinks include support for partial page replacement ?</h2><p>Yes, but there is a <a href=\"https://github.com/rails/turbolinks/issues/628\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">lack of clarity</a> over when (and if) that feature will be officially released.</p>\n<p>In a nutshell, the version of turbolinks that is scheduled to ship with Rails 5, significantly diverges from what has hitherto been considered as the <a href=\"https://github.com/rails/turbolinks/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">official turbolinks repo</a>, and will probably not contain, among other features, support for partial page replacements. While the future is not set in stone, and as DHH has <a href=\"https://github.com/rails/turbolinks/issues/628#issuecomment-157376926\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">put it</a>:</p>\n<blockquote>\n<p>But, hey, it&#39;s just code. If the current state of this repo serves your\nneeds, you don&#39;t need any official blessing from anyone to use it. You can\nuse it as-is, you can fork, you can do whatever you want. MIT baby!</p>\n</blockquote>\n<p>While I appreciate the freedom associated with open source licenses, I would rather bet on a well supported library that caters to the exact same use case and which is already being used in production in a wildly popular site - Youtube.</p>\n<h2 id=\"Integrating-SPF-js-with-Rails\"><a href=\"#Integrating-SPF-js-with-Rails\" class=\"headerlink\" title=\"Integrating SPF.js with Rails\"></a>Integrating SPF.js with Rails</h2><p>The rest of the post outlines the steps required to integrate SPF.js with a rails application. The code for this tutorial is available in <a href=\"https://github.com/lorefnon/rails-spfjs-demo\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Github</a>.</p>\n<p>We will create a dummy blog application. But hey, since this is just a demo application, we can get away with a little <a href=\"https://github.com/sevenwire/forgery\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Forgery</a>:</p>\n<pre><code class=\"hljs ruby\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">PostsController</span> &lt; ApplicationController</span>\n\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">index</span></span>\n    <span class=\"hljs-variable\">@page</span> = params[<span class=\"hljs-symbol\">:page</span>].to_i\n    <span class=\"hljs-variable\">@num_pages</span> = <span class=\"hljs-number\">1000</span>\n    <span class=\"hljs-variable\">@posts</span> = <span class=\"hljs-number\">10</span>.times.map &#123; fake_post_summary &#125;\n  <span class=\"hljs-keyword\">end</span>\n\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">show</span></span>\n    <span class=\"hljs-variable\">@post</span> = fake_post\n  <span class=\"hljs-keyword\">end</span>\n\n  private\n\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">fake_post</span></span>\n    OpenStruct.new fake_post_summary.to_h.merge!(\n      <span class=\"hljs-symbol\">id:</span> params[<span class=\"hljs-symbol\">:id</span>],\n      <span class=\"hljs-symbol\">body:</span> LoremIpsum.random(<span class=\"hljs-symbol\">paragraphs:</span> rand(<span class=\"hljs-number\">20</span>))\n    )\n  <span class=\"hljs-keyword\">end</span>\n\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">fake_post_summary</span></span>\n    OpenStruct.new(\n      <span class=\"hljs-symbol\">id:</span> rand(<span class=\"hljs-number\">1000</span>),\n      <span class=\"hljs-symbol\">title:</span> LoremIpsum.lorem_ipsum(<span class=\"hljs-symbol\">words:</span> rand(<span class=\"hljs-number\">20</span>)),\n      <span class=\"hljs-symbol\">summary:</span> LoremIpsum.random(<span class=\"hljs-symbol\">paragraphs:</span> <span class=\"hljs-number\">1</span>),\n      <span class=\"hljs-symbol\">author:</span> OpenStruct.new(\n        <span class=\"hljs-symbol\">user_name:</span> Forgery(<span class=\"hljs-string\">&#x27;internet&#x27;</span>).user_name,\n        <span class=\"hljs-symbol\">email:</span> Forgery(<span class=\"hljs-string\">&#x27;internet&#x27;</span>).email_address\n      )\n    )\n  <span class=\"hljs-keyword\">end</span>\n\n<span class=\"hljs-keyword\">end</span>\n</code></pre>\n<p>So now that we have our dummy posts in place, we just need to show them:</p>\n<pre><code class=\"hljs erb\"><span class=\"xml\"><span class=\"hljs-comment\">&lt;!-- posts/index.html.erb --&gt;</span></span>\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;blog-container&quot;</span>&gt;</span></span>\n\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;blog-title title&quot;</span>&gt;</span> Lorefnon&#x27;s Awesome blog <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span></span>\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;page-title title&quot;</span>&gt;</span> Posts <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span></span>\n\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;posts-container&quot;</span>&gt;</span></span>\n<span class=\"xml\">    &lt;%=</span><span class=\"ruby\"> render <span class=\"hljs-string\">&#x27;posts/posts&#x27;</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span></code></pre>\n<br/>\n\n<pre><code class=\"hljs erb\"><span class=\"xml\"><span class=\"hljs-comment\">&lt;!-- posts/_posts.html.erb --&gt;</span></span>\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;posts-list&quot;</span>&gt;</span></span>\n\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;posts&quot;</span>&gt;</span></span>\n<span class=\"xml\">    &lt;%</span><span class=\"ruby\"> <span class=\"hljs-variable\">@posts</span>.each <span class=\"hljs-keyword\">do</span> <span class=\"hljs-params\">|post|</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">    &lt;%=</span><span class=\"ruby\"> render <span class=\"hljs-string\">&#x27;posts/summary&#x27;</span>, <span class=\"hljs-symbol\">post:</span> post </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">    &lt;%</span><span class=\"ruby\"> <span class=\"hljs-keyword\">end</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span></span>\n\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;navigation-links&quot;</span>&gt;</span></span>\n<span class=\"xml\">  &lt;%=</span><span class=\"ruby\"> render <span class=\"hljs-string\">&#x27;posts/navigation_links&#x27;</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span></code></pre>\n<br/>\n\n<pre><code class=\"hljs erb\"><span class=\"xml\"><span class=\"hljs-comment\">&lt;!-- posts/_summary.html.erb --&gt;</span></span>\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">data-post-id</span>=<span class=\"hljs-string\">&quot;&lt;%=</span></span></span><span class=\"ruby\"> post.id </span><span class=\"xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">%&gt;&quot;</span>&gt;</span></span>\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h3</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;title post-title&quot;</span>&gt;</span> &lt;%=</span><span class=\"ruby\"> link_to post.title, post_path(<span class=\"hljs-symbol\">id:</span> post.id) </span><span class=\"xml\">%&gt; <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h3</span>&gt;</span></span>\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span> &lt;%=</span><span class=\"ruby\"> post.summary </span><span class=\"xml\">%&gt; <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span></span>\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span></span></code></pre>\n<br/>\n\n<pre><code class=\"hljs erb\"><span class=\"xml\"><span class=\"hljs-comment\">&lt;!-- posts/_navigation_links.html.erb --&gt;</span></span>\n<span class=\"xml\">&lt;%</span><span class=\"ruby\"> <span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">@page</span> &gt; <span class=\"hljs-number\">0</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">   &lt;%=</span><span class=\"ruby\"> link_to <span class=\"hljs-string\">&#x27;Previous Page&#x27;</span>, posts_path(<span class=\"hljs-symbol\">page:</span> <span class=\"hljs-variable\">@page</span>-<span class=\"hljs-number\">1</span>) </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">&lt;%</span><span class=\"ruby\"> <span class=\"hljs-keyword\">end</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">&lt;%</span><span class=\"ruby\"> <span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">@page</span> &lt; <span class=\"hljs-variable\">@num_pages</span> -<span class=\"hljs-number\">1</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">   &lt;%=</span><span class=\"ruby\"> link_to <span class=\"hljs-string\">&#x27;Next Page&#x27;</span>, posts_path(<span class=\"hljs-symbol\">page:</span> <span class=\"hljs-variable\">@page</span>+<span class=\"hljs-number\">1</span>) </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">&lt;%</span><span class=\"ruby\"> <span class=\"hljs-keyword\">end</span> </span><span class=\"xml\">%&gt;</span></code></pre>\n<br/>\n\n<pre><code class=\"hljs erb\"><span class=\"xml\"><span class=\"hljs-comment\">&lt;!-- posts/show.html.erb --&gt;</span></span>\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;blog-container&quot;</span>&gt;</span></span>\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;post-title title&quot;</span>&gt;</span> &lt;%=</span><span class=\"ruby\"> link_to <span class=\"hljs-variable\">@post</span>.title, post_path(<span class=\"hljs-symbol\">id:</span> <span class=\"hljs-variable\">@post</span>.id) </span><span class=\"xml\">%&gt; <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span></span>\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;post-body&quot;</span>&gt;</span> &lt;%=</span><span class=\"ruby\"> <span class=\"hljs-variable\">@post</span>.body </span><span class=\"xml\">%&gt; <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span></code></pre>\n<p>The above templates have nothing particularly characteristic. If you would have written them yourself, I guess you would have implemented something very similar. I have presented above to particularly highlight that the way you structure your views does not need to be drastically altered to use SPF.js. Hence it is easy to take your existing sites and start using SPF.js.</p>\n<p>Our dummy blog looks something like this now:</p>\n<img src=\"/images/2015-11-26/blog_index.png\">\n\n<h2 id=\"Including-SPF\"><a href=\"#Including-SPF\" class=\"headerlink\" title=\"Including SPF\"></a>Including SPF</h2><p>Next step for us is to include SPF.js in the page. For that we will just add the cdn link to our layout. Other methods of including are available <a href=\"https://github.com/youtube/spfjs#download\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">here</a>.</p>\n<p>After this inclusion our template might look something like this:</p>\n<pre><code class=\"hljs erb\"><span class=\"xml\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-meta-keyword\">html</span>&gt;</span></span>\n\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span></span>\n\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span></span>\n<span class=\"xml\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Rails Spfjs Demo<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span></span>\n<span class=\"xml\">    &lt;%=</span><span class=\"ruby\"> javascript_include_tag <span class=\"hljs-string\">&#x27;//ajax.googleapis.com/ajax/libs/spf/2.3.0/spf.js&#x27;</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">    &lt;%=</span><span class=\"ruby\"> stylesheet_link_tag    <span class=\"hljs-string\">&#x27;application&#x27;</span>, <span class=\"hljs-symbol\">media:</span> <span class=\"hljs-string\">&#x27;all&#x27;</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">    &lt;%=</span><span class=\"ruby\"> javascript_include_tag <span class=\"hljs-string\">&#x27;application&#x27;</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">    &lt;%=</span><span class=\"ruby\"> csrf_meta_tags </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span></span>\n\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span></span>\n\n<span class=\"xml\">  &lt;%=</span><span class=\"ruby\"> <span class=\"hljs-keyword\">yield</span> </span><span class=\"xml\">%&gt;</span>\n\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span></span>\n<span class=\"xml\">    spf.init();</span>\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span></span>\n\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span></span>\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span></span></code></pre>\n<h2 id=\"Making-navigation-links-SPF-aware\"><a href=\"#Making-navigation-links-SPF-aware\" class=\"headerlink\" title=\"Making navigation links SPF aware\"></a>Making navigation links SPF aware</h2><p>However just initializing SPF.js does not magically ajaxify all navigation links. In fact by so far SPF.js does not alter the navigation in any way. We need to explicitly enable SPFjs for links for which our server knows how to server partial content. For SPF to process a link, it should have the class &#39;spf-link&#39;. Let us start with our navigation links:</p>\n<pre><code class=\"hljs erb\"><span class=\"xml\">&lt;%</span><span class=\"ruby\"> <span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">@page</span> &gt; <span class=\"hljs-number\">0</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">   &lt;%=</span><span class=\"ruby\"> link_to <span class=\"hljs-string\">&#x27;Previous Page&#x27;</span>, posts_path(<span class=\"hljs-symbol\">page:</span> <span class=\"hljs-variable\">@page</span>-<span class=\"hljs-number\">1</span>), <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>: &#x27;<span class=\"hljs-title\">spf</span>-<span class=\"hljs-title\">link</span>&#x27; </span></span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">&lt;%</span><span class=\"ruby\"> <span class=\"hljs-keyword\">end</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">&lt;%</span><span class=\"ruby\"> <span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">@page</span> &lt; <span class=\"hljs-variable\">@num_pages</span> -<span class=\"hljs-number\">1</span> </span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">   &lt;%=</span><span class=\"ruby\"> link_to <span class=\"hljs-string\">&#x27;Next Page&#x27;</span>, posts_path(<span class=\"hljs-symbol\">page:</span> <span class=\"hljs-variable\">@page</span>+<span class=\"hljs-number\">1</span>), <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>: &#x27;<span class=\"hljs-title\">spf</span>-<span class=\"hljs-title\">link</span>&#x27; </span></span><span class=\"xml\">%&gt;</span>\n<span class=\"xml\">&lt;%</span><span class=\"ruby\"> <span class=\"hljs-keyword\">end</span> </span><span class=\"xml\">%&gt;</span></code></pre>\n<p>One great feature of SPF.js is that it handles graceful degradation. So, since we haven&#39;t done anything on the server side to generate partial contents, SPF will try to make an ajax request to server (with the special query parameter spf=navigate) and once that response format does not match what SPF expects, it will allow a full page reload.</p>\n<h2 id=\"Server-side-handling-for-SPF\"><a href=\"#Server-side-handling-for-SPF\" class=\"headerlink\" title=\"Server side handling for SPF\"></a>Server side handling for SPF</h2><p>Let us move on to server side handling:</p>\n<p>As we have previously mentioned that SPF sends an ajax request using spf=navigate query parameter. We can detect that in our controller and send out a special response that only includes the parts of the page we need to update:</p>\n<pre><code class=\"hljs ruby\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">PostsController</span> &lt; ApplicationController</span>\n\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">index</span></span>\n    <span class=\"hljs-variable\">@page</span> = params[<span class=\"hljs-symbol\">:page</span>].to_i\n    <span class=\"hljs-variable\">@num_pages</span> = <span class=\"hljs-number\">1000</span>\n    <span class=\"hljs-variable\">@posts</span> = <span class=\"hljs-number\">10</span>.times.map &#123; fake_post_summary &#125;\n\n    <span class=\"hljs-keyword\">if</span> params[<span class=\"hljs-symbol\">:spf</span>] == <span class=\"hljs-string\">&#x27;navigate&#x27;</span>\n      render <span class=\"hljs-string\">&#x27;posts/index.json&#x27;</span>\n    <span class=\"hljs-keyword\">end</span>\n  <span class=\"hljs-keyword\">end</span>\n\n...</code></pre>\n<p>Next we will have to designate the parts that can be dynamically replace using an id. In our modified <code>posts/_summary.html.erb</code> below, <code>spf-posts-container</code> serves that purpose:</p>\n<pre><code class=\"hljs erb\"><span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">data-post-id</span>=<span class=\"hljs-string\">&quot;&lt;%=</span></span></span><span class=\"ruby\"> post.id </span><span class=\"xml\"><span class=\"hljs-tag\"><span class=\"hljs-string\">%&gt;&quot;</span>&gt;</span></span>\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h3</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;title post-title&quot;</span>&gt;</span> &lt;%=</span><span class=\"ruby\"> link_to post.title, post_path(<span class=\"hljs-symbol\">id:</span> post.id) </span><span class=\"xml\">%&gt; <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h3</span>&gt;</span></span>\n<span class=\"xml\">  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span> &lt;%=</span><span class=\"ruby\"> post.summary </span><span class=\"xml\">%&gt; <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span></span>\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span></span></code></pre>\n\n<p>While SPF does not require DOM node IDs to begin with <code>spf-</code> prefix I think this is a good convention and makes the intent explict.</p>\n<p>Finally here is our json template that contains the partial page update, in the format that SPF.js <a href=\"https://youtube.github.io/spfjs/documentation/responses/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">can process</a>.</p>\n<p>index.json.erb:</p>\n<pre><code class=\"hljs erb\"><span class=\"xml\">&#123;</span>\n<span class=\"xml\">  &quot;body&quot;: &#123;</span>\n<span class=\"xml\">    &quot;spf-posts-container&quot;: &quot;&lt;%=</span><span class=\"ruby\"> j render <span class=\"hljs-string\">&#x27;posts/posts&#x27;</span> </span><span class=\"xml\">%&gt;&quot;</span>\n<span class=\"xml\">  &#125;</span>\n<span class=\"xml\">&#125;</span></code></pre>\n<p>While we are using a simple <code>json.erb</code> template, it should be noted that any generic approach that can generate json response in rails, works well. So if you are already using <code>rabl</code> or <code>jbuilder</code> in your APIs, you can continue using that.</p>\n<p>Now when a navigation link is clicked, the json response is fetched via ajax and the page is dynamically updated - resulting in a much smoother user experience. Also note that browser url has been automatically updated and the page scrolls to the top. SPF tries to emulate the experience the experience of page change as much as possible to prevent uncanny surprises.</p>\n<img src=\"/images/2015-11-26/spf_response.png\">\n\n<h2 id=\"Optional-Leveraging-rails-magic-for-leaner-controllers\"><a href=\"#Optional-Leveraging-rails-magic-for-leaner-controllers\" class=\"headerlink\" title=\"(Optional) Leveraging rails magic for leaner controllers\"></a>(Optional) Leveraging rails magic for leaner controllers</h2><p>While the above works, it is unweildy to handle the navigation link in each controller. We can alternatively make the <code>default_render</code> method that is used by rails to be SPF aware. The <a href=\"https://github.com/rails/rails/blob/7f18ea14c893cb5c9f04d4fda9661126758332b5/actionpack/lib/action_controller/metal/implicit_render.rb\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">default implementation</a> looks like this:</p>\n<pre><code class=\"hljs ruby\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">default_render</span><span class=\"hljs-params\">(*args)</span></span>\n  <span class=\"hljs-keyword\">if</span> template_exists?(action_name.to_s, _prefixes, <span class=\"hljs-symbol\">variants:</span> request.variant)\n    render(*args)\n  <span class=\"hljs-keyword\">else</span>\n    <span class=\"hljs-keyword\">if</span> block_given?\n      <span class=\"hljs-keyword\">yield</span>(*args)\n    <span class=\"hljs-keyword\">else</span>\n      logger.info <span class=\"hljs-string\">&quot;No template found for <span class=\"hljs-subst\">#&#123;<span class=\"hljs-keyword\">self</span>.<span class=\"hljs-keyword\">class</span>.name&#125;</span>\\#<span class=\"hljs-subst\">#&#123;action_name&#125;</span>, rendering head :no_content&quot;</span> <span class=\"hljs-keyword\">if</span> logger\n      <span class=\"hljs-keyword\">super</span>\n    <span class=\"hljs-keyword\">end</span>\n  <span class=\"hljs-keyword\">end</span>\n<span class=\"hljs-keyword\">end</span></code></pre>\n<p>We can override this in our ApplicationController</p>\n<pre><code class=\"hljs ruby\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ApplicationController</span> &lt; ActionController::Base</span>\n\n  <span class=\"hljs-comment\"># Prevent CSRF attacks by raising an exception.</span>\n  <span class=\"hljs-comment\"># For APIs, you may want to use :null_session instead.</span>\n  protect_from_forgery <span class=\"hljs-symbol\">with:</span> <span class=\"hljs-symbol\">:exception</span>\n\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">default_render</span><span class=\"hljs-params\">(*args)</span></span>\n    <span class=\"hljs-keyword\">if</span> params[<span class=\"hljs-symbol\">:spf</span>] == <span class=\"hljs-string\">&#x27;navigate&#x27;</span>\n      render <span class=\"hljs-string\">&quot;<span class=\"hljs-subst\">#&#123;controller_name&#125;</span>/spf_<span class=\"hljs-subst\">#&#123;action_name&#125;</span>.json&quot;</span>\n    <span class=\"hljs-keyword\">else</span>\n      <span class=\"hljs-keyword\">super</span>\n    <span class=\"hljs-keyword\">end</span>\n  <span class=\"hljs-keyword\">end</span>\n\n<span class=\"hljs-keyword\">end</span></code></pre>\n<p>Now all we have to do is prefix the names of our SPF specific templates with <code>spf_</code> and we are done. Our <code>spf_index.json.erb</code> remains unchanged.</p>\n<p>We can clean up the action and remove SPF specific code:</p>\n<pre><code class=\"hljs ruby\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">PostsController</span> &lt; ApplicationController</span>\n\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">index</span></span>\n    <span class=\"hljs-variable\">@page</span> = params[<span class=\"hljs-symbol\">:page</span>].to_i\n    <span class=\"hljs-variable\">@num_pages</span> = <span class=\"hljs-number\">1000</span>\n    <span class=\"hljs-variable\">@posts</span> = <span class=\"hljs-number\">10</span>.times.map &#123; fake_post_summary &#125;\n  <span class=\"hljs-keyword\">end</span>\n\n...</code></pre>\n<h2 id=\"Navigation-hooks\"><a href=\"#Navigation-hooks\" class=\"headerlink\" title=\"Navigation hooks\"></a>Navigation hooks</h2><p>While so far everything works pretty well, we may want to hook into navigation events for greater flexibility. This may be useful for sending events to analytics service or for highlighting specific parts of page. The latter is useful because in some cases when the part replaced is very small, user might not immediate notice a quick change in the page content.</p>\n<p>For instance <code>spfdone</code> event is invoked after the asynchronous update has been applied to the page. We can attach handlers to this event just like any other event, and hook custom logic:</p>\n<img src=\"/images/2015-11-26/spfdone.png\">\n\n<p>Let us highlight the listing of our posts using CSS 3 animations when loaded asynchronously:</p>\n<pre><code class=\"hljs js\">$(<span class=\"hljs-built_in\">document</span>).on(<span class=\"hljs-string\">&#x27;spfdone&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">event</span>) </span>&#123;\n\n  <span class=\"hljs-keyword\">if</span> (event.originalEvent.detail.response.body[<span class=\"hljs-string\">&#x27;spf-posts-container&#x27;</span>]) &#123;\n    $(<span class=\"hljs-string\">&#x27;#spf-posts-container&#x27;</span>).addClass(<span class=\"hljs-string\">&#x27;flash&#x27;</span>)\n\n    <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>&#123;\n      $(<span class=\"hljs-string\">&#x27;#spf-posts-container&#x27;</span>).removeClass(<span class=\"hljs-string\">&#x27;flash&#x27;</span>)\n    &#125;, <span class=\"hljs-number\">3000</span>)\n\n  &#125;\n\n&#125;);</code></pre>\n<br/>\n\n<pre><code class=\"hljs css\"><span class=\"hljs-selector-class\">.flash</span> &#123;\n  <span class=\"hljs-attribute\">-moz-animation</span>: flash <span class=\"hljs-number\">1s</span> ease-out;\n  <span class=\"hljs-attribute\">-moz-animation-iteration-count</span>: <span class=\"hljs-number\">1</span>;\n\n  <span class=\"hljs-attribute\">-webkit-animation</span>: flash <span class=\"hljs-number\">1s</span> ease-out;\n  <span class=\"hljs-attribute\">-webkit-animation-iteration-count</span>: <span class=\"hljs-number\">1</span>;\n\n  <span class=\"hljs-attribute\">-ms-animation</span>: flash <span class=\"hljs-number\">1s</span> ease-out;\n  <span class=\"hljs-attribute\">-ms-animation-iteration-count</span>: <span class=\"hljs-number\">1</span>;\n&#125;\n\n<span class=\"hljs-keyword\">@-webkit-keyframes</span> flash &#123;\n    0% &#123; <span class=\"hljs-attribute\">background-color</span>: none; &#125;\n    50% &#123; <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-number\">#fbf8b2</span>; &#125;\n    100% &#123; <span class=\"hljs-attribute\">background-color</span>: none; &#125;\n&#125;\n\n<span class=\"hljs-keyword\">@-moz-keyframes</span> flash &#123;\n    0% &#123; <span class=\"hljs-attribute\">background-color</span>: none; &#125;\n    50% &#123; <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-number\">#fbf8b2</span>; &#125;\n    100% &#123; <span class=\"hljs-attribute\">background-color</span>: none; &#125;\n&#125;\n\n<span class=\"hljs-keyword\">@-ms-keyframes</span> flash &#123;\n    0% &#123; <span class=\"hljs-attribute\">background-color</span>: none; &#125;\n    50% &#123; <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-number\">#fbf8b2</span>; &#125;\n    100% &#123; <span class=\"hljs-attribute\">background-color</span>: none; &#125;\n&#125;</code></pre>\n<p>Now you should see a subtle flash when page content has been replaced.</p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>This concludes our small post on SPF integration with Rails. SPF allows for a lot more customization options beyond what our small covers. In particular SPF allows us to inject new scripts and styles dynamically, sophisticated <a href=\"https://youtube.github.io/spfjs/documentation/caching/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">cache management</a> and <a href=\"https://youtube.github.io/spfjs/documentation/versioning/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">resource versioning</a> support, which are all very useful features.</p>\n<p>The <a href=\"https://youtube.github.io/spfjs/documentation\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">official documentation</a> is a great place to start exploring more.</p>\n",
            "tags": [
                "Javascript",
                "Rails",
                "SPF"
            ]
        },
        {
            "id": "https://lorefnon.me/2015/11/22/an-answer-to-react-is-the-new-java.html",
            "url": "https://lorefnon.me/2015/11/22/an-answer-to-react-is-the-new-java.html",
            "title": "An answer to \"React is the new Java\"",
            "date_published": "2015-11-21T18:30:00.000Z",
            "content_html": "<p>This post is essentially my attempt to answer some of the concerns presented in this <a href=\"https://news.ycombinator.com/item?id=10609159\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">opinion</a> posted in HN. The author has likened the success of React with the success of Java, exemplifying how time again, what (s)he identifies as worse technology, has been pushed to a higher popularity rather than more competent alternatives available.</p>\n<blockquote>\n<p>I have been learning new technologies pretty much continuously. It&#39;s not impossible, especially if you follow sites like Hacker News, to keep a finger on the direction of the industry, and then try to stay on top of the next new hot technology of the year.</p>\n</blockquote>\n<blockquote>\n<p>But I hear you on the &quot;worse&quot; technology sometimes winning. You mentioned Java; it was worse than just about all other major contenders, and is only finally losing popularity.</p>\n</blockquote>\n<blockquote>\n<p>On a current technology fad: React seems to be designed to ignore 40 years of accumulated software best practices. [1] Separation of concerns? Who needs that any more? And the rationale for it is that it allows teams of 100 developers work together on an app.</p>\n</blockquote>\n<h2 id=\"Separation-of-Concerns\"><a href=\"#Separation-of-Concerns\" class=\"headerlink\" title=\"Separation of Concerns ?\"></a>Separation of Concerns ?</h2><p>Well, separation on concerns is a good thing to have. But only when the concerns actually translate to different responsibilities and not when they are multiple facets of the same problem.</p>\n<p>The way I see it, managing an identifyable entity in the presentation layer is a singular concern. Breaking up this presentation entity into decoupled parts - a chunk of text based HTML template, a stylesheet to make this template visually appealing and associated javascript that alters the DOM structure depending on user interaction of change of application state, does not facilitate separation of concerns, it makes things less cohesive. <a href=\"http://thebojan.ninja/2015/04/08/high-cohesion-loose-coupling/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Loose coupling, High Cohesion</a> is a classic best practice, proven time again, and React does not ignore this, it accentuates its importance.</p>\n<p>Especially in web-applications the styling rules are intrinsically linked to the DOM structure of a widget and so is the javascript that is responsible for syncing the application state to and from the DOM. Multitude of javascript libraries have recognized this long before React including but not limited to widely popular libraries like <a href=\"http://knockoutjs.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Knockout</a>, <a href=\"https://dojotoolkit.org/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Dojo</a> and <a href=\"https://www.sencha.com/products/extjs/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">ExtJS</a>.</p>\n<h2 id=\"Fads-are-not-born-from-thin-air\"><a href=\"#Fads-are-not-born-from-thin-air\" class=\"headerlink\" title=\"Fads are not born from thin air\"></a>Fads are not born from thin air</h2><p>Promotion of best practices like <a href=\"https://medium.com/@joshblack/stateless-components-in-react-0-14-f9798f8b992d#.h457qzmob\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Stateless components</a> and <a href=\"https://medium.com/@dan_abramov/mixins-are-dead-long-live-higher-order-components-94a0d2f9e750#.6lh6otq97\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">composition of higher order components</a> goes a long way towards ensuring separation of concerns where they matter.</p>\n<p>The upcoming Web Component technology is fueled by the widespread need for true component oriented building blocks and popularity of frameworks like Google Polymer highlights it very well.</p>\n<h2 id=\"JSX-and-designer-languages\"><a href=\"#JSX-and-designer-languages\" class=\"headerlink\" title=\"JSX and designer languages\"></a>JSX and designer languages</h2><blockquote>\n<p>Open standards? Nah, how about lock-in to custom language extensions that will prevent you from migrating your code to the next web standard! Much better.</p>\n</blockquote>\n<p>JSX is a custom language extension alright but it is not mandatory for using React. It is <a href=\"http://jamesknelson.com/learn-raw-react-no-jsx-flux-es6-webpack/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">fairly easy</a> to use vanilla javascript and benefit from all the features of React. In fact it is also easy to use React with other AltJS languages like <a href=\"http://blog.vjeux.com/2013/javascript/react-coffeescript.html\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Coffeescript</a>, <a href=\"http://lorefnon.me/2015/09/21/react-and-livescript-in-harmony.html\">Livescript</a> and <a href=\"https://github.com/Asana/typed-react\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Typescript</a>.</p>\n<p>While I agree that without JSX, the code is much more verbose - there are solutions like <a href=\"https://github.com/mlmorg/react-hyperscript\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">React hyperscript</a> that let you express the DOM structure within javascript, or <a href=\"https://github.com/wix/react-templates\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">React Templates</a> and <a href=\"https://github.com/jadejs/react-jade\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">React Jade</a> which allow you to use external templates with React.</p>\n<p>Also there is a <a href=\"https://facebook.github.io/jsx/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">draft specification</a> for JSX in place and some other frameworks have already <a href=\"https://github.com/insin/msx\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">started</a> adopting it.</p>\n<h2 id=\"About-open-standards\"><a href=\"#About-open-standards\" class=\"headerlink\" title=\"About open standards\"></a>About open standards</h2><h3 id=\"Web-Components\"><a href=\"#Web-Components\" class=\"headerlink\" title=\"Web Components\"></a>Web Components</h3><p>The reasons for not using an open standard like web components have been <a href=\"https://github.com/facebook/react/issues/5052#issuecomment-145594782\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">explained</a> by the React team:</p>\n<blockquote>\n<p>It has turned out that the spec is incomplete with regard to things like event delegation and there are still major changes being pushed from various sides, such as Mozilla. What was in Polymer/Chrome is not the final incarnation so we&#39;ve had to revert some of the support that we already added (e.g. support for event handling in shadow trees).</p>\n</blockquote>\n<blockquote>\n<p>In terms of strategy, we&#39;ll go forward with as if it didn&#39;t exist and try to improve interop at the React or React-like component layer instead. I&#39;ve talked with members of other popular UI frameworks and they seem to feel the same. In fact, we probably have a better chance at implementing solid interop in user land.</p>\n</blockquote>\n<p>In fact there already exist some <a href=\"http://addyosmani.com/blog/component-interop-with-react-and-custom-elements/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">resources</a> for working with React and Web-components in same application.</p>\n<p>There is nothing preventing us from migrating to the next web standard. As others have pointed out in the thread, removing JSX is just a matter of running the transformer against the existing codebase and checking in the generated javascript. The output is still human readable.</p>\n<h3 id=\"XML-in-javascript\"><a href=\"#XML-in-javascript\" class=\"headerlink\" title=\"XML in javascript\"></a>XML in javascript</h3><p>Attempts towards seamless incorporation of XML in ecmascript is not a new idea. Actionscript has had that since ages. While E4X is an <a href=\"https://en.wikipedia.org/wiki/ECMAScript_for_XML\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">open standard</a>, pragmatic reasons have been <a href=\"http://blog.vjeux.com/2013/javascript/jsx-e4x-the-good-parts.html\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">put forward</a> by React team for not embracing it entirely:</p>\n<blockquote>\n<p>The major use case of XML within Javascript is to write HTML tags. Unfortunately, what E4X generates is not a DOM node. In order to use it to generate DOM nodes, you&#39;ve got to do a conversion phase not provided by default.</p>\n</blockquote>\n<blockquote>\n<p>The second use case of XML is to represent data. In Javascript world, this use case is already being fulfilled by JSON. E4X only supports strings as a data type where Javascript objects can contain numbers, booleans, functions ...</p>\n</blockquote>\n<blockquote>\n<p>All the code is not going to be converted to E4X right away. There&#39;s going to be a transition phase where E4X and non E4X code will have to co-exist. The fact that the objects E4X generates are not accessible from non E4X code means that none of the libraries ever written can work with E4X structures.</p>\n</blockquote>\n<h2 id=\"On-meritocracy-vs-mediocracy\"><a href=\"#On-meritocracy-vs-mediocracy\" class=\"headerlink\" title=\"On meritocracy vs mediocracy\"></a>On meritocracy vs mediocracy</h2><blockquote>\n<p>And how many app teams have 100 or more active developers? Probably fewer than a dozen, and I submit that none of them probably should. Certainly not the Facebook app: It has a lot of features, but not that many features, and yet it has a 150Mb footprint.</p>\n</blockquote>\n<blockquote>\n<p>When I hear things like that, I can&#39;t help but fill in &quot;junior&quot; or &quot;mediocre&quot; in front of &quot;developers.&quot; React helps to prevent people from breaking each others&#39; code when you have bloated development teams filled with junior developers. React has some cool ideas, but all told I think it&#39;s a step backward for software engineering, and certainly isn&#39;t as much of a help for small teams, especially if you want to have a CSS/SCSS/LESS expert styling your product without having to dig through JSX files, for instance.</p>\n</blockquote>\n<p>In a small app with a small team, there is little use for any framework at all, but software applications have this uncanny tendency to unexpectedly grow large depending on changing requirements, expanding scope. Given the above, I would certainly feel more comfortable working on a system where I can change the appearance of a component with confidence that will not introduce subtle changes in totally unrelated parts of my application, probably parts that I know nothing about.</p>\n<p>While yes, there are fewer teams that have 100 or more active developers, but high churn rates are an unavoidable problem especially in the startup ecosystems. While a competent developer will certainly be able to jump into an unknown codebase and in due time figure out his/her way - but if the codebase is structured around best practices distilled by the community the time required in the same is drastically reduced. Optimizing the process around that seems like a very good idea.</p>\n<h2 id=\"On-stylesheets-a-system-of-cascading-problems\"><a href=\"#On-stylesheets-a-system-of-cascading-problems\" class=\"headerlink\" title=\"On stylesheets - a system of cascading problems\"></a>On stylesheets - a system of cascading problems</h2><p>Adding to the problem is that automated regression testing of CSS is time consuming and error prone. While there are <a href=\"https://css-tricks.com/automating-css-regression-testing/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">solutions</a> I think the crux of the problem is that our current styling system is a broken technology - globally shared stylesheets are evil and technologies like <a href=\"https://github.com/FormidableLabs/radium\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Radium</a> are steps in the right direction.</p>\n<p>While it isn&#39;t like we have not tried to solve this problem <a href=\"https://gridstylesheets.org/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">before</a>, I am really glad to see practical alternatives to stylesheets gathering traction.</p>\n<h2 id=\"The-good-parts\"><a href=\"#The-good-parts\" class=\"headerlink\" title=\"The good parts\"></a>The good parts</h2><blockquote>\n<p>I do like React&#39;s idea of the Virtual DOM for optimization, but you can get that without using React. [2] React Native is great for using native components and driving them from JavaScript, but it&#39;s also not the only game in town. [3]</p>\n</blockquote>\n<p>I agree, much has been written about these benefits, and the availability of alternatives is not exactly a secret either. I don&#39;t have much to add.</p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><blockquote>\n<p>Back to the original point, though: You can stay on top of the Hot New Technologies, but when there are good technical reasons to use alternate technologies, stay on top of those as well. And then explain clearly to your clients (or employers) why the current fad is a fad, and how to get the key benefits of that stack without its drawbacks. Oh, and choose clients (or employers) who will listen to strong technical arguments. :)</p>\n</blockquote>\n<p>While I disagree with the primary premise, this is a very strong and sound advise. I whole-heartedly agree that solutions should be rationally vetted and benchmarked before being put to use. I hope that arguments I have presented above are perceived as rationally just. Any comments or suggestions are more than welcome.</p>\n",
            "tags": [
                "Javascript",
                "React"
            ]
        },
        {
            "id": "https://lorefnon.me/2015/11/15/a-minimal-setup-for-using-es6-modules-in-rails.html",
            "url": "https://lorefnon.me/2015/11/15/a-minimal-setup-for-using-es6-modules-in-rails.html",
            "title": "A minimal setup for using ES6 modules in Rails",
            "date_published": "2015-11-14T18:30:00.000Z",
            "content_html": "<p>While ES6 adoption is progressively improving across browsers, and the sprockets team is planning to integrate ES6 features into Rails asset pipeline in near future, using a widely popular transpiler: <a href=\"https://babeljs.io/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Babel</a> we can leverage many of those features right away. The specific aspect of interest for this post is ES6 modules feature which provides a standardized module system for javascript.</p>\n<p>While babel does have a solution for ES6 modules, rather than handling dependency resolution itself - it transpiles the modules to existing javascript based module systems - the most popular ones being <a href=\"https://github.com/amdjs\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">AMD</a> and <a href=\"https://commonjs.org/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">CommonJS</a>. This post does not go into a compartive analysis of them, but there is an excellent <a href=\"addyosmani.com/writing-modular-js/\">article</a> by <a href=\"https://twitter.com/addyosmani\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Addy Osmani</a> which provides an in-depth elaboration on the topic.</p>\n<p>The solution <a href=\"https://babeljs.io/docs/setup/#rails\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">recommended</a> by the Babel team for using babel with rails, is through an experimental <a href=\"https://github.com/TannerRogalsky/sprockets-es6\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">sprockets-es6</a> gem, which is intended to be a PoC for future work to be integrated into Sprockets. Quoting from the README:</p>\n<blockquote>\n<p>This plugin is primarily experimental and will never reach a stable 1.0. The purpose is to test out BabelJS features on Sprockets 3.x and include it by default in Sprockets 4.x.</p>\n</blockquote>\n<p>Apart from the experimental status, the key issue with using this gem is that it is non-trivial to get ES6 modules to work with it. The primary reason being that, as mentioned above, even though babel transpiles ES6 modules to CommonJS (or AMD), we still need to provide an implementation of the relevant module system that will enable the browsers to recognize the modules. This means we will have to include another dependency like <a href=\"https://github.com/maccman/sprockets-commonjs\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">sprockets-commonjs</a>. However there is a caveat:</p>\n<blockquote>\n<p>One caveat to the approach this library takes, is that dependencies loaded through require() will not be added to the dependency graph. This library will not parse the AST tree for require calls. This decision has been made for a variety of reasons, but it does mean you need to require files through both CommonJS and Sprockets.</p>\n</blockquote>\n<p>Using AMD modules with <a href=\"https://github.com/jwhitley/requirejs-rails\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">requirejs-rails</a> is something that works, however javascript community has largely adopted <a href=\"https://npmjs.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">npm</a> for package management framework. For example - jQuery plugin repository now states:</p>\n<blockquote>\n<p>The jQuery Plugin Registry is in read-only mode.\nNew plugin releases will not be processed.\nWe recommend moving to npm, using &quot;jquery-plugin&quot; as the keyword in your package.json. The npm blog has instructions for publishing your plugin to npm.</p>\n</blockquote>\n<p>There is however a simpler solution: Using the gem <a href=\"https://github.com/browserify-rails/browserify-rails\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">browserify-rails</a> which bridges sprockets and <a href=\"http://browserify.org/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">browserify</a>. Browserify is a javascript bundler that leverages CommonJS :</p>\n<blockquote>\n<p>Browserify lets you require(&#39;modules&#39;) in the browser by bundling up all of your dependencies</p>\n</blockquote>\n<p>The great thing about browserify is that we can hook in transforms which can take care of additional pre-processing before the <code>require</code>d files are bundled up. Of particular interest to us, is the browserify transform for babel - <a href=\"https://github.com/babel/babelify\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">babelify</a> which allows us to  sidestep the caveat above. We need to have a node installation on the system though, just having a javascript runtime is not sufficient - but this is not much of an issue because node.js is now widely supported on all widely used platforms.</p>\n<p>To get this to work we need to add <code>browserify-rails</code> to Gemfile:</p>\n<pre><code class=\"hljs ruby\">gem <span class=\"hljs-string\">&quot;browserify-rails&quot;</span></code></pre>\n<p>as well as a <code>package.json</code> in project root:</p>\n<pre><code class=\"hljs javascript\">&#123;\n    <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;something&quot;</span>,\n    <span class=\"hljs-string\">&quot;license&quot;</span>: <span class=\"hljs-string\">&quot;MIT&quot;</span>,\n    <span class=\"hljs-string\">&quot;engines&quot;</span>: &#123;\n        <span class=\"hljs-string\">&quot;node&quot;</span>: <span class=\"hljs-string\">&quot;&gt;= 0.10&quot;</span>\n    &#125;,\n    <span class=\"hljs-string\">&quot;dependencies&quot;</span>: &#123;\n        <span class=\"hljs-string\">&quot;babel-preset-es2015&quot;</span>: <span class=\"hljs-string\">&quot;^6.1.18&quot;</span>,\n        <span class=\"hljs-string\">&quot;babelify&quot;</span>: <span class=\"hljs-string\">&quot;^7.2.0&quot;</span>,\n        <span class=\"hljs-string\">&quot;browserify&quot;</span>: <span class=\"hljs-string\">&quot;~&gt; 10.2.4&quot;</span>,\n        <span class=\"hljs-string\">&quot;browserify-incremental&quot;</span>: <span class=\"hljs-string\">&quot;^3.0.1&quot;</span>\n    &#125;\n&#125;</code></pre>\n<p>If we want to use other javascript libraries available through npm we can include them directly in the package.json. There is a single caveat though: We can not directly start using ES6 modules in our top level files (typically application.js) but only in our <code>require</code>d files:</p>\n<p>So our application.js can be fairly minimal with a single require statement:</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;./main&#x27;</span>)</code></pre>\n<p>Now we can use ES6 modules in main.js</p>\n<p>main.js:</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-keyword\">import</span> hello <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./hello&#x27;</span>\n\nhello()</code></pre>\n<p>hello.js:</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">hello</span>(<span class=\"hljs-params\"></span>) </span>&#123;\n    alert(<span class=\"hljs-string\">&#x27;hello world&#x27;</span>);\n&#125;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> hello;</code></pre>\n<p>If we run the server now and visit the home page, we should be greeted with a hello prompt.</p>\n",
            "tags": [
                "Javascript",
                "Rails",
                "ES6"
            ]
        },
        {
            "id": "https://lorefnon.me/2015/09/21/react-and-livescript-in-harmony.html",
            "url": "https://lorefnon.me/2015/09/21/react-and-livescript-in-harmony.html",
            "title": "React and Livescript in harmony",
            "date_published": "2015-09-20T18:30:00.000Z",
            "content_html": "<h1 id=\"Overview\"><a href=\"#Overview\" class=\"headerlink\" title=\"Overview\"></a>Overview</h1><p><a href=\"http://livescript.net/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Livescript</a> is a programming language that compiles to readable javascript (similar to coffeescript) and provides language level facilities to <a href=\"http://livescript.net/#inspiration\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">encourage</a> functional programming. <a href=\"https://facebook.github.io/react/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">React.js</a> is a user interface library from <a href=\"https://facebook.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">facebook</a> that uses <a href=\"http://calendar.perfplanet.com/2013/diff/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">intelligent heuristics</a> for efficient DOM updates, simplifying the process of building data driven applications. This post outlines how the two can play well together, and tries to demostrate how livescript allows us write much more compact and succinct code. Basic familiarity with both of them is assumed.</p>\n<p>To begin with let us see what a basic component looks like:</p>\n<pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&#x27;application-container&#x27;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span></code></pre>\n<br>\n\n<pre><code class=\"hljs livescript\">ContactList = React.create-<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">do</span></span>\n  render: -&gt;\n    React.create-element <span class=\"hljs-string\">\\ul,</span> <span class=\"hljs-literal\">null</span>, @props.contacts.<span class=\"hljs-keyword\">map</span> <span class=\"hljs-function\"><span class=\"hljs-params\">(contact)</span>-&gt;</span>\n      React.create-element <span class=\"hljs-string\">\\li,</span> <span class=\"hljs-literal\">null</span>, contact.name\n\nel = React.create-element ContactList, contacts: [\n  * name: <span class=\"hljs-string\">&#x27;Harry Potter&#x27;</span>\n  * name: <span class=\"hljs-string\">&#x27;Albus Dumbledore&#x27;</span>\n]\n\nReact.render el, <span class=\"hljs-built_in\">document</span>.get-element-<span class=\"hljs-keyword\">by</span>-id <span class=\"hljs-string\">\\application-container</span></code></pre>\n<img src=\"/images/Screen Shot 2015-09-21 at 12.42.18 pm.png\">\n\n<p>This is very similar to what we would have written if we were using vanilla javascript. The only primary advantages are indentation based nesting, elimination of a lot of superfluous syntax - braces and parenthesis and implicit returns. However we can do much better than this.</p>\n<p>Because Livescript was forked from Coffeescript, it inherits Coffeescript&#39;s class syntax which we can use to extend <code>React.Component</code>. However the benefits of doing so are pretty-much marginal.</p>\n<pre><code class=\"hljs livescript\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ContactList</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span></span>\n\n  render: -&gt;\n    React.create-element <span class=\"hljs-string\">\\ul,</span> <span class=\"hljs-literal\">null</span>, @props.contacts.<span class=\"hljs-keyword\">map</span> <span class=\"hljs-function\"><span class=\"hljs-params\">(contact)</span>-&gt;</span>\n      React.create-element <span class=\"hljs-string\">\\li,</span> <span class=\"hljs-literal\">null</span>, contact.name</code></pre>\n<p>One thing that we may notice is that the above code does not use <a href=\"https://facebook.github.io/react/docs/jsx-in-depth.html\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">JSX</a>. While yes, it is <a href=\"https://github.com/facebook/react/issues/47#issuecomment-18877423\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">possible</a> to use JSX with livescript using backticks to escape xml constructs and then passing the generated js to babel, it is a hack we better forgo. As we will see soon, livescript native constructs allow for much more succinct expressions than the xml boilerplate that comes JSX.</p>\n<p>Livescript&#39;s feature that almost everything is a expression is particularly helpful when we have conditional logic in our dom generation code.</p>\n<pre><code class=\"hljs livescript\">element = React~create-element\n\nContactList = React.create-<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">do</span></span>\n\n  render: -&gt;\n    element <span class=\"hljs-string\">\\ul,</span> <span class=\"hljs-literal\">null</span>, @props.contacts.<span class=\"hljs-keyword\">map</span> <span class=\"hljs-function\"><span class=\"hljs-params\">(contact)</span>-&gt;</span>\n      element <span class=\"hljs-string\">\\li,</span> <span class=\"hljs-literal\">null</span>,\n        <span class=\"hljs-keyword\">if</span> contact.email\n          element <span class=\"hljs-string\">\\a,</span> href: <span class=\"hljs-string\">&quot;mailto:<span class=\"hljs-subst\">#&#123;contact.email&#125;</span>&quot;</span>, contact.name\n        <span class=\"hljs-keyword\">else</span>\n          contact.name\n\nel = element ContactList, contacts: [\n  * name: <span class=\"hljs-string\">&#x27;Harry Potter&#x27;</span>\n  * name: <span class=\"hljs-string\">&#x27;Albus Dumbledore&#x27;</span>\n    email: <span class=\"hljs-string\">&#x27;albus@hogwarts.magic&#x27;</span>\n]\n\nReact.render el, <span class=\"hljs-built_in\">document</span>.get-element-<span class=\"hljs-keyword\">by</span>-id <span class=\"hljs-string\">\\application-container</span></code></pre>\n<img src=\"/images/Screen Shot 2015-09-21 at 12.42.05 pm.png\">\n\n<p>When the render function becomes complex, it is often more readable to use livescript&#39;s pipe operator to chain the operations. This is particularly handy in conjugation with utility libraries geared towards functional programming - the example below uses <a href=\"http://ramdajs.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Ramda</a>. Other alternatives include <a href=\"http://underscorejs.org/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">underscore</a>, <a href=\"https://lodash.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">lodash</a>, <a href=\"http://www.preludels.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">prelude.ls</a> etc.</p>\n<pre><code class=\"hljs livescript\">element = React~create-element\n\nContactList = React.create-<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">do</span></span>\n\n  render-avatar: <span class=\"hljs-function\"><span class=\"hljs-params\">(contact)</span>-&gt;</span>\n    <span class=\"hljs-keyword\">if</span> contact.avatar\n    <span class=\"hljs-keyword\">then</span> element <span class=\"hljs-string\">\\img,</span> src: contact.avatar, height: <span class=\"hljs-number\">100</span>, width: <span class=\"hljs-number\">100</span>\n    <span class=\"hljs-keyword\">else</span> element <span class=\"hljs-string\">\\span,</span> <span class=\"hljs-literal\">null</span>, <span class=\"hljs-string\">&#x27;N/A&#x27;</span>\n\n  render-label: <span class=\"hljs-function\"><span class=\"hljs-params\">(contact)</span>-&gt;</span>\n    <span class=\"hljs-keyword\">if</span> contact.email\n    <span class=\"hljs-keyword\">then</span> element <span class=\"hljs-string\">\\a,</span> href: <span class=\"hljs-string\">&quot;mailto:<span class=\"hljs-subst\">#&#123;contact.email&#125;</span>&quot;</span>, contact.name\n    <span class=\"hljs-keyword\">else</span> element <span class=\"hljs-string\">\\span,</span> <span class=\"hljs-literal\">null</span>, contact.name\n\n  render-contact-row: <span class=\"hljs-function\"><span class=\"hljs-params\">(contact)</span>-&gt;</span>\n    element <span class=\"hljs-string\">\\tr,</span> key: contact.id, [\n      element <span class=\"hljs-string\">\\td,</span> <span class=\"hljs-literal\">null</span>, @render-avatar contact\n      element <span class=\"hljs-string\">\\td,</span> <span class=\"hljs-literal\">null</span>, @render-label contact\n    ]\n\n  render-head: -&gt;\n    element <span class=\"hljs-string\">\\thead,</span> <span class=\"hljs-literal\">null</span>, [\n      element <span class=\"hljs-string\">\\tr,</span> <span class=\"hljs-literal\">null</span>, [\n        element <span class=\"hljs-string\">\\th,</span> <span class=\"hljs-literal\">null</span>, <span class=\"hljs-string\">&#x27;Avatar&#x27;</span>\n        element <span class=\"hljs-string\">\\th,</span> <span class=\"hljs-literal\">null</span>, <span class=\"hljs-string\">&#x27;Name&#x27;</span>\n      ]\n    ]\n\n  render: -&gt;\n    @props.contacts\n    |&gt; R.<span class=\"hljs-keyword\">map</span> @~render-contact-row\n    |&gt; <span class=\"hljs-function\">~&gt;</span> element <span class=\"hljs-string\">\\tbody,</span> <span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">it</span>\n    |&gt; ~&gt; element \\table, class-name: \\contacts , [ @render-head!, it ]\n\nel = element ContactList, contacts: [\n  * id: <span class=\"hljs-number\">1</span>\n    name: <span class=\"hljs-string\">&#x27;Harry Potter&#x27;</span>\n    avatar: <span class=\"hljs-string\">&#x27;http://cdn.playbuzz.com/cdn/8de88741-d729-4319-aa46-e8a544a20439/f7cade9d-8daf-42b3-8839-3e0e1f3db283.jpeg&#x27;</span>\n  * id: <span class=\"hljs-number\">2</span>,\n    name: <span class=\"hljs-string\">&#x27;Albus Dumbledore&#x27;</span>\n    email: <span class=\"hljs-string\">&#x27;albus@hogwarts.magic&#x27;</span>\n]\n\n\nReact.render el, <span class=\"hljs-built_in\">document</span>.get-element-<span class=\"hljs-keyword\">by</span>-id <span class=\"hljs-string\">\\application-container</span></code></pre>\n<img src=\"/images/Screen Shot 2015-09-21 at 2.15.15 pm.png\">\n\n<p>It may be tempting to further shorten the functions taking advantage of livescript&#39;s default argument <code>it</code>:</p>\n<pre><code class=\"hljs livescript\">render-avatar: -&gt;\n  <span class=\"hljs-keyword\">if</span> <span class=\"hljs-literal\">it</span>.avatar\n  <span class=\"hljs-keyword\">then</span> element <span class=\"hljs-string\">\\img,</span> src: <span class=\"hljs-literal\">it</span>.avatar, height: <span class=\"hljs-number\">100</span>, width: <span class=\"hljs-number\">100</span>\n  <span class=\"hljs-keyword\">else</span> element <span class=\"hljs-string\">\\span,</span> <span class=\"hljs-literal\">null</span>, <span class=\"hljs-string\">&#x27;N/A&#x27;</span>\n\nrender-label: -&gt;\n  <span class=\"hljs-keyword\">if</span> <span class=\"hljs-literal\">it</span>.email\n  <span class=\"hljs-keyword\">then</span> element <span class=\"hljs-string\">\\a,</span> href: <span class=\"hljs-string\">&quot;mailto:<span class=\"hljs-subst\">#&#123;<span class=\"hljs-literal\">it</span>.email&#125;</span>&quot;</span>, <span class=\"hljs-literal\">it</span>.name\n  <span class=\"hljs-keyword\">else</span> element <span class=\"hljs-string\">\\span,</span> <span class=\"hljs-literal\">null</span>, <span class=\"hljs-literal\">it</span>.name\n\nrender-contact-row: -&gt;\n  element <span class=\"hljs-string\">\\tr,</span> key: <span class=\"hljs-literal\">it</span>.id, [\n    element <span class=\"hljs-string\">\\td,</span> <span class=\"hljs-literal\">null</span>, @render-avatar <span class=\"hljs-literal\">it</span>\n    element <span class=\"hljs-string\">\\td,</span> <span class=\"hljs-literal\">null</span>, @render-label <span class=\"hljs-literal\">it</span>\n  ]</code></pre>\n<p>But I strongly recommend against doing that, because having the arguments specified in the function signature upfront enhances readability.</p>\n<p>Also note that the top down construction flow composition can also be realized in javascript using Ramda&#39;s <code>pipe</code> but livescript just makes it simpler by providing a language level operator.</p>\n<p>For simpler components (which are just responsible for presenting something passed as props, and do not need lifecycle methods etc.) it may be useful to define a micro-component builder:</p>\n<pre><code class=\"hljs livescript\"><span class=\"hljs-function\"><span class=\"hljs-title\">micro-component</span> = <span class=\"hljs-params\">(render)</span>-&gt;</span> React.create-factory React.create-<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> &#123; <span class=\"hljs-title\">render</span> &#125;</span></code></pre>\n<p>Once we have that, it makes it a lot more easier for us to follow React&#39;s recommendation of having lightweight modular components which can be easily composed:</p>\n<pre><code class=\"hljs livescript\">ContactAvatar = micro-component -&gt;\n  &#123; contact &#125; = @props\n  <span class=\"hljs-keyword\">if</span> contact.avatar\n  <span class=\"hljs-keyword\">then</span> element <span class=\"hljs-string\">\\img,</span> src: contact.avatar, height: <span class=\"hljs-number\">100</span>, width: <span class=\"hljs-number\">100</span>\n  <span class=\"hljs-keyword\">else</span> element <span class=\"hljs-string\">\\span,</span> <span class=\"hljs-literal\">null</span>, <span class=\"hljs-string\">&#x27;N/A&#x27;</span>\n\nContactLabel = micro-component -&gt;\n  &#123; contact &#125; = @props\n  <span class=\"hljs-keyword\">if</span> contact.email\n  <span class=\"hljs-keyword\">then</span> element <span class=\"hljs-string\">\\a,</span> href: <span class=\"hljs-string\">&quot;mailto:<span class=\"hljs-subst\">#&#123;contact.email&#125;</span>&quot;</span>, contact.name\n  <span class=\"hljs-keyword\">else</span> element <span class=\"hljs-string\">\\span,</span> <span class=\"hljs-literal\">null</span>, contact.name\n\nContactListRow = micro-component -&gt;\n  element <span class=\"hljs-string\">\\tr,</span> key: @props.contact.id, [\n    element <span class=\"hljs-string\">\\td,</span> <span class=\"hljs-literal\">null</span>, ContactAvatar @props\n    element <span class=\"hljs-string\">\\td,</span> <span class=\"hljs-literal\">null</span>, ContactLabel @props\n  ]\n\nContactList = micro-component -&gt;\n  element \\table, class-name: \\contacts, [\n    element <span class=\"hljs-string\">\\thead,</span> <span class=\"hljs-literal\">null</span>, [\n      element <span class=\"hljs-string\">\\tr,</span> <span class=\"hljs-literal\">null</span>, [\n        element <span class=\"hljs-string\">\\th,</span> <span class=\"hljs-literal\">null</span>, <span class=\"hljs-string\">&#x27;Avatar&#x27;</span>\n        element <span class=\"hljs-string\">\\th,</span> <span class=\"hljs-literal\">null</span>, <span class=\"hljs-string\">&#x27;Name&#x27;</span>\n      ]\n    ]\n    element <span class=\"hljs-string\">\\tbody,</span> <span class=\"hljs-literal\">null</span>, @props.contacts.<span class=\"hljs-keyword\">map</span> -&gt; ContactListRow <span class=\"hljs-keyword\">do</span>\n      contact: <span class=\"hljs-literal\">it</span>\n      key: <span class=\"hljs-literal\">it</span>.id\n  ]\n\nel = ContactList contacts: [\n  * id: <span class=\"hljs-number\">1</span>\n    name: <span class=\"hljs-string\">&#x27;Harry Potter&#x27;</span>\n    avatar: <span class=\"hljs-string\">&#x27;http://cdn.playbuzz.com/cdn/8de88741-d729-4319-aa46-e8a544a20439/f7cade9d-8daf-42b3-8839-3e0e1f3db283.jpeg&#x27;</span>\n  * id: <span class=\"hljs-number\">2</span>,\n    name: <span class=\"hljs-string\">&#x27;Albus Dumbledore&#x27;</span>\n    email: <span class=\"hljs-string\">&#x27;albus@hogwarts.magic&#x27;</span>\n]\nReact.render el, <span class=\"hljs-built_in\">document</span>.get-element-<span class=\"hljs-keyword\">by</span>-id <span class=\"hljs-string\">\\application-container</span>\n</code></pre>\n<p>Libraries like <a href=\"https://github.com/mlmorg/react-hyperscript\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\"><code>react-hyperscript</code></a> may be used to further reduce the dom construction boilerplate :</p>\n<pre><code class=\"hljs livescript\">\n<span class=\"hljs-built_in\">require</span>! &#123; react-hyperscript: h, react: React &#125;\n\nContactAvatar = micro-component -&gt;\n  &#123; contact &#125; = @props\n  <span class=\"hljs-keyword\">if</span> contact.avatar\n  <span class=\"hljs-keyword\">then</span> h <span class=\"hljs-string\">\\img,</span> src: contact.avatar, height: <span class=\"hljs-number\">100</span>, width: <span class=\"hljs-number\">100</span>\n  <span class=\"hljs-keyword\">else</span> h <span class=\"hljs-string\">\\span,</span> <span class=\"hljs-string\">&#x27;N/A&#x27;</span>\n\nContactLabel = micro-component -&gt;\n  &#123; contact &#125; = @props\n  <span class=\"hljs-keyword\">if</span> contact.email\n  <span class=\"hljs-keyword\">then</span> h <span class=\"hljs-string\">\\a,</span> href: <span class=\"hljs-string\">&quot;mailto:<span class=\"hljs-subst\">#&#123;contact.email&#125;</span>&quot;</span>, contact.name\n  <span class=\"hljs-keyword\">else</span> h <span class=\"hljs-string\">\\span,</span> contact.name\n\nContactListRow = micro-component -&gt;\n  h <span class=\"hljs-string\">\\tr,</span> key: @props.contact.id, [\n    h <span class=\"hljs-string\">\\td,</span> ContactAvatar @props\n    h <span class=\"hljs-string\">\\td,</span> ContactLabel @props\n  ]\n\nContactList = micro-component -&gt;\n  h <span class=\"hljs-string\">\\table.contacts,</span> [\n    h <span class=\"hljs-string\">\\thead,</span> [\n      h <span class=\"hljs-string\">\\tr,</span> [\n        h <span class=\"hljs-string\">\\th,</span> <span class=\"hljs-string\">&#x27;Avatar&#x27;</span>\n        h <span class=\"hljs-string\">\\th,</span> <span class=\"hljs-string\">&#x27;Name&#x27;</span>\n      ]\n    ]\n    h <span class=\"hljs-string\">\\tbody,</span> @props.contacts.<span class=\"hljs-keyword\">map</span> -&gt; ContactListRow <span class=\"hljs-keyword\">do</span>\n      contact: <span class=\"hljs-literal\">it</span>\n      key: <span class=\"hljs-literal\">it</span>.id\n  ]\n\nel = ContactList contacts: [\n  * id: <span class=\"hljs-number\">1</span>\n    name: <span class=\"hljs-string\">&#x27;Harry Potter&#x27;</span>\n    avatar: <span class=\"hljs-string\">&#x27;http://cdn.playbuzz.com/cdn/8de88741-d729-4319-aa46-e8a544a20439/f7cade9d-8daf-42b3-8839-3e0e1f3db283.jpeg&#x27;</span>\n  * id: <span class=\"hljs-number\">2</span>,\n    name: <span class=\"hljs-string\">&#x27;Albus Dumbledore&#x27;</span>\n    email: <span class=\"hljs-string\">&#x27;albus@hogwarts.magic&#x27;</span>\n]\nReact.render el, <span class=\"hljs-built_in\">document</span>.get-element-<span class=\"hljs-keyword\">by</span>-id <span class=\"hljs-string\">\\application-container</span>\n</code></pre>\n<p>Apart from getting rid of null for attribute hashes, hyperscript is particularly useful for shorter syntax for class names and ids. Also it insulates our codebase against changes in the DOM builder API, which have happened in past.</p>\n",
            "tags": [
                "Javascript",
                "React",
                "Functional Programming"
            ]
        },
        {
            "id": "https://lorefnon.me/2015/08/24/smarter-knockout-applications-with-es-next.html",
            "url": "https://lorefnon.me/2015/08/24/smarter-knockout-applications-with-es-next.html",
            "title": "Smarter knockout applications with ES6/7",
            "date_published": "2015-08-23T18:30:00.000Z",
            "content_html": "<h1 id=\"Overview\"><a href=\"#Overview\" class=\"headerlink\" title=\"Overview\"></a>Overview</h1><p>This post is an outline of ES6/7 features that we can leverage today in our <a href=\"http://knockoutjs.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Knockout</a> based applications to make them more maintainable.</p>\n<p>Thanks to powerful and reliable transpilers like <a href=\"http://babeljs.io/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Babel</a> we don&#39;t have to wait for mass adoption across browser vendors, to try out features from next generation javascript. While this post is essentially an overview written in a specific context, ie. Knockout applications, I encourage readers to refer to excellent online resources like <a href=\"https://leanpub.com/javascriptallongesix\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Javascript Allonge</a> for a broader coverage.</p>\n<h2 id=\"View-Models-as-ES-6-classes\"><a href=\"#View-Models-as-ES-6-classes\" class=\"headerlink\" title=\"View Models as ES 6 classes:\"></a>View Models as ES 6 classes:</h2><p>View models are typically defined as javascript constructor functions. ES6 classes offer a bit of syntax sugar over prototypal inheritance and the outcome might appeal to people coming other object oriented languages.</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">SomeViewModel</span> </span>&#123;\n  <span class=\"hljs-function\"><span class=\"hljs-title\">constructor</span>(<span class=\"hljs-params\"></span>)</span> &#123;\n    <span class=\"hljs-built_in\">this</span>.firstName = ko.observable();\n  &#125;\n&#125;\n\nko.components.register(&#123;\n  viewModel: SomeViewModel,\n  template: <span class=\"hljs-string\">&#x27;&lt;div data-bind=&quot;text: firstName&quot;&gt;&lt;/div&gt;&#x27;</span>\n&#125;)</code></pre>\n<h2 id=\"Arrow-functions-in-computed-properties\"><a href=\"#Arrow-functions-in-computed-properties\" class=\"headerlink\" title=\"Arrow functions in computed properties:\"></a>Arrow functions in computed properties:</h2><p>In computed properties it is more often than not desirable that the context of function be the same as that of the outer function. Patterns like <code>var self = this</code> have been adopted widely for situations like this.</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">SomeViewModel</span>(<span class=\"hljs-params\"></span>) </span>&#123;\n  <span class=\"hljs-built_in\">this</span>.firstName = ko.observable();\n  <span class=\"hljs-built_in\">this</span>.lastName = ko.observable();\n  <span class=\"hljs-keyword\">var</span> self = <span class=\"hljs-built_in\">this</span>;\n  <span class=\"hljs-built_in\">this</span>.fullName = ko.computed(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>&#123;\n    <span class=\"hljs-keyword\">return</span> self.firstName() + <span class=\"hljs-string\">&#x27; &#x27;</span> + self.lastName();\n  &#125;);\n&#125;</code></pre>\n<p>Arrow functions simplify this use case by providing special syntax for functions which, as MDN <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">explains</a> it, capture the this value of the enclosing context</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">SomeViewModel</span> </span>&#123;\n  <span class=\"hljs-function\"><span class=\"hljs-title\">constructor</span>(<span class=\"hljs-params\"></span>)</span> &#123;\n    <span class=\"hljs-built_in\">this</span>.firstName = ko.observable();\n    <span class=\"hljs-built_in\">this</span>.lastName = ko.observable();\n    <span class=\"hljs-built_in\">this</span>.fullName = ko.computed(<span class=\"hljs-function\">() =&gt;</span> &#123;\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">this</span>.firstName() + <span class=\"hljs-string\">&#x27; &#x27;</span> + <span class=\"hljs-built_in\">this</span>.lastName();\n    &#125;);\n  &#125;\n&#125;</code></pre>\n<p>Or for smaller functions we can reduce the verbosity even further:</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">SomeViewModel</span> </span>&#123;\n  <span class=\"hljs-function\"><span class=\"hljs-title\">constructor</span>(<span class=\"hljs-params\"></span>)</span> &#123;\n    <span class=\"hljs-built_in\">this</span>.firstName = ko.observable();\n    <span class=\"hljs-built_in\">this</span>.lastName = ko.observable();\n    <span class=\"hljs-built_in\">this</span>.fullName = ko.computed(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-built_in\">this</span>.firstName() + <span class=\"hljs-string\">&#x27; &#x27;</span> + <span class=\"hljs-built_in\">this</span>.lastName());\n  &#125;\n&#125;</code></pre>\n<h2 id=\"Imports-for-code-organization\"><a href=\"#Imports-for-code-organization\" class=\"headerlink\" title=\"Imports for code organization:\"></a>Imports for code organization:</h2><p>JS imports are the new standard approach to deal with modularization in JS code, and I can only anticipate <a href=\"https://angular.io/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">more</a> and <a href=\"http://aurelia.io/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">more</a> libraries moving to them from older patterns like <a href=\"https://github.com/amdjs/amdjs-api/wiki/AMD\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">AMD</a> or <a href=\"http://wiki.commonjs.org/wiki/CommonJS\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">CommonJS</a>. Babel can transpile imports to require invocations that follow AMD/CommonJS syntax so you can move to newer syntax progressively and continue using your existing loaders/bundlers. My personal recommendation for bundler is <a href=\"http://webpack.github.io/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">webpack</a> which offers interesting features like <a href=\"http://webpack.github.io/docs/code-splitting.html\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Code splitting</a> out of the box.</p>\n<h2 id=\"Template-strings\"><a href=\"#Template-strings\" class=\"headerlink\" title=\"Template strings\"></a>Template strings</h2><p>Template strings make it easy to define small multi-line templates along side view models.</p>\n<pre><code class=\"hljs plain\">ko.components.register(&#123;\n  viewModel: SomeViewModel,\n  template:\n    &#96;&lt;div&gt;\n      &lt;h1&gt; Hello friend, nice to meet you &lt;&#x2F;h1&gt;\n      &lt;div&gt;\n        Dear &lt;span data-bind&#x3D;&quot;text: firstName()&quot;&gt;&lt;&#x2F;span&gt; It is nice to meet you.\n      &lt;&#x2F;div&gt;\n    &lt;&#x2F;div&gt;&#96;\n&#125;);</code></pre>\n<p>Although for larger templates I recommend using something like <a href=\"https://github.com/webpack/raw-loader\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">webpack-raw-loader</a> so you can write:</p>\n<pre><code class=\"hljs javascript\">ko.components.register(&#123;\n  viewModel: SomeViewModel,\n  template: <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;./some_view_model.html&#x27;</span>)\n&#125;);</code></pre>\n<p>However larger templates more often than not indicate need for fine-grained modularization, so the above recommendation should be taken with a pinch of salt.</p>\n<h2 id=\"ES7-Decorators-for-Component-registration\"><a href=\"#ES7-Decorators-for-Component-registration\" class=\"headerlink\" title=\"ES7 Decorators for Component registration:\"></a>ES7 Decorators for Component registration:</h2><p>If you have been keeping up with advancements with Angular 2.0, you may have noticed the use of annotations for component registration. Here is an example from their <a href=\"https://angular.io/docs/js/latest/quickstart.html\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">quick start tutorial</a> showing how annotations go hand in hand with the new class syntax:</p>\n<pre><code class=\"hljs plain\">&#x2F;&#x2F; Annotation section\n@Component(&#123;\n  selector: &#39;my-app&#39;\n&#125;)\n@View(&#123;\n  template: &#39;&lt;h1&gt;Hello &#123;&#123; name &#125;&#125;&lt;&#x2F;h1&gt;&#39;\n&#125;)\n&#x2F;&#x2F; Component controller\nclass MyAppComponent &#123;\n  name: string;\n  constructor() &#123;\n    this.name &#x3D; &#39;Alice&#39;;\n  &#125;\n&#125;</code></pre>\n<p>While I refer to <a href=\"https://github.com/wycats/javascript-decorators\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">this excellent writeup</a> by <a href=\"https://twitter.com/wycats\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Yehuda Katz</a> on javascript decorators for an indepth overview, the following snippet is a quick overview as to how we can leverage javascript decorators to handle component registration in knockout:</p>\n<pre><code class=\"hljs plain\">function Component(params) &#123;\n  return function(viewModel) &#123;\n    ko.components.register(params.name, &#123;\n      viewModel: viewModel,\n      template: params.template\n    &#125;)\n  &#125;\n&#125;</code></pre>\n<p>Once our <code>Component</code> decorator has been defined we can simply use it like this:</p>\n<pre><code class=\"hljs plain\">@Component(&#123;\n  name: &#39;my-app-component&#39;,\n  template:\n    &#96;&lt;div&gt;\n      ...\n    &lt;&#x2F;div&gt;&#96;\n&#125;)\nclass MyAppViewModel &#123;\n  constructor() &#123;\n    ...\n  &#125;\n&#125;</code></pre>\n<p>You may be tempted to use the <code>target.name</code> to enforce some module naming conventions, but before you tread that way please be aware of lack of IE support for <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Function#name</a>.</p>\n<p>This concludes this overview for now, though there is a lot to be explored in next generation javascript beyond this basic introduction. As always, I welcome any suggestions or requests for improvement in the comments section below.</p>\n",
            "tags": [
                "Javascript",
                "KnockoutJS"
            ]
        },
        {
            "id": "https://lorefnon.me/2014/03/10/decoupling-frontend-with-gulp-and-node-http-proxy.html",
            "url": "https://lorefnon.me/2014/03/10/decoupling-frontend-with-gulp-and-node-http-proxy.html",
            "title": "Decoupling your frontend development with gulp and http-proxy",
            "date_published": "2014-03-09T18:30:00.000Z",
            "content_html": "<p>In past developers have often relied on backend-specific toolchains for\nweb application frontends. Some examples would be <a href=\"http://edgeguides.rubyonrails.org/asset_pipeline.html\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Rails asset pipeline</a> or\nthe legacy ant based toolchain for YUI. However recently node.js based tooling support\nfor frontend technologies has significantly evolved and it is quite viable\nto use a node.js based toolchain for managing your frontend projects, even if\nthe backend is not node.js, thus keeping the workflow decoupled from the backend.</p>\n<p>This has multiple advantages, primary among them being that javascript\ndevelopers can configure their tools using a language they already are\nfamiliar with without relying on server-side developers.</p>\n<p>The workflow I outline in this post utilizes <a href=\"http://gulpjs.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">gulp</a> and node module <a href=\"https://www.npmjs.org/package/http-proxy\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">http-proxy</a>.</p>\n<p>Gulp is a build system. I prefer it over alternative task runners like grunt\nand mimosa because, as the gulp&#39;s website states quite succinctly :</p>\n<blockquote>\n<p>gulp&#39;s use of streams and code-over-configuration makes for a simpler and more intuitive build.</p>\n</blockquote>\n<p>A claim that I have found to be true in practice.</p>\n<p>The http-proxy library helps us connect with our backend seemlessly and at the same\ntime keep the codebase in a separate project. By configuring a proxy server\nwe can load frontend assets from our local system while route the rest of the\nrequests to a potentially remote backend. This is particularly helpful when\nwe have multiple loosely coupled mini-applications backed by a single monolithic\nserver-side codebase.</p>\n<p>An alternative to this would be to configure the backend to support <a href=\"http://www.html5rocks.com/en/tutorials/cors/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">cross origin\nrequests</a>, but this is really unnecessary if eventually the application will be\nserved from the same domain.</p>\n<p>Let us say we have a javascript heavy dashboard which we would like to develop\nin a separate project. Here is the directory structure I&#39;ll use. Please note that following this\ndirectory structure is not mandatory and is mainly illustrative.</p>\n<pre><code class=\"hljs bash\">project\n  |_ gulpfile.js    <span class=\"hljs-comment\"># task runner configuration</span>\n  |_ dashboard      <span class=\"hljs-comment\"># generated files go here</span>\n  |  |_ css\n  |  |_ js\n  |_ node_modules   <span class=\"hljs-comment\"># node.js dependencies are installed here</span>\n  |_ package.json   <span class=\"hljs-comment\"># configuration for node.js packages</span>\n  |_ server.js      <span class=\"hljs-comment\"># proxy server</span>\n  |_ src            <span class=\"hljs-comment\"># source files</span>\n     |_ css\n     |_ js</code></pre>\n\n<p>When deploying the application we can simply drop the dashboard folder to the\nweb-root of our application eg. the public folder of a Rails application.</p>\n<p>Next we illustrate usage of http-proxy module to create a simple proxy server.</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-comment\">// server.js</span>\n\n<span class=\"hljs-keyword\">var</span> httpProxy = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;http-proxy&#x27;</span>),\n    connect = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;connect&#x27;</span>),\n    livereload = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;connect-livereload&#x27;</span>)\n\n<span class=\"hljs-keyword\">var</span> proxy = httpProxy.createProxyServer()\n\n<span class=\"hljs-keyword\">var</span> app = connect()\n    .use(<span class=\"hljs-string\">&#x27;/dashboard&#x27;</span>, connect.static(__dirname+<span class=\"hljs-string\">&#x27;/dashboard&#x27;</span>))\n    .use(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">req, res</span>)</span>&#123;\n        <span class=\"hljs-keyword\">if</span> (req.url.indexOf(<span class=\"hljs-string\">&#x27;dashboard&#x27;</span>) == -<span class=\"hljs-number\">1</span>) &#123;\n            proxy.web(req, res, &#123;\n                target: <span class=\"hljs-string\">&#x27;http://localhost:3000&#x27;</span>\n            &#125;)\n        &#125;\n    &#125;)\n    .listen(<span class=\"hljs-number\">4000</span>)</code></pre>\n\n<p>Before running the server, install the node.js dependencies:</p>\n<pre><code class=\"hljs bash\">npm install --save connect http-proxy connect-livereload</code></pre>\n\n<p>What the above script does is simply serve the urls that\nhave dashboard in the url from dashboard folder while\ndirecting the rest of the requests to another server, which\nin case is simply <code>http://localhost:3000</code></p>\n<p>For complex routing we can use some of the <a href=\"https://nodejsmodules.org/tags/router\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">routing libraries</a>\nfor node.js but for our example the simple script above works\npretty well.</p>\n<p>Our gulp tasks go in gulpfile.js. Configuring gulp tasks is fairly\nsimple. While the <a href=\"https://github.com/gulpjs/gulp/blob/master/docs/README.md\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">official documentation</a>\nis a thorough reference, we illustrate the workflow through some examples.\nFor example creating a task to clean our target js and css\nfolders is as simple as:</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-keyword\">var</span> gulp = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;gulp&#x27;</span>),\n    clean = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;gulp-clean&#x27;</span>)\n\ngulp.task(<span class=\"hljs-string\">&#x27;clean&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123;\n    gulp.src([<span class=\"hljs-string\">&#x27;./dashboard/js/*&#x27;</span>, <span class=\"hljs-string\">&#x27;./dashboard/css/*&#x27;</span>])\n        .pipe(clean())\n&#125;)</code></pre>\n\n<p>The stream based based approach really shines when we use pre-processors for\nour js or css files. For example to use stylus for css we can add:</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-keyword\">var</span> stylus = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;gulp-stylus&#x27;</span>)\n\ngulp.task(<span class=\"hljs-string\">&#x27;css&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123;\n    gulp.src(<span class=\"hljs-string\">&#x27;./src/css/*.styl&#x27;</span>)\n        .pipe(stylus())\n        .pipe(gulp.dest(<span class=\"hljs-string\">&#x27;./dashboard/css&#x27;</span>))\n&#125;)</code></pre>\n\n<p>To manage dependencies with browserify we can have:</p>\n<pre><code class=\"hljs javascript\">gulp.task(<span class=\"hljs-string\">&#x27;js&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123;\n    gulp.src(<span class=\"hljs-string\">&#x27;./src/js/index.js&#x27;</span>)\n        .pipe(browserify())\n        .pipe(gulp.dest(<span class=\"hljs-string\">&#x27;./dashboard/js&#x27;</span>))\n&#125;)\n</code></pre>\n\n<p>As I hope is clear, the stream based approach makes configuration fairly\nsimple, intuitive and consistent throughout.</p>\n<p>Of course associated packages above like <code>gulp-stylus</code>, <code>gulp-browserify</code>, <code>gulp-clean</code>\nhave to be installed through npm before we can use them.</p>\n<p>While we can run <code>gulp js</code>, <code>gulp css</code>, <code>gulp clean</code> etc. from the command line\nwe would probably want to have a default task that we run most of the time:</p>\n<pre><code class=\"hljs javascript\">gulp.task(<span class=\"hljs-string\">&#x27;default&#x27;</span>, [<span class=\"hljs-string\">&#x27;clean&#x27;</span>, <span class=\"hljs-string\">&#x27;js&#x27;</span>, <span class=\"hljs-string\">&#x27;css&#x27;</span>])</code></pre>\n\n<p>Now running <code>gulp</code> will cleanup the dashboard/js and dashboard/css folders and\nrun our js and css tasks.</p>\n<p>To streamline our workflow we configure a watcher which can monitor our files, and\nrun the associated tasks automatically. Writing a simple watcher is as simple as:</p>\n<pre><code class=\"hljs javascript\">gulp.task(<span class=\"hljs-string\">&#x27;watch&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123;\n    gulp.watch(<span class=\"hljs-string\">&#x27;./src/js/**/*&#x27;</span>, [<span class=\"hljs-string\">&#x27;default&#x27;</span>])\n&#125;)</code></pre>\n\n<p>And why stop here, let us automate browser refreshes too. We can use <a href=\"http://livereload.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">livereload</a> to\nautomatically reload our browser whenever the files change.</p>\n<p>We can add a watcher that notifies the livereload server with changes:</p>\n<pre><code class=\"hljs javascript\">gulp.task(<span class=\"hljs-string\">&#x27;watch&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123;\n    <span class=\"hljs-keyword\">var</span> server = livereload()\n    gulp.watch(<span class=\"hljs-string\">&#x27;./src/js/**/*&#x27;</span>, [<span class=\"hljs-string\">&#x27;default&#x27;</span>])\n    gulp.watch(<span class=\"hljs-string\">&#x27;./dashboard/**/*&#x27;</span>)\n        .on(<span class=\"hljs-string\">&#x27;change&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">file</span>)</span>&#123;\n            server.changed(file.path)\n        &#125;)\n&#125;)</code></pre>\n\n<p>Please note that we could not have hooked up the callback to the watcher we\nalready had because then it would not guarantee that the pre-processors have\nactually completed before our browser refreshes. Please never use timers for\nsituations like this.</p>\n<p>If you have been using livereload for a while then you probably have the browser\nextension for livereload. But in case you haven&#39;t you can use a middleware for\nexpress in the server.js file. This is especially convenient for testing on\nseveral browsers.</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-keyword\">var</span> app = connect()\n    .use(connect.logger(<span class=\"hljs-string\">&#x27;dev&#x27;</span>))\n    .use(livereload(&#123;\n        port: <span class=\"hljs-number\">35729</span>\n    &#125;))\n    .use(<span class=\"hljs-string\">&#x27;/dashboard&#x27;</span>, connect.static(__dirname+<span class=\"hljs-string\">&#x27;/dashboard&#x27;</span>))\n    .use(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">req, res</span>)</span>&#123;\n        <span class=\"hljs-keyword\">if</span> (req.url.indexOf(<span class=\"hljs-string\">&#x27;dashboard&#x27;</span>) == -<span class=\"hljs-number\">1</span>) &#123;\n            proxy.web(req, res, &#123;\n                target: <span class=\"hljs-string\">&#x27;http://localhost:3000&#x27;</span>\n            &#125;)\n        &#125;\n    &#125;)\n    .listen(<span class=\"hljs-number\">4000</span>)</code></pre>\n\n<p>35729 is the default port on which livereload server runs. Note that this\nrelieves us from having to add the livereload script in our page manually\nbecause the middleware takes care of it for us.</p>\n<p>If you use the above configuration, you will soon notice something strange.\nWhen we edit a css file our entire page refreshes. If you have used livereload\nbefore or have seen the demos you know that this should not happen. It should\njust transparently reload the css files.</p>\n<p>It happens because of the way our gulp tasks are configured. Whenever a file\nin src directory changes we run both our js and css tasks which cause both\njs and css files to be regerated and thus prompt livereload to refresh the page.</p>\n<p>To remedy this we have to modify the watch handler:</p>\n<pre><code class=\"hljs javascript\">gulp.task(<span class=\"hljs-string\">&#x27;watch&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123;\n    <span class=\"hljs-keyword\">var</span> server = livereload()\n    gulp.watch(<span class=\"hljs-string\">&#x27;./src/js/**/*.js&#x27;</span>, [<span class=\"hljs-string\">&#x27;js&#x27;</span>])\n    gulp.watch(<span class=\"hljs-string\">&#x27;./src/css/**/*.styl&#x27;</span>, [<span class=\"hljs-string\">&#x27;css&#x27;</span>])\n    gulp.watch(<span class=\"hljs-string\">&#x27;./dashboard/**/*&#x27;</span>)\n        .on(<span class=\"hljs-string\">&#x27;change&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">file</span>)</span>&#123;\n            server.changed(file.path)\n        &#125;)\n&#125;)</code></pre>\n\n<p>If you try now, you will notice that css changes no longer refresh the full\npage as expected.</p>\n<p>While the above was not an indepth introduction to any of the technologies involved,\nI hope that it gave a basic idea about how node.js based tools can be used\nfor a streamlined frontend development workflow. As always any comment or criticism is\nwelcome.</p>\n",
            "tags": [
                "Javascript",
                "Gulp"
            ]
        },
        {
            "id": "https://lorefnon.me/2012/12/12/sharing-jade-templates-between-nodejs-server-and-client.html",
            "url": "https://lorefnon.me/2012/12/12/sharing-jade-templates-between-nodejs-server-and-client.html",
            "title": "Sharing Jade templates between Node.js server and client",
            "date_published": "2012-12-11T18:30:00.000Z",
            "content_html": "<p>Although there are several templating options available for the client eg. <a href=\"http://handlebarsjs.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Handlebars</a>, <a href=\"http://mustache.github.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Mustache</a>, <a href=\"http://beebole.com/pure/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Pure</a> etc. nevertheless, <a href=\"http://jade-lang.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Jade</a> is attractive in its own right.  Its succinct syntax is cleaner even than <a href=\"http://haml.info/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Haml</a>, which is arguably the predecessor and inspiration-source of all the minimalist whitespace sensitive templating systems. Using Node.js on the server offers an interesting opportunity to reuse the same servers on the server as well as client. This has been made particulary easy by the <a href=\"https://github.com/search?q=jade&ref=commandbar\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">numerous community contributions</a> by Jade enthusiasts which I will attempt to highlight in this post.</p>\n<p>When using Jade on the client the most naive approach would be  fetching our typical .jade file via ajax and then parsing the file and then  manipulating the structure and  interpolating the various variables. However,  we can pre-process the jade file beforehand thereby eliminating the heavyweight parsing step in the client. The end result of the pre-processing is a function which takes in the variables needed to render the template and then outputs the resultant HTML string which can be injected into the DOM.</p>\n<p>Preprocessing also takes care of <a href=\"https://github.com/visionmedia/jade#template-inheritance\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">template-inheritance</a> and <a href=\"https://github.com/visionmedia/jade#includes\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">template-inclusion</a> seamlessly which are difficult to implement in pure clienside parsing without an added layer of complexity and overhead of multiple ajax calls.</p>\n<p>Client-side rendering is made possible by a Jade feature called jade-runtime. On supplying a -c flag to jade, it generates the compiled javascript template which can be used along with the <a href=\"https://github.com/visionmedia/jade/blob/master/runtime.js\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">runtime.js</a> .</p>\n<p><a href=\"https://github.com/jgallen23/clientjade\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Clientjade</a> takes the process to next level of simplicity.  It is simple npm module which provides you with a command line utility to compile several jade templates into a single compiled javascript file. Compilation is as simple as:</p>\n<pre><code>clientjade test1.jade test2.jade &gt; templates.js\n</code></pre>\n<p>Once templates.js has been included in the page,  individual templates can be accessed using their filenames.</p>\n<pre><code>jade.render($(&#39;#target&#39;), &#39;test1&#39;, &#123; name: &#39;Bob&#39; &#125;);\n</code></pre>\n<p>First argument is the DOM node where the template is to be rendered, second is a reference to the template and last is the data required to render the template.</p>\n<p>While this entire procedure is very simple, inclusion of multiple compiled templates in an HTML page leads to headaches.  Reason is that every individual compiled file assigns an empty hash to internal object containing references to templates. While in casual usage this is usually not a problem because you can always compile all the templates you need into a single javascript file, this can become troublesome if you are loading templates on-the-fly, as per requirements. The most common scenario is the case when an AMD loader eg. RequireJS is being used to manage dependencies.</p>\n<p>Fortunately there is a sister project <a href=\"https://github.com/mysociety/node-jade-amd\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">node-jade-amd</a> which focusses on exactly this usage scenario. As you might expect, after installing the <a href=\"https://github.com/mysociety/node-jade-amd\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">jade-amd</a> npm module you have a handy command line utility using which is as simple as :</p>\n<pre><code>jade-amd --from &lt;source-folder&gt; --to &lt;destination-folder&gt;\n</code></pre>\n<p>The compiled templates have a dependency on jadeRuntime amd module which can be obtained by :</p>\n<pre><code>jade-amd --runtime &gt; jadeRuntime.js\n</code></pre>\n<p>Then the compiled template can be used just like you would use any other amd module :</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-built_in\">require</span>([ <span class=\"hljs-string\">&#x27;templates/person&#x27;</span> ],            <span class=\"hljs-comment\">// Compiled template AMD modules</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">personTemplate</span>) </span>&#123;\n        <span class=\"hljs-keyword\">var</span> rendered_content = personTemplate(&#123;\n              name: <span class=\"hljs-string\">&#x27;Joe Bloggs&#x27;</span>                <span class=\"hljs-comment\">// Data to be used in the template</span>\n         &#125;);\n    &#125;\n);</code></pre>\n<p>Note that explitly requiring the runtime is not necessary because it is implicitly required by the compiled templates.</p>\n<p>If repeated manual recompilation feels like a headache, and you don’t already have a file watcher setup there is a connect middleware <a href=\"https://github.com/storify/jade-browser\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">jade-browser</a> which exposes jade templates to the web browser and also provides a few additional features like express-like render function with partial handling. If you already using <a href=\"http://gruntjs.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">grunt</a>, you can checkout the plugin <a href=\"https://github.com/phated/grunt-jade\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">grunt-jade</a> .</p>\n<p>So jade is an immensely popular templating solution among Node.js developers and the benefit of this is that there are numerous compilation options available to fit into your development toolchain.  I hope this quick detour around jade was helpful.  There are multiple other similar projects aiming to solve similar scenarios.  The ones aforementioned, were a few that I recently used. Please feel free to express any opinions or criticisms. If there is a project with related objectives which is particularly noteworthy,  feel free to add a link.</p>\n",
            "tags": [
                "Javascript",
                "Jade",
                "Node.js"
            ]
        },
        {
            "id": "https://lorefnon.me/2012/08/12/effectively-debugging-knockoutjs-applications.html",
            "url": "https://lorefnon.me/2012/08/12/effectively-debugging-knockoutjs-applications.html",
            "title": "Effectively debugging KnockoutJS applications.",
            "date_published": "2012-08-11T18:30:00.000Z",
            "content_html": "<p>This post aims to provide some explanation about the lifecycle of dynamic data-bindings in KnockoutJS to  ease debugging of KO applications .</p>\n<p>A developer can remain perfectly oblivious of all that is going on under the hood and let the magic of declarative bindings do all the heavy-lifting of data-synchronization and it all works fine untill something unexpected happens. What now ? While most of the bugs in code can be directly resolved by inspecting the data-bind attributes manually, but if the complexity of application grows beyond a level an understanding of what goes on under the sheets becomes necessary.</p>\n<p>While UI does appear to be getting magically updated when the models change, in reality the code underneath is all plain javascript. So what happens when something doesn’t turn out to be as expected ? Where do we start debugging from ?</p>\n<p>The first and most obvious point of commencement is the observable. While we can (and sometimes might need to) begin from the observable function and dig down, debugging process is much simplified if we have a bit of familiarity with the way KO works internally. At this point I would like to underline that KO code is written very well and in general is easy to understand.</p>\n<p>This knowledge is also helpful for development of custom bindings.</p>\n<p>KO relies on bindingHandlers to manage bindings. So corresponding to every built in binding (eg. visible, text, html, value etc.)  we have a bindingHandler which has the same name. The text  binding is handled by a function <strong>ko.bindingHandlers.text</strong>, the value binding by <strong>ko.bindingHandlers.value</strong> and likewise.</p>\n<p>Let us checkout a simple example :</p>\n<pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;jquery-1.7.1.min.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;knockout-latest.debug.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;index.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n      Please Enter your name :\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">data-bind</span>=<span class=\"hljs-string\">&quot;value:name&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">input</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n      Hello <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">data-bind</span>=<span class=\"hljs-string\">&quot;text: name&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span></code></pre>\n\n<pre><code class=\"hljs javascript\">$(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>&#123;\n    <span class=\"hljs-keyword\">var</span> vmodel = &#123;\n        name: ko.observable(<span class=\"hljs-string\">&quot;Lorefnon&quot;</span>)\n    &#125;\n    ko.applyBindings(vmodel);\n&#125;);</code></pre>\n\n<p>There are two binders involved : text-binder and value-binder. Let us inspect the <strong>ko.bindingHandlers.text</strong>in javascript.   It has a single member : update function. Yes, you guessed it right – this is the function that is called when the span is to be updated. Let us checkout what it does :</p>\n<pre><code class=\"hljs javascript\">ko.bindingHandlers[<span class=\"hljs-string\">&#x27;text&#x27;</span>] = &#123;\n    <span class=\"hljs-string\">&#x27;update&#x27;</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">element, valueAccessor</span>) </span>&#123;\n        ko.utils.setTextContent(element, valueAccessor());\n    &#125;\n&#125;;</code></pre>\n\n<p>The code is straightforward and self explanatory. You can just add a breakpoint to the update function and it will be triggered every time that particular DOM node is updated. As expected the actual DOM manipulation takes place in the <strong>ko.utils.setTextContent</strong></p>\n<pre><code class=\"hljs javascript\">setTextContent: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">element, textContent</span>) </span>&#123;\n     <span class=\"hljs-keyword\">var</span> value = ko.utils.unwrapObservable(textContent);\n     <span class=\"hljs-keyword\">if</span> ((value === <span class=\"hljs-literal\">null</span>) || (value === <span class=\"hljs-literal\">undefined</span>)) value = <span class=\"hljs-string\">&quot;&quot;</span>;\n     <span class=\"hljs-string\">&#x27;innerText&#x27;</span> <span class=\"hljs-keyword\">in</span> element ? element.innerText = value : element.textContent = value;\n     <span class=\"hljs-keyword\">if</span> (ieVersion &gt;= <span class=\"hljs-number\">9</span>) &#123;\n         <span class=\"hljs-comment\">// Believe it or not, this actually fixes an IE9 rendering bug</span>\n         <span class=\"hljs-comment\">// (See https://github.com/SteveSanderson/knockout/issues/209)</span>\n         element.style.display = element.style.display;\n     &#125;\n&#125;,\n</code></pre>\n\n<p>What about the other side of the code : What do you do to intercept a change in a form element ? Let us checkout the <strong>ko.bindingHandlers.value</strong></p>\n<img src=\"/images/ko.png\" />\n\n<p>As you probably have already guessed, the init function creates the bindings to intercept any change in the form element. The actual handler that is called each time when the input element changes its value is the valueUpdateHandler function defined inside init :</p>\n<pre><code class=\"hljs javascript\"><span class=\"hljs-keyword\">var</span> valueUpdateHandler = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) </span>&#123;\n     <span class=\"hljs-keyword\">var</span> modelValue = valueAccessor();\n     <span class=\"hljs-keyword\">var</span> elementValue = ko.selectExtensions.readValue(element);\n     ko.jsonExpressionRewriting.writeValueToProperty(modelValue, allBindingsAccessor, <span class=\"hljs-string\">&#x27;value&#x27;</span>, elementValue, <span class=\"hljs-comment\">/* checkIfDifferent: */</span> <span class=\"hljs-literal\">true</span>);\n&#125;</code></pre>\n\n<p>elementValue holds the changed value which is in the next line synced back.</p>\n<p>So here is an overview of how bindings work : when you call <strong>ko.applyBindings</strong> the library traverses the DOM hunting for data-bind attributes. When it finds a data-bind attribute – it first of all figures out which bindingHandler is to be called from the part of data-bind attribute value that preceded the colon. The corresponding handler’s update method set to be called each time the value of corresponding view model attribute changes and it is the responsibility of the update method to alter the DOM node as directed by the data-bind specification.</p>\n<p>For those nodes which are editable by user (ie. the form elements) the corresponding bindingHandlers also have an init method which sets up the bindings for reverse synchronization.</p>\n<p>This summarizes the way data-bindings work under the hood. I hope that this post helps to improve your understanding of KO library.</p>\n",
            "tags": [
                "Javascript",
                "KnockoutJS"
            ]
        },
        {
            "id": "https://lorefnon.me/2012/08/11/debunking-10-common-knockoutjs-myths.html",
            "url": "https://lorefnon.me/2012/08/11/debunking-10-common-knockoutjs-myths.html",
            "title": "Debunking 10 common KnockoutJS myths",
            "date_published": "2012-08-10T18:30:00.000Z",
            "content_html": "<p>It seems that among the developer community, there exist multiple misconceptions regarding KnockoutJS. This is particularly true for developers who are not familiar with the MVVM pattern or declarative style followed by Knockout. This posts aims to clarify some of these misconceptions.</p>\n<p>I was particularly motivated to write this post after <a href=\"http://stackoverflow.com/questions/5112899/knockout-js-vs-backbone-js-vs/6340870#6340870\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">this discussion</a> at Stackoverflow.</p>\n<h1 id=\"KnockoutJS-is-tied-to-specific-server-side-back-ends\"><a href=\"#KnockoutJS-is-tied-to-specific-server-side-back-ends\" class=\"headerlink\" title=\"KnockoutJS is tied to specific server side back-ends.\"></a>KnockoutJS is tied to specific server side back-ends.</h1><p>This mainly stems from the similarities of the declarative binding style used in KO with the WPF declarative bindings. Since I do not work with Microsoft technologies, I can not really assert if the WPF declarative binding style was indeed an inspiration behind KO, however I would like to highlight that KO is strictly a client side library and an ASP.net backend (or any specific server side backend for that matter) is not mandatory. In fact KO will work happily with no server-side code at all. I strongly recommend people to checkout the basic examples presented in the site using jsfiddle and convince yourself that this is indeed the case.</p>\n<p>On a sidenote, there do exist libraries that aim to provide seamless integration layers between KO and ASP.net MVC eg. KnockoutMVC which claims to facilitate creation of complex client side applications without writing a single line of javascript. I strongly advocate against using such esoteric frameworks.</p>\n<h1 id=\"KnockoutJS-has-hard-wired-dependency-on-jQuery-and-jQuery-templating-plugin\"><a href=\"#KnockoutJS-has-hard-wired-dependency-on-jQuery-and-jQuery-templating-plugin\" class=\"headerlink\" title=\"KnockoutJS has hard-wired dependency on jQuery and jQuery-templating plugin.\"></a>KnockoutJS has hard-wired dependency on jQuery and jQuery-templating plugin.</h1><p>Again this is absolutely incorrect. The core functionality provided by KO is framework agonistic. And as far as templating is concerned integrating of third party templating engines is not very difficult. Since KO is open source you can probably find support for your favourite templating engine already available. For example the ko.mustache extension by Marcin Wtorkowski adds support for mustache templating engine.</p>\n<h1 id=\"Because-of-the-level-of-abstraction-offered-by-declarative-bindings-KnockoutJS-is-difficult-to-debug\"><a href=\"#Because-of-the-level-of-abstraction-offered-by-declarative-bindings-KnockoutJS-is-difficult-to-debug\" class=\"headerlink\" title=\"Because of the level of abstraction offered by declarative bindings, KnockoutJS is difficult to debug.\"></a>Because of the level of abstraction offered by declarative bindings, KnockoutJS is difficult to debug.</h1><p>While it is true that KO hides away the boiler plate code for data synchronization and the users are concerned with declaring the bindings in attributes, when things go wrong (either at your end or if you happen to discover a bug in the library) you will have to dig into the layers of abstraction. Fortunately in case of KO, the abstractions are not very convoluted and a basic understanding of the binding management lifecycle makes debugging pretty easy. KO source code is well written and not very difficult to understand, although that certainly is a subjective opinion.</p>\n<p>I plan to highlight some guidelines for debugging KO applications in a future post.</p>\n<h1 id=\"It-is-difficult-to-properly-test-a-KnockoutJS-application\"><a href=\"#It-is-difficult-to-properly-test-a-KnockoutJS-application\" class=\"headerlink\" title=\"It is difficult to properly test a KnockoutJS application.\"></a>It is difficult to properly test a KnockoutJS application.</h1><p>There is simply no reason for this to be true considering that KO is plain simple javascript. In particular KO is well tested and has a comprehensive test suite, which alleviates the developer from writing test cases for boilerplate code for managing data synchronizations. The domain logic is still javascript and KO does not abstract away any client-server interaction so testing the core of your application mostly involves testing your own javascript code only.</p>\n<p>Also, with a basic understanding of KO handlers, the bindingHandlers can be mocked, providing a greater control to the developer.</p>\n<h1 id=\"KnockoutJS-applications-do-not-degrade-gracefully-in-absence-of-javascript\"><a href=\"#KnockoutJS-applications-do-not-degrade-gracefully-in-absence-of-javascript\" class=\"headerlink\" title=\"KnockoutJS applications do not degrade gracefully in absence of javascript.\"></a>KnockoutJS applications do not degrade gracefully in absence of javascript.</h1><p>Graceful degradation in absense of javascript depends on the way your application has been architectured. Although KO being a pure javascript library, does not offer any support for graceful degradation in absence of javascript, nevertheless unlike many of the competing technologies it does not hinder graceful degradation.</p>\n<p>To create a KO application that degrades gracefully, just ensure that the initial state of the page that is rendered by the server suffices to convey the information that a user should see in absence of javascript. Fallback mechanisms (eg simple forms and links) should be available that provide the complete (or partial) application functionality in absence of javascript. Then when you create your view models you can instantiate them from the data already available from the DOM and future data can be loaded via ajax without refreshing the page.</p>\n<p>A good example for this functionality can be a grid. The basic HTML page served by the server can contain a simple HTML table with support for traditional links for pagination. Then you can create your view models from the data present in the table ( or ajax if a bit of redundant data load does not matter for you) and utilize KO for interactive bindings.</p>\n<p>Since KO does not use special inline markup or custom html tags, but rather simple data-bind attributes which are anyways not visible in absence of javascript, it does not hinder graceful degradation.</p>\n<h1 id=\"Although-simple-attribute-binding-works-well-designing-complex-interactive-UI-results-in-cluttered-code\"><a href=\"#Although-simple-attribute-binding-works-well-designing-complex-interactive-UI-results-in-cluttered-code\" class=\"headerlink\" title=\"Although simple attribute-binding works well, designing complex interactive UI results in cluttered code.\"></a>Although simple attribute-binding works well, designing complex interactive UI results in cluttered code.</h1><p>Again code organization is something that KO does not enforce upon you. A very nice way to make to code modular and easy to understand is to use custom bindings. Custom bindings are not something to be used as a last resort . Creating them is easy and utilizing them you can write very succinct code that is easily understandable and manageable. Infact properly using custom bindings can significantly improve performance as compared to several data-bind attributes for same property across several adjacent DOM nodes.</p>\n<p>A few people strongly believe that doing something slightly abnormal (somewhat different from the advertised use-cases) the developer has to go to great lengths in case of KnockoutJS. This is certainly not the case. KnockoutJS does an elegant job at data binding. Not only can the actual value stored in text nodes be mapped to JavaScript objects, practically any attribute and even individual styles can be mapped to JavaScript data structures. Combine with that the fact that mapping can be directed to dynamic objects which actually derive their data from other data structures and the excellent integration of KnockoutJS with jQuery templating system, EVERY single type of UI binding can be made in knockoutJS with lesser number of lines than backbone provided you craft your viewmodels and templates creatively.\n7. Doing anything serious using KnockoutJS requires verbose inline scripts.</p>\n<p>This is also incorrect. Please read the above paragraph on properly using dynamic objects and custom bindings.</p>\n<p>Yes code like</p>\n<pre><code class=\"hljs html\">The item is <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">data-bind</span>=<span class=\"hljs-string\">&quot;text: price() &gt; 50 ? &#x27;expensive&#x27; : &#x27;affordable&#x27;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span> today.</code></pre>\n\n<p>is certainly ugly. But you can simply define a custom attribute that depends on price using ko.computable and have that in the view-model. As a developer you already are smart enough to avoid embedding javascript application logic inside html. KO does not come in your way.</p>\n<h1 id=\"KnockoutJS-does-not-offer-a-multitude-of-widgets\"><a href=\"#KnockoutJS-does-not-offer-a-multitude-of-widgets\" class=\"headerlink\" title=\"KnockoutJS does not offer a multitude of widgets.\"></a>KnockoutJS does not offer a multitude of widgets.</h1><p>This is absolutely correct. But KO noway advertises the same. It is essentially a data-binding library that does one thing and does it well. It is not a complete application SDK or UI framework.</p>\n<h1 id=\"Integrating-KnockoutJS-with-a-restful-backend-is-difficult\"><a href=\"#Integrating-KnockoutJS-with-a-restful-backend-is-difficult\" class=\"headerlink\" title=\"Integrating KnockoutJS with a restful backend is difficult.\"></a>Integrating KnockoutJS with a restful backend is difficult.</h1><p>As I previously pointed out, KO does not abstract out client server interaction. In fact the management of your Model layer is left almost entirely to you. Having said that, if your restful backend makes data available as json, the backbone mapping plugin makes it trivial to sync server data with view models.</p>\n<p>If the structure of the data fetched from sever differs significantly from the way view models are organized, then you anyway have to write code for transforming the code.</p>\n<p>The knockout-rest plugin by Francesco Pontillo provides a very easy and intuitive way to integrate view-models with a restful backend.</p>\n<h1 id=\"Using-libraries-like-KnockoutJS-have-serious-negative-impact-on-SEO\"><a href=\"#Using-libraries-like-KnockoutJS-have-serious-negative-impact-on-SEO\" class=\"headerlink\" title=\"Using libraries like KnockoutJS have serious negative impact on SEO.\"></a>Using libraries like KnockoutJS have serious negative impact on SEO.</h1><p>If you follow the guidelines presented above on graceful degradation then there is no reason why this should happen.</p>\n<p>Even if you are not concerned about graceful degradation, and your application is heavily dependent on Ajax based content fetching,  These  guidelines from Google, can make your website crawlable.</p>\n<p>I sincerely hope that this post was successful in removing many of the common misconceptions regarding KnockoutJS and I also hope that you will be able to appreciate the power of this fantastic library. Please leave your suggestions and opinions in the comments section below. Also if you have been working on a project that enhances or extends the capabilities of KnockoutJS please feel free to drop in a link.</p>\n",
            "tags": [
                "Javascript",
                "KnockoutJS"
            ]
        }
    ]
}