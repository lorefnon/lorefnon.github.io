{
    "version": "https://jsonfeed.org/version/1",
    "title": "Icicles of Thought â€¢ All posts by \"graphql\" tag",
    "description": "",
    "home_page_url": "https://lorefnon.me",
    "items": [
        {
            "id": "https://lorefnon.me/2021/08/08/Vue-composition-api-and-type-safe-graphql-access/",
            "url": "https://lorefnon.me/2021/08/08/Vue-composition-api-and-type-safe-graphql-access/",
            "title": "Vue composition API and type-safe GraphQL access",
            "date_published": "2021-08-07T00:00:00.000Z",
            "content_html": "<h1 id=\"About-setup-script\"><a href=\"#About-setup-script\" class=\"headerlink\" title=\"About setup script\"></a>About setup script</h1><p>The <a href=\"https://v3.vuejs.org/guide/composition-api-introduction.html\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">vue composition API</a> is pretty cool, esp. with the recent addition of <a href=\"https://github.com/vuejs/rfcs/blob/master/active-rfcs/0040-script-setup.md\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">setup script support</a> in <a href=\"https://blog.vuejs.org/posts/vue-3.2.html\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Vue 3.2</a> which drastically reduces unnecessary boilerplate when most of the logic is present in the setup function of the component. </p>\n<p>From the announcement post: </p>\n<blockquote>\n<p><code>&lt;script setup&gt;</code> is a <strong>compile-time syntactic sugar</strong> that greatly improves the ergonomics when using Composition API inside SFCs.</p>\n</blockquote>\n<pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">setup</span>&gt;</span>\n<span class=\"javascript\"><span class=\"hljs-keyword\">import</span> &#123; ref &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vue&#x27;</span></span>\n\n<span class=\"javascript\"><span class=\"hljs-keyword\">const</span> color = ref(<span class=\"hljs-string\">&#x27;red&#x27;</span>)</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> @<span class=\"hljs-attr\">click</span>=<span class=\"hljs-string\">&quot;color = color === &#x27;red&#x27; ? &#x27;green&#x27; : &#x27;red&#x27;&quot;</span>&gt;</span>\n    Color is: &#123;&#123; color &#125;&#125;\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span></code></pre>\n<h1 id=\"GraphQL-through-Composition-API\"><a href=\"#GraphQL-through-Composition-API\" class=\"headerlink\" title=\"GraphQL through Composition API\"></a>GraphQL through Composition API</h1><p>With <a href=\"https://v4.apollo.vuejs.org/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">vue-apollo-composable</a> we can use a composable API to access our GraphQL API which can take advantage of above support. </p>\n<p>Lastly, using <a href=\"https://www.graphql-code-generator.com/docs/presets/gql-tag-operations\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">gql-tag-operations-preset</a> we can ensure that we get type-safety while accessing resources over GraphQL. </p>\n<p>This combination works seamlessly and unlike previous codegen based approaches doesn&#39;t require us to manually import types or functions generated from graphql files. </p>\n<p>The rest of this post is primarily an overview of the involved configuration.</p>\n<h1 id=\"Dependencies\"><a href=\"#Dependencies\" class=\"headerlink\" title=\"Dependencies\"></a>Dependencies</h1><p>Currently, my preferred way to get started with Vue project is to scaffold it through vite (<code>yarn create vite</code>) which internally uses the really fast <a href=\"https://github.com/evanw/esbuild\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">esbuild</a> native transpiler. </p>\n<p>Other build tools may require minor adjustment around import aliasing.</p>\n<p>Here is what our package.json looks like: </p>\n<pre><code class=\"hljs json\">&#123;\n  <span class=\"hljs-attr\">&quot;scripts&quot;</span>: &#123;\n    <span class=\"hljs-attr\">&quot;dev&quot;</span>: <span class=\"hljs-string\">&quot;vite&quot;</span>,\n    <span class=\"hljs-attr\">&quot;build&quot;</span>: <span class=\"hljs-string\">&quot;vue-tsc --noEmit &amp;&amp; vite build&quot;</span>,\n    <span class=\"hljs-attr\">&quot;serve&quot;</span>: <span class=\"hljs-string\">&quot;vite preview&quot;</span>,\n    <span class=\"hljs-attr\">&quot;codegen:graphql&quot;</span>: <span class=\"hljs-string\">&quot;yarn run graphql-codegen -c graphql-codegen.yaml&quot;</span>\n  &#125;,\n  <span class=\"hljs-attr\">&quot;dependencies&quot;</span>: &#123;\n    <span class=\"hljs-attr\">&quot;@apollo/client&quot;</span>: <span class=\"hljs-string\">&quot;^3.4.5&quot;</span>,\n    <span class=\"hljs-attr\">&quot;@graphql-typed-document-node/core&quot;</span>: <span class=\"hljs-string\">&quot;^3.1.0&quot;</span>,\n    <span class=\"hljs-attr\">&quot;@vue/apollo-composable&quot;</span>: <span class=\"hljs-string\">&quot;^4.0.0-alpha.14&quot;</span>,\n    <span class=\"hljs-attr\">&quot;graphql&quot;</span>: <span class=\"hljs-string\">&quot;^15.5.1&quot;</span>,\n    <span class=\"hljs-attr\">&quot;graphql-tag&quot;</span>: <span class=\"hljs-string\">&quot;^2.12.5&quot;</span>,\n    <span class=\"hljs-attr\">&quot;vue&quot;</span>: <span class=\"hljs-string\">&quot;^3.0.5&quot;</span>,\n    <span class=\"hljs-attr\">&quot;vue-router&quot;</span>: <span class=\"hljs-string\">&quot;4&quot;</span>\n  &#125;,\n  <span class=\"hljs-attr\">&quot;devDependencies&quot;</span>: &#123;\n    <span class=\"hljs-attr\">&quot;@app/gql&quot;</span>: <span class=\"hljs-string\">&quot;link:./src/gql&quot;</span>,\n    <span class=\"hljs-attr\">&quot;@graphql-codegen/cli&quot;</span>: <span class=\"hljs-string\">&quot;^2.0.1&quot;</span>,\n    <span class=\"hljs-attr\">&quot;@graphql-codegen/gql-tag-operations-preset&quot;</span>: <span class=\"hljs-string\">&quot;^1.0.1&quot;</span>,\n    <span class=\"hljs-attr\">&quot;@graphql-codegen/typescript-graphql-request&quot;</span>: <span class=\"hljs-string\">&quot;^4.0.0&quot;</span>,\n    <span class=\"hljs-attr\">&quot;@vitejs/plugin-vue&quot;</span>: <span class=\"hljs-string\">&quot;^1.4.0&quot;</span>,\n    <span class=\"hljs-attr\">&quot;@vue/compiler-sfc&quot;</span>: <span class=\"hljs-string\">&quot;^3.1.5&quot;</span>,\n    <span class=\"hljs-attr\">&quot;typescript&quot;</span>: <span class=\"hljs-string\">&quot;^4.3.5&quot;</span>,\n    <span class=\"hljs-attr\">&quot;vite&quot;</span>: <span class=\"hljs-string\">&quot;^2.5.0-beta.1&quot;</span>,\n    <span class=\"hljs-attr\">&quot;vue-tsc&quot;</span>: <span class=\"hljs-string\">&quot;^0.2.2&quot;</span>\n  &#125;\n&#125;</code></pre>\n<h1 id=\"Configuration-for-graphql-code-generator\"><a href=\"#Configuration-for-graphql-code-generator\" class=\"headerlink\" title=\"Configuration for graphql-code-generator\"></a>Configuration for graphql-code-generator</h1><p>We have a <code>codegen:graphql</code> script configured above, which we can use to generate types for our GraphQL accessors.</p>\n<p>Here is what our <code>graphql-codegen.yaml</code> looks like: </p>\n<pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">schema:</span> <span class=\"hljs-string\">./schema/schema.graphqls</span>\n<span class=\"hljs-attr\">documents:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&#x27;src/**/*.ts&#x27;</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&#x27;src/**/*.vue&#x27;</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&#x27;!src/gql/**/*&#x27;</span>\n<span class=\"hljs-attr\">generates:</span> \n  <span class=\"hljs-string\">./src/schema/generated/graphql.d.ts:</span>\n    <span class=\"hljs-attr\">plugins:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">typescript</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">typescript-operations</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">typescript-graphql-request</span>\n  <span class=\"hljs-string\">./src/gql/:</span>\n    <span class=\"hljs-attr\">preset:</span> <span class=\"hljs-string\">gql-tag-operations-preset</span></code></pre>\n<p>From the docs for <a href=\"https://www.graphql-code-generator.com/docs/presets/gql-tag-operations\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">gql-tag-operations-preset</a>: </p>\n<blockquote>\n<p>This preset generates typings for your inline gql function usages, without having to manually specify import statements for the documents. All you need to do is import your gql function and run codegen in watch mode.</p>\n</blockquote>\n<p>Since <code>yarn run</code> forwards our arguments to the underlying scripts, to run the aforementioned watch mode, we can simply run: </p>\n<pre><code class=\"hljs sh\">yarn run codegen:graphql --watch</code></pre>\n<p>This will keep scanning our code for usage of graphql queries/mutations and generate corresponding types.</p>\n<p>We will look at some examples below.</p>\n<h2 id=\"Import-aliasing\"><a href=\"#Import-aliasing\" class=\"headerlink\" title=\"Import aliasing:\"></a>Import aliasing:</h2><p>The last piece of setup we need to do is configuration for imports. </p>\n<p>This may get simplified in future, but as of this writing this needs to be done in both tsconfig.json (in case you are using typescript,  make typescript compiler &amp; editor tooling happy) and vite config (to make vite happy).</p>\n<p>In <code>tsconfig.json</code>: </p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">{\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">  <span class=\"hljs-attr\">&quot;compilerOptions&quot;</span>: {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-attr\">&quot;target&quot;</span>: <span class=\"hljs-string\">&quot;esnext&quot;</span>,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-attr\">&quot;module&quot;</span>: <span class=\"hljs-string\">&quot;esnext&quot;</span>,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-attr\">&quot;moduleResolution&quot;</span>: <span class=\"hljs-string\">&quot;node&quot;</span>,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-attr\">&quot;strict&quot;</span>: <span class=\"hljs-literal\">true</span>,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-attr\">&quot;jsx&quot;</span>: <span class=\"hljs-string\">&quot;preserve&quot;</span>,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-attr\">&quot;sourceMap&quot;</span>: <span class=\"hljs-literal\">true</span>,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-attr\">&quot;resolveJsonModule&quot;</span>: <span class=\"hljs-literal\">true</span>,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-attr\">&quot;esModuleInterop&quot;</span>: <span class=\"hljs-literal\">true</span>,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-attr\">&quot;lib&quot;</span>: [<span class=\"hljs-string\">&quot;esnext&quot;</span>, <span class=\"hljs-string\">&quot;dom&quot;</span>],\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-attr\">&quot;paths&quot;</span>: {\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">      <span class=\"hljs-attr\">&quot;@app/gql&quot;</span>: [<span class=\"hljs-string\">&quot;./src/gql&quot;</span>]\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">  },\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">  <span class=\"hljs-attr\">&quot;include&quot;</span>: [<span class=\"hljs-string\">&quot;src/**/*.ts&quot;</span>, <span class=\"hljs-string\">&quot;src/**/*.d.ts&quot;</span>, <span class=\"hljs-string\">&quot;src/**/*.tsx&quot;</span>, <span class=\"hljs-string\">&quot;src/**/*.vue&quot;</span>]\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">}\n</td></tr></table></code></pre>\n\n<p>In <code>vite.config.ts</code>: </p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> { defineConfig } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vite&#x27;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> vue <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@vitejs/plugin-vue&#x27;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> { resolve } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;path&quot;</span>;\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-comment\">// https://vitejs.dev/config/</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> defineConfig({\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">  <span class=\"hljs-attr\">plugins</span>: [\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    vue()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">  ],\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">  <span class=\"hljs-attr\">resolve</span>: {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-attr\">alias</span>: {\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">      <span class=\"hljs-string\">&quot;@app/gql&quot;</span>: resolve(__dirname, <span class=\"hljs-string\">&quot;./src/gql&quot;</span>)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">  }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">})\n</td></tr></table></code></pre>\n\n<p>What this enables us to do is to import a helper function from <code>@app/gql</code> which we will use to make graphql queries (or perform mutations). </p>\n<p>And the watcher will keep adding overloads to this helper for each of our usage.</p>\n<h1 id=\"Usage-in-application\"><a href=\"#Usage-in-application\" class=\"headerlink\" title=\"Usage in application\"></a>Usage in application</h1><p>Here is what a usage of this helper looks like in our component: </p>\n<pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">template</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;pug&quot;</span>&gt;</span>\ndiv(v-if=&quot;loading&quot;)\n  | Loading ...\ndiv(v-else)\n  div(v-if=&quot;result?.currentUser&quot;)\n    | Hello &#123;&#123; result.currentUser.name &#125;&#125;\n  div(v-else)\n    | Not logged in\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">template</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;ts&quot;</span> <span class=\"hljs-attr\">setup</span>&gt;</span>\n<span class=\"javascript\"><span class=\"hljs-keyword\">import</span> &#123; gql &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@app/gql&quot;</span></span>\n<span class=\"javascript\"><span class=\"hljs-keyword\">import</span> &#123; useQuery &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@vue/apollo-composable&quot;</span></span>\n\n<span class=\"javascript\"><span class=\"hljs-keyword\">const</span> &#123; result, loading &#125; = useQuery(</span>\n<span class=\"javascript\">    gql(<span class=\"hljs-comment\">/* GraphQL */</span> <span class=\"hljs-string\">`</span></span>\n        query CurrentUserQuery &#123;\n            currentUser &#123;\n                name\n            &#125;\n        &#125;\n    `)\n)\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span></code></pre>\n<p>Note that other than <code>gql</code> we didn&#39;t need to import anything else. And we may get a type error initially, it will quickly disappear once our watcher generates the necessary overloads, and our <code>result</code> and <code>loading</code> variables will be correctly typed as vue refs.</p>\n<p>The result&#39;s value type will be derived from our query and if we update the query, the type will auto-update too.</p>\n<p>And because these are reactive refs, we can directly use them in templates without needing any watchers or cleanup code.</p>\n<p>Lastly, if you are curious, here is what the overloads generated look like: </p>\n<pre><code class=\"hljs typescript\"><span class=\"hljs-keyword\">import</span> * <span class=\"hljs-keyword\">as</span> graphql <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./graphql&#x27;</span>;\n\n<span class=\"hljs-keyword\">const</span> documents = &#123;\n    <span class=\"hljs-string\">&quot;query CurrentUserQuery &#123;...&#125;&quot;</span>: graphql.CurrentUserQueryDocument,\n&#125;;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">gql</span>(<span class=\"hljs-params\">source: <span class=\"hljs-string\">&quot;query CurrentUserQuery &#123;...&#125;&quot;</span></span>): (<span class=\"hljs-params\"><span class=\"hljs-keyword\">typeof</span> documents</span>)[&quot;<span class=\"hljs-title\">query</span> <span class=\"hljs-title\">CurrentUserQuery</span> </span>&#123;...&#125;<span class=\"hljs-string\">&quot;];</span>\n<span class=\"hljs-string\"></span>\n<span class=\"hljs-string\">export function gql(source: string): unknown;</span>\n<span class=\"hljs-string\">export function gql(source: string) &#123;</span>\n<span class=\"hljs-string\">  return (documents as any)[source] ?? &#123;&#125;;</span>\n<span class=\"hljs-string\">&#125;</span></code></pre>\n<p>Not quite pretty :), but usually you never have to peek into this file at all.</p>\n",
            "tags": [
                "Apollo",
                "GraphQL",
                "Vue",
                "TypeScript"
            ]
        },
        {
            "id": "https://lorefnon.me/2021/03/26/Building-GraphQL-APIs-powered-by-Vert-x-jOOQ-Kotlin-III/",
            "url": "https://lorefnon.me/2021/03/26/Building-GraphQL-APIs-powered-by-Vert-x-jOOQ-Kotlin-III/",
            "title": "Building GraphQL APIs powered by Vert.x, jOOQ & Kotlin - III",
            "date_published": "2021-03-26T00:00:00.000Z",
            "content_html": "<p>This is the third post in our series of articles where we explore a JVM based stack comprising of Kotlin, Vert.X and jOOQ for development of GraphQL APIs.</p>\n<p>In the <a href=\"/2021/02/05/Building-GraphQL-APIs-powered-by-Vert-x-jOOQ-Kotlin-II/\">previous post</a> we integrated a dagger based DI system to simplify wiring up of components. In this post we will add some more GraphQL resolvers which connect to the database using the jooq based DAO layer.</p>\n<p>Before we do that, let&#39;s add an AppConfig component to read configuration from a properties file in a type safe manner so that our application becomes runtime configurable: </p>\n<p>Our configuration file (<code>src/resources/app-config.properties</code>) looks like this:</p>\n<pre><code class=\"hljs properties\"><span class=\"hljs-meta\">db.port</span> = <span class=\"hljs-string\">5432</span>\n<span class=\"hljs-meta\">db.host</span> = <span class=\"hljs-string\">localhost</span>\n<span class=\"hljs-meta\">db.database</span> = <span class=\"hljs-string\">jooq_graphql_sample</span>\n<span class=\"hljs-meta\">db.user</span> = <span class=\"hljs-string\">lorefnon</span></code></pre>\n<p>We will write an <code>AppConfigModule</code> which will make the parsed configuration available to other services through dagger.</p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">package</span> me.lorefnon.sample.module\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-9\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-9\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">3 lines collapsed (Imports)</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-9\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> dagger.Module\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-9\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> dagger.Provides\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-9\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> java.io.FileInputStream\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-9\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> java.util.*\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-meta\">@Module</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">AppConfigModule</span> </span>{\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Provides</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">provideAppConfig</span><span class=\"hljs-params\">()</span></span>: AppConfig {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">val</span> properties = Properties()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-comment\">// Enable application consumer to inject a properties file through environment variable</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">val</span> fsPropertiesPath = System.getenv()[<span class=\"hljs-string\">&quot;APP_CONFIG_PATH&quot;</span>]\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">val</span> propertiesStream = fsPropertiesPath\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            ?.let { FileInputStream(fsPropertiesPath) }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-comment\">// Otherwise use the one in class path</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            ?: javaClass.classLoader.getResourceAsStream(<span class=\"hljs-string\">&quot;app-config.properties&quot;</span>)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        properties.load(propertiesStream)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">return</span> AppConfig(properties)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">}\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-comment\">/**\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"> * A type safe wrapper over the untyped Properties instance\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"> */</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">AppConfig</span></span>(<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> properties: Properties) {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">val</span> appPort <span class=\"hljs-keyword\">get</span>(): <span class=\"hljs-built_in\">Int</span> = properties.getProperty(<span class=\"hljs-string\">&quot;server.http.port&quot;</span>)?.toInt() ?: <span class=\"hljs-number\">8888</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">val</span> dbPort <span class=\"hljs-keyword\">get</span>(): <span class=\"hljs-built_in\">Int</span>? = properties.getProperty(<span class=\"hljs-string\">&quot;db.port&quot;</span>)?.toInt()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">val</span> dbHost <span class=\"hljs-keyword\">get</span>(): String = properties.getProperty(<span class=\"hljs-string\">&quot;db.host&quot;</span>)!!\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">val</span> dbName <span class=\"hljs-keyword\">get</span>(): String = properties.getProperty(<span class=\"hljs-string\">&quot;db.database&quot;</span>)!!\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">val</span> dbUser <span class=\"hljs-keyword\">get</span>(): String? = properties.getProperty(<span class=\"hljs-string\">&quot;db.user&quot;</span>)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">val</span> dbPassword <span class=\"hljs-keyword\">get</span>(): String? = properties.getProperty(<span class=\"hljs-string\">&quot;db.password&quot;</span>)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">}\n</td></tr></table></code></pre>\n\n<p>Let us add a <code>DBAccessModule</code> which uses this configuration to wire up database access: </p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">package</span> me.lorefnon.sample.module\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-10\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-10\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">6 lines collapsed (Imports)</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-10\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> dagger.Module\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-10\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> dagger.Provides\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-10\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> io.vertx.pgclient.PgConnectOptions\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-10\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> io.vertx.pgclient.PgPool\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-10\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> io.vertx.sqlclient.PoolOptions\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-10\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> io.vertx.sqlclient.SqlClient\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-10\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> javax.inject.Singleton\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-meta\">@Module</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DBAccessModule</span> </span>{\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-comment\">/**\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">     * Provides an database pool client powered by Vert.X asynchronous postgres driver\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">     */</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Provides</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Singleton</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">providePGClient</span><span class=\"hljs-params\">(connectOptions: <span class=\"hljs-type\">PgConnectOptions</span>, poolOptions: <span class=\"hljs-type\">PoolOptions</span>)</span></span>: SqlClient =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        PgPool.pool(connectOptions, poolOptions)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Provides</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Singleton</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">providePGPoolOptions</span><span class=\"hljs-params\">(config: <span class=\"hljs-type\">AppConfig</span>)</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        PoolOptions()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Provides</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Singleton</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">providePGConnectOptions</span><span class=\"hljs-params\">(config: <span class=\"hljs-type\">AppConfig</span>)</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        PgConnectOptions()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .apply {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                port = config.dbPort\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                host = config.dbHost\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                database = config.dbName\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                config.dbUser?.let { user = it }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                config.dbPassword?.let { password = it }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">}\n</td></tr></table></code></pre>\n\n<p>Thanks to jklingsporn&#39;s <code>ClassicReactiveVertxGenerator</code>, our DAO classes are compatible with the Vert.X postgres driver pool we configured above.</p>\n<p>So we can simply instantiate these DAO classes providing passing this postgres client to them. Let us write a module that instantiates our generated DAO classes: </p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">package</span> me.lorefnon.sample.module\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-11\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-11\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">8 lines collapsed (Imports)</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-11\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> dagger.Module\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-11\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> dagger.Provides\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-11\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> io.vertx.core.Vertx\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-11\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> io.vertx.sqlclient.SqlClient\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-11\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> me.lorefnon.sample.generated.tables.daos.UsersDao\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-11\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> org.jooq.Configuration\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-11\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> org.jooq.SQLDialect\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-11\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> org.jooq.impl.DefaultConfiguration\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-11\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> javax.inject.Singleton\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-meta\">@Module</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DAOModule</span> </span>{\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Provides</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Singleton</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">provideJooQConfiguration</span><span class=\"hljs-params\">()</span></span>: Configuration =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        DefaultConfiguration().apply {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            setSQLDialect(SQLDialect.POSTGRES)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Provides</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Singleton</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">provideUsersDao</span><span class=\"hljs-params\">(jooqConfig: <span class=\"hljs-type\">Configuration</span>, sqlClient: <span class=\"hljs-type\">SqlClient</span>)</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        UsersDao(jooqConfig, sqlClient)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-comment\">// Expose other DAO classes here</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">}\n</td></tr></table></code></pre>\n\n<p>We will also need to make our <code>MainVerticleComponent</code> aware of these modules: </p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">package</span> me.lorefnon.sample\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-12\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-12\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">6 lines collapsed (Imports)</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-12\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> dagger.Component\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-12\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.GraphQL\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-12\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> io.vertx.ext.web.Router\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-12\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> io.vertx.sqlclient.SqlClient\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-12\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> me.lorefnon.sample.generated.tables.daos.UsersDao\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-12\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> me.lorefnon.sample.module.*\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-12\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> javax.inject.Singleton\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-meta\">@Component(modules = [\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    AppConfigModule::class,\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    DBAccessModule::class,\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    DAOModule::class,\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    GraphQLModule::class,\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    RouterModule::class\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">])</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-meta\">@Singleton</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">MainVerticleComponent</span> </span>{\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getRouter</span><span class=\"hljs-params\">()</span></span>: Router\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">}\n</td></tr></table></code></pre>\n\n<p>And then inject these instances in <code>MainVerticle</code>: </p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MainVerticle</span> : <span class=\"hljs-type\">AbstractVerticle</span></span>() {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">val</span> components <span class=\"hljs-keyword\">by</span> lazy {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        DaggerMainVerticleComponent\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .builder()\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .appConfigModule(AppConfigModule())\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .dBAccessModule(DBAccessModule())\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .dAOModule(DAOModule())\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .graphQLModule(GraphQLModule())\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .routerModule(RouterModule(vertx))\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .build()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">start</span><span class=\"hljs-params\">(startPromise: <span class=\"hljs-type\">Promise</span>&lt;<span class=\"hljs-type\">Void</span>&gt;)</span></span> {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">val</span> appPort = component.getAppConfig().appPort\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        vertx\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .createHttpServer()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .requestHandler(component.getRouter())\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .listen(appPort) { http -&gt;\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-13\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-13\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">5 lines collapsed</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-13\"><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-keyword\">if</span> (http.succeeded()) {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-13\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    startPromise.complete()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-13\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    println(<span class=\"hljs-string\">&quot;HTTP server started on port <span class=\"hljs-variable\">$appPort</span>&quot;</span>)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-13\"><td style=\"border:none\" class=\"hlcode-code-cell\">                } <span class=\"hljs-keyword\">else</span> {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-13\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    startPromise.fail(http.cause());\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-13\"><td style=\"border:none\" class=\"hlcode-code-cell\">                }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">}\n</td></tr></table></code></pre>\n\n<p>Our API still works, but obviously our <code>DBAccessModule</code> &amp; <code>DAOModule</code> are still unused. Let&#39;s address that. </p>\n<p>Here is the simplest <code>UserRegistrationService</code> implementation, that receives incoming credentials, and saves it in DB after hashing the password: </p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">package</span> me.lorefnon.sample.service\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-14\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-14\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">4 lines collapsed</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-14\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> at.favre.lib.crypto.bcrypt.BCrypt\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-14\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> io.vertx.core.Future\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-14\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> me.lorefnon.sample.generated.tables.daos.UserDao\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-14\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> me.lorefnon.sample.generated.tables.pojos.User\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-14\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> javax.inject.Inject\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">UserRegistrationService</span> <span class=\"hljs-meta\">@Inject</span> <span class=\"hljs-keyword\">constructor</span></span>(\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> userDao: UserDao,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> passwordEncryptionService: PasswordEncryptionService\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">) {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">registerUser</span><span class=\"hljs-params\">(name: <span class=\"hljs-type\">String</span>, email: <span class=\"hljs-type\">String</span>, password: <span class=\"hljs-type\">String</span>)</span></span>: Future&lt;RegistrationResult&gt; {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">return</span> userDao.insert(User().apply {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-keyword\">this</span>.name = name\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-keyword\">this</span>.password = passwordEncryptionService.encrypt(password)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-keyword\">this</span>.email = email\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        }).map { insertCount -&gt;\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            RegistrationResult(<span class=\"hljs-literal\">true</span>)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        }.otherwise { throwable -&gt;\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-keyword\">val</span> comments =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-keyword\">if</span> (throwable.message?.contains(<span class=\"hljs-string\">&quot;violates unique constraint&quot;</span>) == <span class=\"hljs-literal\">true</span>)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    listOf(\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-string\">&quot;A user is already registered for this email/username&quot;</span>,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-string\">&quot;Do you want to sign in instead ?&quot;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    )\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-keyword\">else</span> <span class=\"hljs-literal\">null</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            RegistrationResult(<span class=\"hljs-literal\">false</span>, comments)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">}\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">data</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">RegistrationResult</span></span>(\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">val</span> success: <span class=\"hljs-built_in\">Boolean</span>,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">val</span> comments: List&lt;String&gt;? = <span class=\"hljs-literal\">null</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">)\n</td></tr></table></code></pre>\n\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">package</span> me.lorefnon.sample.service\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> at.favre.lib.crypto.bcrypt.BCrypt\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> javax.inject.Inject\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-keyword\">val</span> LOGARITHMIC_COST_FACTOR = <span class=\"hljs-number\">12</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">PasswordEncryptionService</span> <span class=\"hljs-meta\">@Inject</span> <span class=\"hljs-keyword\">constructor</span></span>() {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">encrypt</span><span class=\"hljs-params\">(password: <span class=\"hljs-type\">String</span>)</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        BCrypt.withDefaults().hashToString(LOGARITHMIC_COST_FACTOR, password.toCharArray())\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">verify</span><span class=\"hljs-params\">(password: <span class=\"hljs-type\">String</span>, encryptedPassword: <span class=\"hljs-type\">String</span>)</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        BCrypt.verifyer().verify(password.toCharArray(), encryptedPassword).verified\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">}\n</td></tr></table></code></pre>\n\n<p>A production ready solution will also do email verification, time-limit number of signups from an IP, etc. but for our tutorial we will not go into the intricacies of user registration best practices. </p>\n<p>Our service, at this point, is a plain kotlin service that can be tested in isolation. It is not, however, GraphQL aware. </p>\n<p>We need to next expose this service through a resolver: </p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">package</span> me.lorefnon.sample.module\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-15\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-15\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">9 lines collapsed (Imports)</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-15\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.GraphQL\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-15\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.schema.idl.RuntimeWiring.newRuntimeWiring\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-15\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.schema.idl.SchemaGenerator\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-15\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.schema.idl.SchemaParser\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-15\"><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-15\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> dagger.Module\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-15\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> dagger.Provides\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-15\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.schema.idl.TypeRuntimeWiring\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-15\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> me.lorefnon.sample.service.UserRegistrationService\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-15\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> javax.inject.Singleton\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-meta\">@Module</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">GraphQLModule</span> </span>{\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Provides</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Singleton</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">provideGraphQL</span><span class=\"hljs-params\">(\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        userRegistrationService: <span class=\"hljs-type\">UserRegistrationService</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    )</span></span> = GraphQLBuilder(\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        userRegistrationService\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    ).build()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">inner</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">GraphQLBuilder</span></span>(\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> userRegistrationService: UserRegistrationService\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    ) {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">build</span><span class=\"hljs-params\">()</span></span>: GraphQL = GraphQL\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .newGraphQL(buildExecutableSchema())\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .build()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> rawSchema = <span class=\"hljs-string\">&quot;&quot;&quot;\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            type Query {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                hello: String\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    \n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            type Mutation {\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                registerUser(username: String!, email: String!, password: String!): RegistrationResult!\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    \n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            type RegistrationResult {\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                success: Boolean!\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        &quot;&quot;&quot;</span>.trimIndent()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">buildRuntimeWiring</span><span class=\"hljs-params\">()</span></span> = newRuntimeWiring()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .type(<span class=\"hljs-string\">&quot;Query&quot;</span>) {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                it.dataFetcher(<span class=\"hljs-string\">&quot;hello&quot;</span>) {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-string\">&quot;world&quot;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .type(<span class=\"hljs-string\">&quot;Mutation&quot;</span>) {\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                it.associateRegisterUserMutation()\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .build()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-comment\">// Local extension method for graphql-java&#x27;s TypeRuntimeWiring Builder</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-comment\">// to associate the registerUser resolver</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> TypeRuntimeWiring.Builder.<span class=\"hljs-title\">associateRegisterUserMutation</span><span class=\"hljs-params\">()</span></span> =\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            dataFetcher(<span class=\"hljs-string\">&quot;registerUser&quot;</span>, VertxDataFetcher.create { env -&gt;\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-keyword\">val</span> username = env.getArgument&lt;String&gt;(<span class=\"hljs-string\">&quot;username&quot;</span>)\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-keyword\">val</span> email = env.getArgument&lt;String&gt;(<span class=\"hljs-string\">&quot;email&quot;</span>)\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-keyword\">val</span> password = env.getArgument&lt;String&gt;(<span class=\"hljs-string\">&quot;password&quot;</span>)\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                userRegistrationService.registerUser(username, email, password)\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            })\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">buildExecutableSchema</span><span class=\"hljs-params\">()</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            SchemaGenerator().makeExecutableSchema(parseSchema(), buildRuntimeWiring())\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">parseSchema</span><span class=\"hljs-params\">()</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            SchemaParser().parse(rawSchema)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">}\n</td></tr></table></code></pre>\n\n<p>We have updated our GraphQL schema SDL to include a <code>registerUser</code> mutation field and we have updated our runtime wiring to resolve this field through the <code>registerUser</code> method of <code>UserRegistrationService</code>. </p>\n<p>In an extension method (<code>associateRegisterUserMutation</code>), we are bridging the non-typesafe arguments API of GraphQL java to the type safe <code>UserRegistrationService.registerUser</code> arguments.</p>\n<p>One interesting thing to note here is the use of <code>VertxDataFetcher.create</code>. In case of our static resolver before (<code>Query.hello</code> field), we had passed a lambda to <code>TypeRuntimeWiring.Builder.dataFetcher</code>. This works perfectly fine for simple values or java objects. If our <code>userRegistrationService.registerUser</code> returned a <code>RegistrationResult</code> instance directly, we would not have to use <code>VertxDataFetcher.create</code>. \nBut what it actually returns is a Vert.X <code>Future</code> instance that resolves to a <code>RegistrationResult</code>. </p>\n<p>graphql-java library is not aware of this <code>Future</code> class. It does understand <code>java.util.concurrent.CompletionStage</code> (Read more about <a href=\"https://www.graphql-java.com/documentation/v15/execution/#asynchronous-execution\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">asynchronous execution</a> in graphql-java), but the <code>Future</code> being returned here is not <code>java.util.concurrent.CompletableFuture</code> (which implements <code>java.util.concurrent.Future</code> and <code>java.util.concurrent.CompletionStage</code>) but rather <code>io.vertx.core.Future</code>, which is used by the vert.x libraries. </p>\n<p>So we need to convert the vert.x future to a <code>CompletionStage</code>. We already have a <code>.toCompletionStage()</code> method in vert.x Futures for this, but the <code>VertxDataFetcher</code> fetcher is an added convenience on top of that which is <a href=\"https://vertx.io/docs/apidocs/io/vertx/core/Context.html\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Vert.x context</a> aware.</p>\n<p>We can now restart our service and try out our mutation through Altair, or other GraphQL Client:</p>\n<pre><code class=\"hljs graphql\">mutation &#123;\n  registerUser(\n    username: &quot;lorefnon&quot;, \n    email: &quot;lorefnon@gmail.com&quot;,\n    password: &quot;password&quot;\n  ) &#123;\n    success\n    comments\n  &#125;\n&#125;</code></pre>\n<p>If it&#39;s all wired up correctly, we should get a successful response:</p>\n<pre><code class=\"hljs json\">&#123;\n  <span class=\"hljs-attr\">&quot;data&quot;</span>: &#123;\n    <span class=\"hljs-attr\">&quot;registerUser&quot;</span>: &#123;\n      <span class=\"hljs-attr\">&quot;success&quot;</span>: <span class=\"hljs-literal\">true</span>,\n      <span class=\"hljs-attr\">&quot;comments&quot;</span>: <span class=\"hljs-literal\">null</span>\n    &#125;\n  &#125;\n&#125;</code></pre>\n<p>If we try to create another user with the same login, we should receive a clear error:</p>\n<pre><code class=\"hljs json\">&#123;\n  <span class=\"hljs-attr\">&quot;data&quot;</span>: &#123;\n    <span class=\"hljs-attr\">&quot;registerUser&quot;</span>: &#123;\n      <span class=\"hljs-attr\">&quot;success&quot;</span>: <span class=\"hljs-literal\">false</span>,\n      <span class=\"hljs-attr\">&quot;comments&quot;</span>: [\n        <span class=\"hljs-string\">&quot;A user is already registered for this email/username&quot;</span>,\n        <span class=\"hljs-string\">&quot;Do you want to sign in instead ?&quot;</span>\n      ]\n    &#125;\n  &#125;\n&#125;</code></pre>\n<p>We also need a mechanism to allow users to login. So let us add another mutation where we can pass in the credentials are retrieve a JWT token:</p>\n<pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> me.lorefnon.sample.service\n\n<span class=\"hljs-keyword\">import</span> io.vertx.core.Future\n<span class=\"hljs-keyword\">import</span> me.lorefnon.sample.generated.tables.daos.UserDao\n<span class=\"hljs-keyword\">import</span> javax.inject.Inject\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">UserLoginService</span> <span class=\"hljs-meta\">@Inject</span> <span class=\"hljs-keyword\">constructor</span></span>(\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> userDao: UserDao,\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> passwordEncryptionService: PasswordEncryptionService,\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> authTokenService: AuthTokenService\n) &#123;\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">login</span><span class=\"hljs-params\">(name: <span class=\"hljs-type\">String</span>, password: <span class=\"hljs-type\">String</span>)</span></span>: Future&lt;String?&gt; =\n        userDao.findOneByName(name).map &#123;\n            it?.let &#123; user -&gt;\n                <span class=\"hljs-keyword\">if</span> (passwordEncryptionService.verify(password, user.password)) user\n                <span class=\"hljs-keyword\">else</span> <span class=\"hljs-literal\">null</span>\n            &#125;?.let &#123; user -&gt;\n                authTokenService.getToken(user.name)\n            &#125;\n        &#125;\n&#125;</code></pre>\n<p>Let&#39;s add that to our GraphQL module similar to the registration field: </p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">package</span> me.lorefnon.sample.module\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-16\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">11 lines collapsed (Imports)</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.GraphQL\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.schema.idl.RuntimeWiring.newRuntimeWiring\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.schema.idl.SchemaGenerator\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.schema.idl.SchemaParser\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> dagger.Module\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> dagger.Provides\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.schema.idl.TypeRuntimeWiring\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> io.vertx.ext.web.handler.graphql.schema.VertxDataFetcher\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> me.lorefnon.sample.service.UserLoginService\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> me.lorefnon.sample.service.UserRegistrationService\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-16\"><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> javax.inject.Singleton\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-meta\">@Module</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">GraphQLModule</span> </span>{\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Provides</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-meta\">@Singleton</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">provideGraphQL</span><span class=\"hljs-params\">(\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        userRegistrationService: <span class=\"hljs-type\">UserRegistrationService</span>,\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        userLoginService: <span class=\"hljs-type\">UserLoginService</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    )</span></span> = GraphQLBuilder(\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        userRegistrationService,\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        userLoginService\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    ).build()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-keyword\">inner</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">GraphQLBuilder</span></span>(\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> userRegistrationService: UserRegistrationService,\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> userLoginService: UserLoginService\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    ) {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">build</span><span class=\"hljs-params\">()</span></span>: GraphQL = GraphQL\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .newGraphQL(buildExecutableSchema())\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .build()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">val</span> rawSchema = <span class=\"hljs-string\">&quot;&quot;&quot;\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            type Query {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                hello: String\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    \n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            type Mutation {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                registerUser(\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    username: String!, \n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    email: String!, \n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    password: String!\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                ): RegistrationResult!\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                login(username: String!, password: String!): String\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    \n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-17\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">4 lines collapsed</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">            type RegistrationResult {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">                success: Boolean!\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">                comments: [String]\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        &quot;&quot;&quot;</span>.trimIndent()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">buildRuntimeWiring</span><span class=\"hljs-params\">()</span></span> = newRuntimeWiring()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .type(<span class=\"hljs-string\">&quot;Query&quot;</span>) {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                it.dataFetcher(<span class=\"hljs-string\">&quot;hello&quot;</span>) { <span class=\"hljs-string\">&quot;world&quot;</span> }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .type(<span class=\"hljs-string\">&quot;Mutation&quot;</span>) {\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                it.associateRegisterUserMutation()\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                it.associateLoginMutation()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            .build()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-17\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">6 lines collapsed</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> TypeRuntimeWiring.Builder.<span class=\"hljs-title\">associateRegisterUserMutation</span><span class=\"hljs-params\">()</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">            dataFetcher(<span class=\"hljs-string\">&quot;registerUser&quot;</span>, VertxDataFetcher.create { env -&gt;\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-keyword\">val</span> username = env.getArgument&lt;String&gt;(<span class=\"hljs-string\">&quot;username&quot;</span>)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-keyword\">val</span> email = env.getArgument&lt;String&gt;(<span class=\"hljs-string\">&quot;email&quot;</span>)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-keyword\">val</span> password = env.getArgument&lt;String&gt;(<span class=\"hljs-string\">&quot;password&quot;</span>)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">                userRegistrationService.registerUser(username, email, password)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-17\"><td style=\"border:none\" class=\"hlcode-code-cell\">            })\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> TypeRuntimeWiring.Builder.<span class=\"hljs-title\">associateLoginMutation</span><span class=\"hljs-params\">()</span></span> =\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            dataFetcher(<span class=\"hljs-string\">&quot;login&quot;</span>, VertxDataFetcher.create { env -&gt;\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-keyword\">val</span> username = env.getArgument&lt;String&gt;(<span class=\"hljs-string\">&quot;username&quot;</span>)\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-keyword\">val</span> password = env.getArgument&lt;String&gt;(<span class=\"hljs-string\">&quot;password&quot;</span>)\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                userLoginService.login(username, password)\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            })\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">buildExecutableSchema</span><span class=\"hljs-params\">()</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            SchemaGenerator().makeExecutableSchema(parseSchema(), buildRuntimeWiring())\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">parseSchema</span><span class=\"hljs-params\">()</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            SchemaParser().parse(rawSchema)\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">}\n</td></tr></table></code></pre>\n\n<p>An invocation of this API looks like this:</p>\n<pre><code class=\"hljs graphql\">mutation &#123;\n  login(username: &quot;lorefnon&quot;, password: &quot;password&quot;)\n&#125;</code></pre>\n<pre><code class=\"hljs json\">&#123;\n  <span class=\"hljs-attr\">&quot;data&quot;</span>: &#123;\n    <span class=\"hljs-attr\">&quot;login&quot;</span>: <span class=\"hljs-string\">&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJtZS5sb3JlZm5vbi5zYW1wbGUiLCJ1c2VyIjoibG9yZWZub24ifQ.vJNjffx0dMAqoORfXlf-dUF6cAhwMfTPLeZzxB632_k&quot;</span>\n  &#125;\n&#125;</code></pre>\n<p>In the next post we will utilize this API to secure other fields in our GraphQL API.</p>\n",
            "tags": [
                "GraphQL",
                "Kotlin",
                "Vert.X",
                "Vert.X-Web",
                "Backend-development",
                "API-development"
            ]
        },
        {
            "id": "https://lorefnon.me/2021/03/19/Using-apollo-batch-link-selectively/",
            "url": "https://lorefnon.me/2021/03/19/Using-apollo-batch-link-selectively/",
            "title": "Using Apollo Batch Link selectively",
            "date_published": "2021-03-19T00:00:00.000Z",
            "content_html": "<p>In a <a href=\"/2021/03/18/Using-apollo-file-link-and-batch-link-simultaneously/\">previous post</a> we have explored the concept of <a href=\"https://www.apollographql.com/docs/react/api/link/introduction/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Links</a> in Apollo and usage of <code>ApolloLink.split</code> for routing requests selectively towards one of multiple terminating links.</p>\n<p>This utility is also useful when we want to selectively batch our operations. </p>\n<p>The caveat with <a href=\"https://www.apollographql.com/docs/react/api/link/apollo-link-batch-http/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Apollo batch-link</a> is that, the entire batch is delivered only once the slowest operation in the batch completes.</p>\n<p>If we know ahead of time that some of our operations are expected to take longer time (We may at times be ok with that because they don&#39;t impact the user experience) then we can exclude them from batching.</p>\n<p>The link selector predicate we pass to ApolloLink.split can look at the operation name and decide whether to route the request to BatchLink or normal HttpLink.</p>\n<pre><code class=\"hljs js\"><span class=\"hljs-keyword\">import</span> &#123;\n  ApolloClient,\n  InMemoryCache,\n  ApolloLink,\n  Operation,\n  HttpLink,\n&#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@apollo/client&#x27;</span>;\n\n<span class=\"hljs-keyword\">const</span> httpLink = <span class=\"hljs-keyword\">new</span> HttpLink(&#123;\n  uri: <span class=\"hljs-string\">&quot;/graphql&quot;</span>\n  <span class=\"hljs-comment\">// ...Additional options</span>\n&#125;);\n\n<span class=\"hljs-keyword\">const</span> batchLink = <span class=\"hljs-keyword\">new</span> BatchHttpLink(&#123;\n    batchInterval: <span class=\"hljs-number\">250</span>\n&#125;);\n\n<span class=\"hljs-keyword\">const</span> operationBatchingBlacklist = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>&lt;string&gt;();\noperationBatchingBlacklist.add(<span class=\"hljs-string\">&quot;someExpensiveOperation&quot;</span>);\n\n<span class=\"hljs-keyword\">const</span> mediatorLink = ApolloLink.split(\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">shouldBatchRequests</span>(<span class=\"hljs-params\">&#123; operationName &#125;: Operation</span>) </span>&#123;\n    <span class=\"hljs-keyword\">return</span> !operationBatchingBlacklist.has(operationName);\n  &#125;,\n  batchLink,\n  httpLink\n);\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> client = <span class=\"hljs-keyword\">new</span> ApolloClient(&#123;\n  uri: <span class=\"hljs-string\">&#x27;/graphql&#x27;</span>,\n  link: mediatorLink\n&#125;);</code></pre>",
            "tags": [
                "Apollo",
                "GraphQL"
            ]
        },
        {
            "id": "https://lorefnon.me/2021/03/18/Using-apollo-file-link-and-batch-link-simultaneously/",
            "url": "https://lorefnon.me/2021/03/18/Using-apollo-file-link-and-batch-link-simultaneously/",
            "title": "Using Apollo Upload Link and Batch Link together",
            "date_published": "2021-03-18T00:00:00.000Z",
            "content_html": "<p>Apollo GraphQL client offers generic extensibility of the client-server interaction through a &quot;Link&quot; API. </p>\n<p>From the <a href=\"https://www.apollographql.com/docs/react/api/link/introduction/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">official docs</a>, the high level idea is: </p>\n<blockquote>\n<p>The Apollo Link library helps you customize the flow of data between Apollo Client and your GraphQL server. You can define your client&#39;s network behavior as a chain of link objects that execute in a sequence</p>\n</blockquote>\n<p>This is conceptually pretty similar to middlewares in server-side routing libraries like express.</p>\n<p>Links enable us to extend the capabilities of the graphql client in interesting ways.</p>\n<p><a href=\"https://www.npmjs.com/package/apollo-upload-client\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">upload link</a> for example, uses an unofficial (but widely adopted among server implementation) <a href=\"https://github.com/jaydenseric/graphql-multipart-request-spec\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">extension</a> for integrating file uploads in GraphQL API. </p>\n<p><a href=\"https://www.apollographql.com/docs/react/api/link/apollo-link-batch-http/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Batch link</a> is another  very useful link which is able to transparently combine multiple GraphQL operations into a single HTTP request without any code-change on the side of API invoker component.</p>\n<p>However, the problem when using both of them in the same application, is that they are both terminating links. So we can not just add them both to our ApolloClient and call it a day. Whichever comes first, terminates the request and the other never gets executed.</p>\n<p>However, batch link is particularly useful primarily for queries, and upload link is useful for mutations. So we simply needs a mediator that reroutes the request to one of the two after looking at the incoming request. </p>\n<p>This is made very easy by <code>ApolloLink.split</code> function: </p>\n<pre><code class=\"hljs js\"><span class=\"hljs-keyword\">import</span> &#123;\n  ApolloClient,\n  InMemoryCache,\n  ApolloLink,\n  Operation,\n  NextLink,\n&#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@apollo/client&#x27;</span>;\n\n<span class=\"hljs-keyword\">const</span> batchLink = <span class=\"hljs-keyword\">new</span> BatchHttpLink(batchLinkOptions);\n\n<span class=\"hljs-keyword\">const</span> uploadLink = createUploadLink(uploadLinkOptions);\n\n<span class=\"hljs-comment\">// This split is needed because both batchLink and uploadLink are</span>\n<span class=\"hljs-comment\">// terminating links</span>\n<span class=\"hljs-comment\">//</span>\n<span class=\"hljs-keyword\">const</span> mediatorLink = ApolloLink.split(\n  hasFile,\n  batchLink,\n  uploadLink\n);</code></pre>\n<p>Here <code>hasFile</code> is a function that can return true/false depending on which of the subsequent links is to be selected. </p>\n<p>A simple implementation of <code>hasFile</code> can look like: </p>\n<pre><code class=\"hljs js\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">hasFile</span>(<span class=\"hljs-params\">operation</span>) </span>&#123;\n    <span class=\"hljs-comment\">// A single GraphQL operation can comprise of a combination of multiple queries and mutation</span>\n    <span class=\"hljs-keyword\">if</span> (operation.query.definitions.find(<span class=\"hljs-function\"><span class=\"hljs-params\">it</span> =&gt;</span> it.operation === <span class=\"hljs-string\">&#x27;mutation&#x27;</span>)) &#123;\n        <span class=\"hljs-comment\">// Check if there is atleast one mutation present</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n    &#125;\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n&#125;</code></pre>\n<p>We have access to the complete operation object here, so we can also take a decision based on the name of the operation, variables we receive etc.</p>\n<p>Now, instead of passing either of these links to the ApolloClient options, we can pass the mediator link instead:</p>\n<pre><code class=\"hljs js\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> client = <span class=\"hljs-keyword\">new</span> ApolloClient(&#123;\n  uri: <span class=\"hljs-string\">&#x27;/graphql&#x27;</span>,\n  link: mediatorLink,\n  <span class=\"hljs-comment\">// ... other options</span>\n&#125;);</code></pre>",
            "tags": [
                "Apollo",
                "GraphQL"
            ]
        },
        {
            "id": "https://lorefnon.me/2021/02/01/Building-GraphQL-APIs-powered-by-Vert-x-jOOQ-Kotlin-I/",
            "url": "https://lorefnon.me/2021/02/01/Building-GraphQL-APIs-powered-by-Vert-x-jOOQ-Kotlin-I/",
            "title": "Building GraphQL APIs powered by Vert.x, Dagger, jOOQ & Kotlin - I",
            "date_published": "2021-02-01T00:00:00.000Z",
            "content_html": "<p>This is the first in a series of articles where we explore a JVM based stack comprising of Kotlin, Vert.X, Dagger and jOOQ for development of GraphQL APIs.</p>\n<h1 id=\"About-GraphQL\"><a href=\"#About-GraphQL\" class=\"headerlink\" title=\"About GraphQL\"></a>About GraphQL</h1><p>GraphQL is an application level query language which can, as of this writing, be implemented and consumed in most popular languages.</p>\n<p>Quoting from the <a href=\"https://graphql.org/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">official site</a>: </p>\n<blockquote>\n<p>GraphQL is a query language for APIs and a runtime for fulfilling those queries with your existing data. \nGraphQL provides a complete and understandable description of the data in your API, \ngives clients the power to ask for exactly what they need and nothing more, \nmakes it easier to evolve APIs over time, and enables powerful developer tools.</p>\n</blockquote>\n<p>If you are unfamiliar with GraphQL from a consumer perspective, \nit might be better to go through the <a href=\"https://graphql.org/learn/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">official introduction</a> first. This post assumes user-level familiarity.</p>\n<h1 id=\"GraphQL-in-Java\"><a href=\"#GraphQL-in-Java\" class=\"headerlink\" title=\"GraphQL in Java\"></a>GraphQL in Java</h1><p>When it comes to JVM, <a href=\"http://graphql-java.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">graphql-java</a> is the most mature GraphQL implementation, \nand is what we use in this article. However, GraphQL java cares only about the execution of a GraphQL request given a \nschema and associated handlers. In a realistic application we&#39;d want to expose a GraphQL over an HTTP endpoint. \nSo, it is common to pair graphql-java with a web framework or HTTP handler. \nOur choice for the latter in the context of this post is Vert.x-Web.</p>\n<h1 id=\"About-Vert-X-amp-Vert-X-Web\"><a href=\"#About-Vert-X-amp-Vert-X-Web\" class=\"headerlink\" title=\"About Vert.X &amp; Vert.X-Web\"></a>About Vert.X &amp; Vert.X-Web</h1><p>Vert.X is a toolkit for building event-driven reactive services and Vert.X-web leverages the lower level toolkit for building web applications.</p>\n<p>From the <a href=\"https://vertx.io/docs/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">official docs</a>: </p>\n<blockquote>\n<p><strong>Vert.x Core</strong></p>\n</blockquote>\n<blockquote>\n<p>The Vert.x core APIs contain the backbone for writing Vert.x applications and low-level support for HTTP, TCP, UDP, file system, \nasynchronous streams and many other building blocks. It is also used by many other components of Vert.x.</p>\n</blockquote>\n<blockquote>\n<p><strong>Vert.x Web</strong></p>\n</blockquote>\n<blockquote>\n<p>A tool-kit for writing sophisticated modern web applications and HTTP microservices.</p>\n</blockquote>\n<p>As we will see below, Vert.X and graphql-java work very well together because the graphql-java natively supports asynchronous \nexecution strategy which fits perfectly with the asynchronous event-driven style that Vert.X facilitates. </p>\n<h1 id=\"jOOQ-for-persistence\"><a href=\"#jOOQ-for-persistence\" class=\"headerlink\" title=\"jOOQ for persistence\"></a>jOOQ for persistence</h1><p>A real-world application would also need to persist its data, and for that our solution of choice here is <a href=\"https://www.jooq.org/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">jOOQ</a>, \na type-safe SQL builder for Java. </p>\n<p>jOOQ is commonly used in a database-first manner where the database is managed through DB centric tools and the DAO (Data Access Object) layer \nto interface with the database from application code is generated by introspecting the database.</p>\n<p>The generators which come with jOOQ don&#39;t support Vert.X out of the box, but the Vert.X core is very flexible and the \n<a href=\"https://github.com/jklingsporn/vertx-jooq\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">vertx-jooq project</a> provides code-generation support that bridges the two. </p>\n<h1 id=\"Dagger-for-dependency-injection\"><a href=\"#Dagger-for-dependency-injection\" class=\"headerlink\" title=\"Dagger for dependency injection\"></a>Dagger for dependency injection</h1><p>Vert.X itself is quite unopinionated regarding the organization of code and how services are integrated. It does not prescribe any specific dependency injection solution. However, from my experience of building backend applications, having a DI solution significantly helps towards testability of the application and reducing coupling among components.</p>\n<p>Our choice of DI framework is <a href=\"https://dagger.dev/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Dagger</a>. In contrast to many other popular DI/IoC solutions, dagger operates through compile time code generation, reducing the reflection overhead causing startup delay. We will cover dagger specific aspects in <a href=\"/2021/02/05/Building-GraphQL-APIs-powered-by-Vert-x-jOOQ-Kotlin-II/\">second part</a> of this series, however for users unfamiliar with the concepts of DI, the official <a href=\"https://dagger.dev/users-guide\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">user documentation</a> and <a href=\"https://medium.com/@yostane/dependency-injection-with-dagger-2-inject-and-provides-ce21f7449ec5\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">this post</a> by Yassine Benabbas may be better starting points.</p>\n<h1 id=\"Why-this-particular-combination\"><a href=\"#Why-this-particular-combination\" class=\"headerlink\" title=\"Why this particular combination ?\"></a>Why this particular combination ?</h1><p>All four of these libraries, provide low-level control to the developer and don&#39;t impose superfluous \nhigh level abstractions or indirections that get in the way of performance or debuggability.</p>\n<p>So we end up with code that is easy to reason through, does not require us to jump through unnecessary indirections \nand does not require future maintainers to familiarize themselves with an onerous set of conventions \nbefore they can get productive with the stack.</p>\n<h1 id=\"About-Kotlin\"><a href=\"#About-Kotlin\" class=\"headerlink\" title=\"About Kotlin\"></a>About Kotlin</h1><p>Lastly, <a href=\"https://kotlinlang.org/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Kotlin</a> is a language from <a href=\"https://www.jetbrains.com/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">JetBrains</a> that targets (among other platforms) \nthe JVM and has excellent interop with Java. So even though all of the above libraries are written in java, \nwe will be able to use them in Kotlin without any additional wrappers and take advantage of the great tooling support by JetBrains. </p>\n<p>I am increasingly leaning towards towards Kotlin for most of my backend work because I find kotlin code to be a great blend of conciseness, \nreadability and type safety. Also, being a part of the wider JVM ecosystem, kotlin lends itself well to scalable performant applications. </p>\n<h1 id=\"Getting-our-feet-wet\"><a href=\"#Getting-our-feet-wet\" class=\"headerlink\" title=\"Getting our feet wet\"></a>Getting our feet wet</h1><p>The official site recommends using <a href=\"https://start.vertx.io/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">https://start.vertx.io/</a> as a means to bootstrap our application. This site provides a web \ninterface to generate the scaffold for a java or kotlin application using Vert.X. </p>\n<p>However, this generator doesn&#39;t completely address the needs for our chosen stack, because while we intend to write application \ncode in Kotlin, the vertx-jooq project generates java code for interfacing with the database and hence we&#39;d want our project \nto be able to compile both java and kotlin. </p>\n<p>Following pom.xml, modelled after the kotlin official recommendations for mixed maven projects, \nprovides us all we need to have a hybrid java &amp; kotlin project: </p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">project</span> <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://maven.apache.org/POM/4.0.0&quot;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">         <span class=\"hljs-attr\">xmlns:xsi</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">         <span class=\"hljs-attr\">xsi:schemaLocation</span>=<span class=\"hljs-string\">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">modelVersion</span>&gt;</span>4.0.0<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">modelVersion</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>me.lorefnon<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>test<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>1.0.0-SNAPSHOT<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">properties</span>&gt;</span>\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-1\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">18 lines collapsed (properties)</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">project.build.sourceEncoding</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">kotlin.version</span>&gt;</span>1.4.21<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">kotlin.version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">kotlin.compiler.incremental</span>&gt;</span>true<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">kotlin.compiler.incremental</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maven-shade-plugin.version</span>&gt;</span>3.2.4<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maven-shade-plugin.version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maven-surefire-plugin.version</span>&gt;</span>2.22.2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maven-surefire-plugin.version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">exec-maven-plugin.version</span>&gt;</span>3.0.0<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">exec-maven-plugin.version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">vertx.version</span>&gt;</span>4.0.0<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">vertx.version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">junit-jupiter.version</span>&gt;</span>5.7.0<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">junit-jupiter.version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">main.verticle</span>&gt;</span>me.lorefnon.mastishka.MainVerticle<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">main.verticle</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">launcher.class</span>&gt;</span>io.vertx.core.Launcher<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">launcher.class</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">jjwt.version</span>&gt;</span>0.11.2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">jjwt.version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maven.compiler.source</span>&gt;</span>11<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maven.compiler.source</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maven.compiler.target</span>&gt;</span>11<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maven.compiler.target</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maven.compiler.release</span>&gt;</span>11<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maven.compiler.release</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-1\"><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">kotlin.compiler.jvmTarget</span>&gt;</span>11<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">kotlin.compiler.jvmTarget</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">properties</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependencyManagement</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependencies</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.vertx<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>vertx-stack-depchain<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>${vertx.version}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">type</span>&gt;</span>pom<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">type</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">scope</span>&gt;</span>import<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">scope</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependencies</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependencyManagement</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependencies</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-comment\">&lt;!-- Vert.X related dependencies --&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.vertx<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>vertx-web-graphql<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.vertx<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>vertx-web<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.vertx<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>vertx-pg-client<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.vertx<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>vertx-lang-kotlin<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.vertx<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>vertx-redis-client<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.vertx<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>vertx-junit5<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">scope</span>&gt;</span>test<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">scope</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.junit.jupiter<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>junit-jupiter-api<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>${junit-jupiter.version}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">scope</span>&gt;</span>test<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">scope</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.junit.jupiter<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>junit-jupiter-engine<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>${junit-jupiter.version}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">scope</span>&gt;</span>test<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">scope</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-comment\">&lt;!-- Jooq related dependencies --&gt;</span>\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.jooq<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>jooq<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>3.13.3<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-comment\">&lt;!-- Library that provides Vert.X compatible code generation for jooq --&gt;</span>\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.github.jklingsporn<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>vertx-jooq-classic-reactive<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>6.1.1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#ffe1e7;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependencies</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">build</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">plugins</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-comment\">&lt;!-- Configuration for building hybrid java+kotlin project --&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.jetbrains.kotlin<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>kotlin-maven-plugin<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>${kotlin.version}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">executions</span>&gt;</span>\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-2\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">23 lines collapsed (Execution tags)</span></div></td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">id</span>&gt;</span>compile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">id</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goal</span>&gt;</span>compile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goal</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">configuration</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sourceDirs</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sourceDir</span>&gt;</span>${project.basedir}/src/main/kotlin<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">sourceDir</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sourceDir</span>&gt;</span>${project.basedir}/src/main/java<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">sourceDir</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">sourceDirs</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">configuration</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">id</span>&gt;</span>test-compile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">id</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goal</span>&gt;</span>test-compile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goal</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">configuration</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sourceDirs</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sourceDir</span>&gt;</span>${project.basedir}/src/test/kotlin<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">sourceDir</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sourceDir</span>&gt;</span>${project.basedir}/src/test/java<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">sourceDir</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">sourceDirs</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">configuration</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-2\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">executions</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>maven-compiler-plugin<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>3.8.1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">executions</span>&gt;</span>\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-3\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">21 lines collapsed (Execution tags)</span></div></td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">id</span>&gt;</span>default-compile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">id</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">phase</span>&gt;</span>none<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">phase</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">id</span>&gt;</span>default-testCompile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">id</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">phase</span>&gt;</span>none<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">phase</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">id</span>&gt;</span>java-compile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">id</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">phase</span>&gt;</span>compile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">phase</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goal</span>&gt;</span>compile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goal</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">id</span>&gt;</span>java-test-compile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">id</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">phase</span>&gt;</span>test-compile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">phase</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goal</span>&gt;</span>testCompile<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goal</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line hlcode-line-fold hidden hlcode-line-highlight\" data-fold-id=\"hlcode-fold-3\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">executions</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-comment\">&lt;!-- Configuration for running jooq-codegen-maven as part of build lifecycle to generate the DAO classes for type-safe DB access --&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.jooq<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>jooq-codegen-maven<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>3.13.3<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">executions</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goal</span>&gt;</span>generate<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goal</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">              <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">executions</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">              <span class=\"hljs-comment\">&lt;!-- Our generator needs to connect to the database for inspecting the schema, so we need the postgres jdbc dependencies\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                   even though our application itself will use Vert.x reactive postgres driver instead of jdbc --&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependencies</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.postgresql<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>postgresql<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>42.2.2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>io.github.jklingsporn<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>vertx-jooq-generate<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>6.1.1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">              <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependencies</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">              <span class=\"hljs-comment\">&lt;!-- Jooq generator configuration: format is the same as for the standalone code generator --&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">              <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">configuration</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-comment\">&lt;!-- JDBC connection parameters --&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">jdbc</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">driver</span>&gt;</span>org.postgresql.Driver<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">driver</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">url</span>&gt;</span>jdbc:postgresql://localhost:5432/test_development<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">url</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">user</span>&gt;</span>lorefnon<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">user</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-comment\">&lt;!--&lt;password/&gt; --&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">jdbc</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-comment\">&lt;!-- Generator parameters --&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">generator</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">name</span>&gt;</span>io.github.jklingsporn.vertx.jooq.generate.classic.ClassicReactiveVertxGenerator<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">name</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">database</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">name</span>&gt;</span>org.jooq.meta.postgres.PostgresDatabase<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">name</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">includes</span>&gt;</span>.*<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">includes</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">inputSchema</span>&gt;</span>public<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">inputSchema</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">outputSchema</span>&gt;</span>public<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">outputSchema</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">unsignedTypes</span>&gt;</span>false<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">unsignedTypes</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">database</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">target</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">packageName</span>&gt;</span>me.lorefnon.test.generated<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">packageName</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">directory</span>&gt;</span>src/main/java<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">directory</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">target</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">generate</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">interfaces</span>&gt;</span>true<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">interfaces</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">daos</span>&gt;</span>true<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">daos</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fluentSetters</span>&gt;</span>true<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fluentSetters</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">generate</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">strategy</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">name</span>&gt;</span>io.github.jklingsporn.vertx.jooq.generate.VertxGeneratorStrategy<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">name</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">strategy</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">generator</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">              <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">configuration</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#dbffc3;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>maven-shade-plugin<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>${maven-shade-plugin.version}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none\" class=\"hlcode-fold-collapsed\" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" colspan=\"1\"><div class=\"hlcode-fold-handle\" data-fold-id=\"hlcode-fold-4\"><svg height=\"21\" viewBox=\"0 0 21 21\" width=\"21\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" transform=\"translate(4 4)\">\n            <path d=\"m10.5.5h-8c-1.1045695 0-2 .8954305-2 2v8c0 1.1045695.8954305 2 2 2h8c1.1045695 0 2-.8954305 2-2v-8c0-1.1045695-.8954305-2-2-2z\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n            <path d=\"m6.5 3.5v6.056\"/>\n            <path d=\"m6.5 3.5v6\" transform=\"matrix(0 1 -1 0 13 0)\"/>\n        </g>\n    </svg><span class=\"hlcode-fold-text\">24 lines collapsed (Maven Shade Plugin Configuration)</span></div></td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">executions</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">phase</span>&gt;</span>package<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">phase</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">goal</span>&gt;</span>shade<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goal</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">goals</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">configuration</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">transformers</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">transformer</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                        <span class=\"hljs-attr\">implementation</span>=<span class=\"hljs-string\">&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">manifestEntries</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Main-Class</span>&gt;</span>${launcher.class}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Main-Class</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Main-Verticle</span>&gt;</span>${main.verticle}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Main-Verticle</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">manifestEntries</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">transformer</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">transformer</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                                        <span class=\"hljs-attr\">implementation</span>=<span class=\"hljs-string\">&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;</span>/&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">transformers</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactSet</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactSet</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">outputFile</span>&gt;</span>${project.build.directory}/${project.artifactId}-${project.version}-fat.jar\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">outputFile</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">configuration</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">execution</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line hlcode-line-fold hidden \" data-fold-id=\"hlcode-fold-4\"><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">executions</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>maven-surefire-plugin<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>${maven-surefire-plugin.version}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-comment\">&lt;!-- We can use mvn exec:java to run development server --&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.codehaus.mojo<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>exec-maven-plugin<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>${exec-maven-plugin.version}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">configuration</span>&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-comment\">&lt;!-- Note that the main class is a Vert.X launcher class which will execute the verticles defined in \n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                        our application --&gt;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">mainClass</span>&gt;</span>io.vertx.core.Launcher<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">mainClass</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">arguments</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">argument</span>&gt;</span>run<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">argument</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">argument</span>&gt;</span>${main.verticle}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">argument</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">arguments</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">configuration</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">plugin</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">plugins</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">build</span>&gt;</span>\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">project</span>&gt;</span>\n</td></tr></table></code></pre>\n\n<p>With this in place, everytime we build our project, the jooq integration will generate the data access layer \nfor our database by inspecting the database. </p>\n<h1 id=\"Our-first-verticle\"><a href=\"#Our-first-verticle\" class=\"headerlink\" title=\"Our first verticle\"></a>Our first verticle</h1><p>The primary unit of deployment in Vert.X is a Verticle. <a href=\"https://vertx.io/docs/vertx-core/java/#_verticles\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">The docs</a> explain this in more detail: </p>\n<blockquote>\n<p>Verticles are chunks of code that get deployed and run by Vert.x. A Vert.x instance maintains N event loop threads (where N by default is core*2) by default</p>\n</blockquote>\n<blockquote>\n<p>You can think of a verticle as a bit like an actor in the <a href=\"https://en.wikipedia.org/wiki/Actor_model\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Actor Model</a>.</p>\n</blockquote>\n<blockquote>\n<p>An application would typically be composed of many verticle instances running in the same Vert.x instance at the same time. \nThe different verticle instances communicate with each other by sending messages on the <a href=\"https://vertx.io/docs/vertx-core/java/#event_bus\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">event bus</a>.</p>\n</blockquote>\n<p>So, this is what our first Verticle looks like: </p>\n<pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> tech.lorefnon.test\n\n<span class=\"hljs-keyword\">import</span> io.vertx.core.AbstractVerticle\n<span class=\"hljs-keyword\">import</span> io.vertx.core.Promise\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MainVerticle</span> : <span class=\"hljs-type\">AbstractVerticle</span></span>() &#123;\n\n    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">start</span><span class=\"hljs-params\">(startPromise: <span class=\"hljs-type\">Promise</span>&lt;<span class=\"hljs-type\">Void</span>&gt;)</span></span> &#123;\n        <span class=\"hljs-keyword\">val</span> router = setupRouter(vertx) <span class=\"hljs-comment\">// More on this below</span>\n        vertx\n            .createHttpServer()\n            .requestHandler(router)\n            .listen(<span class=\"hljs-number\">8888</span>) &#123; http -&gt;\n                <span class=\"hljs-keyword\">if</span> (http.succeeded()) &#123;\n                    startPromise.complete()\n                    println(<span class=\"hljs-string\">&quot;HTTP server started on port 8888&quot;</span>)\n                &#125; <span class=\"hljs-keyword\">else</span> &#123;\n                    startPromise.fail(http.cause());\n                &#125;\n            &#125;\n    &#125;\n&#125;</code></pre>\n<p>Note that all our setup is explicit in the code and there is no hidden magic going on.</p>\n<p>Our <code>setupRouter</code> function will be responsible for bootstrapping the endpoints which handle the GraphQL requests: </p>\n<pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">import</span> io.vertx.core.Vertx\n<span class=\"hljs-keyword\">import</span> io.vertx.ext.web.Router\n<span class=\"hljs-keyword\">import</span> io.vertx.ext.web.handler.BodyHandler\n<span class=\"hljs-keyword\">import</span> io.vertx.ext.web.handler.graphql.GraphQLHandler\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">setupRouter</span><span class=\"hljs-params\">(vertx: <span class=\"hljs-type\">Vertx</span>)</span></span> =\n    Router.router(vertx).also &#123; r -&gt;\n        r.route().handler(BodyHandler.create())\n        r.post(<span class=\"hljs-string\">&quot;/graphql&quot;</span>).handler(\n            GraphQLHandler.create(\n                setupGraphQL() <span class=\"hljs-comment\">// More on this below</span>\n            )\n        )\n    &#125;</code></pre>\n<p><code>BodyHandler</code> is needed to parse POST request body. </p>\n<p>Our <code>setupGraphQL</code> function is responsible for wiring up our GraphQL Schema and the resolvers</p>\n<pre><code class=\"hljs\"><table class=\"hlcode-table\"><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.GraphQL\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.execution.*\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.schema.idl.RuntimeWiring.newRuntimeWiring\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.schema.idl.SchemaGenerator\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> graphql.schema.idl.SchemaParser\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">import</span> io.vertx.ext.web.handler.graphql.schema.VertxDataFetcher\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">setupGraphQL</span><span class=\"hljs-params\">()</span></span> = GraphQL\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    .newGraphQL(buildExecutableSchema())\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    .build()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-keyword\">val</span> rawSchema = <span class=\"hljs-string\">&quot;&quot;&quot;\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    type Query {\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        hello: String\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">&quot;&quot;&quot;</span>.trimIndent()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">buildRuntimeWiring</span><span class=\"hljs-params\">()</span></span> = newRuntimeWiring()\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    .type(<span class=\"hljs-string\">&quot;Query&quot;</span>) {\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        it.dataFetcher(<span class=\"hljs-string\">&quot;hello&quot;</span>) {\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-comment\">// Here is the logic for resolving our hello field in Query type</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-comment\">//</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-comment\">// For now we just return a static string</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">            <span class=\"hljs-string\">&quot;world&quot;</span>\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">        }\n</td></tr><tr style=\"border:none;background:#fffacd;\" class=\"hlcode-line  hlcode-line-highlight\" ><td style=\"border:none\" class=\"hlcode-code-cell\">    }\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    .build()\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">buildExecutableSchema</span><span class=\"hljs-params\">()</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    SchemaGenerator().makeExecutableSchema(parseSchema(), buildRuntimeWiring())\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">parseSchema</span><span class=\"hljs-params\">()</span></span> =\n</td></tr><tr style=\"border:none;\" class=\"hlcode-line  \" ><td style=\"border:none\" class=\"hlcode-code-cell\">    SchemaParser().parse(rawSchema)\n</td></tr></table></code></pre>\n\n<p>Our <code>rawSchema</code> variable contains our very minimal GraphQL schema (defined using <a href=\"https://www.digitalocean.com/community/tutorials/graphql-graphql-sdl\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">GraphQL SDL</a>)</p>\n<p>Our <code>buildRuntimeWiring</code> function specifies the resolvers (called <code>dataFetcher</code> in graphql-java terminology) for our dynamic GraphQL fields. </p>\n<p>Finally we combine the schema with the runtime wiring (set of resolvers associated with corresponding fields) to form an executable schema \nwhich the <code>GraphQLHandler</code> from <code>vertx-graphql</code> package can use to setup the HTTP endpoint which we have mapped to the <code>/graphql</code> route in our \n<code>setupRouter</code> function.</p>\n<p>As we saw in the pom.xml we have an exec:java goal defined. So we can use <code>mvn compile exec:java</code> to run our server. </p>\n<p>If we see following message in the server logs, that means we are all good and our server is up and running: </p>\n<pre><code class=\"hljs plain\">Feb 01, 2021 12:25:02 AM io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer\nINFO: Succeeded in deploying verticle\nHTTP server started on port 8888</code></pre>\n<p>We can try out our API using a GraphQL client. I like using <a href=\"https://altair.sirmuel.design/\" target=\"_blank\" rel=\"noopener external nofollow noreferrer\">Altair</a>.</p>\n<p><img src=\"/images/2020-02-01/graphql-altair-hello-world.png\" alt=\"Altair\" loading=\"lazy\"></p>\n<p>So we see that our simple API works and our field (<code>hello</code>) is resolved through the dataFetcher we have defined.</p>\n<p>For now, our minimal resolver returns a simple static string. In the <a href=\"/2021/02/05/Building-GraphQL-APIs-powered-by-Vert-x-jOOQ-Kotlin-II/\">next post</a> we will integrate a basic DI setup using Dagger, and in the in the subsequent one we will setup a signup and signin mechanism where our resolvers will connect to the database for persisting data.</p>\n",
            "tags": [
                "GraphQL",
                "Kotlin",
                "Vert.X",
                "Vert.X-Web",
                "Backend-development",
                "API-development"
            ]
        },
        {
            "id": "https://lorefnon.me/2019/12/10/using-graphql-code-generator-with-authenticated-endpoints/",
            "url": "https://lorefnon.me/2019/12/10/using-graphql-code-generator-with-authenticated-endpoints/",
            "title": "Using graphql-code-generator with authenticated endpoints",
            "date_published": "2019-12-10T00:00:00.000Z",
            "content_html": "<link rel=\"stylesheet\" href=\"/css/crayon.min.css\" >\n<link rel=\"stylesheet\" href=\"/css/crayon-flatui-light.css\" >\n\n\n\n\t<p>Dotan Simhaâ€™s <a class=\"wp-editor-md-post-content-link\" href=\"https://github.com/dotansimha/graphql-code-generator\">graphql-code-generator</a> is a really useful utility to generate integration code from GraphQL APIs for multiple languages.</p>\n<p>As outlined in <a class=\"wp-editor-md-post-content-link\" href=\"https://graphql-code-generator.com/docs/getting-started/codegen-config\">their docs</a>, using the graphql-codegen cli with static config is straightforward:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44630470f051302050\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44630470f051302050-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630470f051302050-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630470f051302050-3\">3</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44630470f051302050-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44630470f051302050-2\"><span class=\"crayon-v\">graphql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">codegen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">config</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">/</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">yml</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630470f051302050-3\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0024 seconds] -->\n<p></p>\n<p>This post outlines how to use the code-generator CLI when the API is authenticated.</p>\n<p><span id=\"more-646\"></span></p>\n<p>graphql-codegen uses <a class=\"wp-editor-md-post-content-link\" href=\"https://www.npmjs.com/package/cosmiconfig\">cosmiconfig</a> for loading the configuration. Thanks to cosmiconfig, this configuration can be a dynamic module instead of a static yaml/json file.</p>\n<p>So we can have arbitrary logic inside the module. For instance if our graphql API is protected by HTTP basic auth, we can prompt the user for credentials and send them as a header:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44630471b536280973\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-17\">17</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-19\">19</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-21\">21</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-23\">23</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-25\">25</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-27\">27</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-29\">29</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-31\">31</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-33\">33</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-35\">35</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-37\">37</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-39\">39</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5fba44630471b536280973-41\">41</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-2\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prompts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">require</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"prompts\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-3\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-4\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">promptCredentials</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">prompts</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'text'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'name'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">message</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Enter username\"</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'text'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'password'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">message</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Enter password\"</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-14\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-15\"><span class=\"crayon-v\">module</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">exports</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">async</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-e\">promptCredentials</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-17\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">overwrite</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">schema</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-21\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"http://localhost:9000/graphql\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-23\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">Authorization</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"Basic \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">Buffer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">from</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"base64\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-28\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-30\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-31\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">documents</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"components/**/*.graphql\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-32\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">generates</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-33\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"api/graphql.tsx\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-34\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">plugins</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-35\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"typescript\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-36\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"typescript-operations\"</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-37\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-38\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-39\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-40\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44630471b536280973-41\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0039 seconds] -->\n<p></p>\n<p></p>\n<p>So the next time we run <code>graphql-codegen --config ./path/to/config.js</code> we will be prompted for password.</p>\n<p>You can, of course, also do things like keep the credentials in an uncommitted file and then read them in the config file.</p>\n\n\n    ",
            "tags": [
                "GraphQL"
            ]
        },
        {
            "id": "https://lorefnon.me/2018/08/20/uploading-files-to-mongodb-gridfs-via-apollo-powered-graphql-api/",
            "url": "https://lorefnon.me/2018/08/20/uploading-files-to-mongodb-gridfs-via-apollo-powered-graphql-api/",
            "title": "Uploading files to MongoDB GridFS via Apollo powered GraphQL API",
            "date_published": "2018-08-20T00:00:00.000Z",
            "content_html": "<link rel=\"stylesheet\" href=\"/css/crayon.min.css\" >\n<link rel=\"stylesheet\" href=\"/css/crayon-flatui-light.css\" >\n\n\n\n\t<p>GraphQL multi-part request spec outlines a specification for multipart form requests in GraphQL. <a href=\"https://github.com/jaydenseric\">Jayden Seric</a>, the author of the spec, has also authored two libraries <a href=\"https://github.com/jaydenseric/apollo-upload-client\">apollo-upload-client</a> and <a href=\"https://github.com/jaydenseric/apollo-upload-server\">apollo-upload-server</a> which makes it effortless to integrate file uploads in Apollo Server.</p>\n<p><a href=\"https://docs.mongodb.com/manual/core/gridfs/\">GridFS</a> is a simple file system abstraction on top of MongoDB. This facilitates storage of large files (beyond BSON document size limit) in mongo database.</p>\n<p>This post outlines the minimal integration required to save the files uploaded through the GraphQL API to GridFS.</p>\n<p><span id=\"more-364\"></span></p>\n<p>We will use Koa as the HTTP server but the approach is applicable to any Apollo supported backend.</p>\n<p>The <a href=\"https://npm.im/apollo-server-koa\">Apollo-koa integration library</a> comes built in with apollo-upload-server, so if we initialize our Apollo server and configure it use koa server, it will automatically configure body parser and enable file uploads.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44b95f824925651077\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-17\">17</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-19\">19</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f824925651077-21\">21</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">Koa </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"koa\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-3\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ApolloServer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">gql</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"apollo-server-koa\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-4\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-5\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">graphQLServer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ApolloServer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-6\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">typeDefs</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Described below</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-7\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">resolvers</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">Query</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// ... add queries here</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">Mutation</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">addFile</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Described below</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// ... add other mutations here</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-15\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-16\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-17\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-18\"><span class=\"crayon-v\">graphQLServer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">applyMiddleware</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-19\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">server</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-20\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f824925651077-21\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0045 seconds] -->\n<p></p>\n<p>Apollo server <a href=\"https://github.com/apollographql/apollo-server/blob/fa6c973f3685fceea905acf259824005e0e0ffe2/packages/apollo-server-core/src/index.ts#L46-L47\">exports</a> an Upload scalar type which we can use in our typedefs:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44b95f832588453116\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f832588453116-17\">17</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-2\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">gql</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"apollo-server-koa\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-3\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-4\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">typeDefs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gql</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-5\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">File</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">_id</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ID</span><span class=\"crayon-o\">!</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">!</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">filename</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">!</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">mimetype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">!</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">encoding</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">!</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-11\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-12\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-13\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Mutation</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">uploadFile</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Upload</span><span class=\"crayon-o\">!</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">File</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-15\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-16\"><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f832588453116-17\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0017 seconds] -->\n<p></p>\n<p>Now our add file resolver is ready to accept the incoming file stream and can pass it on to GridFS:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44b95f835312978293\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f835312978293-16\">16</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">mongodb </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"mongodb\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-3\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-4\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addFile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">async</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">_parent</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-5\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stream</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mimetype</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">encoding</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-6\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bucket</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mongodb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">GridFSBucket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_db</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-7\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uploadStream</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bucket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">openUploadStream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-8\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">await </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Promise</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-i\">stream</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pipe</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">uploadStream</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">on</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"error\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">on</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"finish\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-13\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-14\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_id</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uploadStream</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mimetype</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">encoding</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-15\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f835312978293-16\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0030 seconds] -->\n<p></p>\n<p>In order to facilitate uploading of files from the client, we need to configure Apollo client to use an upload link:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44b95f839458028925\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-17\">17</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-19\">19</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-21\">21</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-23\">23</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-25\">25</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-27\">27</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-29\">29</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f839458028925-31\">31</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-2\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ApolloProvider</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"react-apollo\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-3\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ApolloClient</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"apollo-client\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-4\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">InMemoryCache</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"apollo-cache-inmemory\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-5\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">HttpLink</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"apollo-link-http\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-6\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">onError</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"apollo-link-error\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-7\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ApolloLink</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"apollo-link\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-8\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">createUploadLink</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"apollo-upload-client\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-9\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-10\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">client</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ApolloClient</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-11\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">link</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ApolloLink</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">from</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-12\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// Report errors to console in a user friendly format</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">onError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">graphQLErrors</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">networkError</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">graphQLErrors</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">graphQLErrors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">locations</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">path</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">GraphQL </span><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Message</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Location</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">locations</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Path</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-21\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">networkError</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">Network </span><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">networkError</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-23\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">createUploadLink</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">uri</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">process</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">env</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">APP_URL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/graphql\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">credentials</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"same-origin\"</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-28\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-29\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">cache</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InMemoryCache</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-30\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f839458028925-31\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0055 seconds] -->\n<p></p>\n<p>Note that using http link is no longer required, and any configuration options that could be passed to http link can be passed to <code>createUploadLink</code>. In fact, if http link is used before <code>createUploadLink</code> file uploads wonâ€™t work at all because http link is a terminal link and the upload link added after would not be used.</p>\n<p>Now we can upload files to our GraphQL endpoint using <code>Mutation</code> component.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44b95f83c771609500\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-17\">17</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-19\">19</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-21\">21</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-23\">23</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-25\">25</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-27\">27</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-29\">29</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-31\">31</div><div class=\"crayon-num\" data-line=\"crayon-5fba44b95f83c771609500-32\">32</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">gql </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"graphql-tag\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-3\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Mutation</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"react-apollo\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-4\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-5\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">UPLOAD_FILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gql</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-6\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">mutation</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Upload</span><span class=\"crayon-o\">!</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">uploadFile</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">_id</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-9\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-i\">filename</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-11\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-12\"><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-13\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-14\"><span class=\"crayon-e\">export </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-15\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">ApolloProvider </span><span class=\"crayon-v\">client</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-16\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">Mutation </span><span class=\"crayon-v\">mutation</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">UPLOAD_FILE</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">mutate</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">input</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-19\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"file\"</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">required</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-21\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">onChange</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">event</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">target</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">files</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-23\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">mutate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">variables</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">/&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-28\"><span class=\"crayon-c\">&nbsp;&nbsp;&nbsp;&nbsp;)}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-29\"><span class=\"crayon-c\">&nbsp;&nbsp;&lt;/M</span><span class=\"crayon-v\">utation</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-30\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ApolloProvider</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-31\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44b95f83c771609500-32\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0031 seconds] -->\n<p></p>\n<p>This concludes our server side as well as client side setup involved in connecting a file input field to mongodb gridfs.</p>\n\n\n    ",
            "tags": [
                "Apollo",
                "GraphQL",
                "MongoDB"
            ]
        }
    ]
}