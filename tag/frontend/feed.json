{
    "version": "https://jsonfeed.org/version/1",
    "title": "Icicles of Thought • All posts by \"frontend\" tag",
    "description": "",
    "home_page_url": "https://lorefnon.me",
    "items": [
        {
            "id": "https://lorefnon.me/2019/01/12/using-an-svg-grid-background-for-aligning-elements-in-web-page/",
            "url": "https://lorefnon.me/2019/01/12/using-an-svg-grid-background-for-aligning-elements-in-web-page/",
            "title": "Using an SVG grid background for aligning elements in web page",
            "date_published": "2019-01-12T00:00:00.000Z",
            "content_html": "<link rel=\"stylesheet\" href=\"/css/crayon.min.css\" >\n<link rel=\"stylesheet\" href=\"/css/crayon-flatui-light.css\" >\n\n\n\n\t<p>One of the recurring annoyances when designing websites is ensuring alignment of elements on a web page.</p>\n<p>Most design applications have the provision of an overlay grid. With very little effort we can add a simple grid to any web page and use it to ensure alignment of elements.</p>\n<p><span id=\"more-527\"></span></p>\n<p>As illustrated in this <a href=\"https://codepen.io/pigabo/pen/eAiLF?editors=1000\">codepen</a> we can create a grid using a few lines of SVG:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44a68f338674592984\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f338674592984-12\">12</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-r\">&lt;svg </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100%\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100%\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xmlns</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.w3.org/2000/svg\"</span><span class=\"crayon-r\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-2\"><span class=\"crayon-i\">&nbsp;&nbsp; </span><span class=\"crayon-r\">&lt;defs&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-3\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;pattern </span><span class=\"crayon-e\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"smallGrid\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"10\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"10\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">patternUnits</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"userSpaceOnUse\"</span><span class=\"crayon-r\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-4\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;path </span><span class=\"crayon-e\">d</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"M 10 0 L 0 0 0 10\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"none\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"gray\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke-width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"0.5\"</span><span class=\"crayon-r\">/&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-5\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;/pattern&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-6\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;pattern </span><span class=\"crayon-e\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"grid\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">patternUnits</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"userSpaceOnUse\"</span><span class=\"crayon-r\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-7\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;rect </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"url(#smallGrid)\"</span><span class=\"crayon-r\">/&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-8\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;path </span><span class=\"crayon-e\">d</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"M 100 0 L 0 0 0 100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"none\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"gray\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke-width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-r\">/&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-9\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;/pattern&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-10\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;/defs&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-11\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;rect </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100%\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100%\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"url(#grid)\"</span><span class=\"crayon-r\"> /&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f338674592984-12\"><span class=\"crayon-i\">&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;/svg&gt;</span></div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0021 seconds] -->\n<p></p>\n<p>We can use an extension like <a href=\"https://userstyles.org/\">stylish</a> and save this snippet to apply the above css grid as a background image to html.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44a68f34c380762038\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f34c380762038-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f34c380762038-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f34c380762038-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f34c380762038-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f34c380762038-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f34c380762038-6\">6</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44a68f34c380762038-1\"><span class=\"crayon-k\">html.grid-backdrop-enabled </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f34c380762038-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">background</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">url</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxuc…IxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiPjwvcmVjdD4KICA8L3N2Zz4=\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f34c380762038-3\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f34c380762038-4\"><span class=\"crayon-k\">html.grid-backdrop-enabled body </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f34c380762038-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">opacity</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">0.8</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f34c380762038-6\"><span class=\"crayon-sy\">}</span></div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0006 seconds] -->\n<p></p>\n<p>So now whenever we activate this style and add grid-backdrop-enabled to html, the grid will show up as a backdrop against the transparent body and we can use it to check for alignment issues.</p>\n<p><img src=\"/wp-content/uploads/2019/01/grid-backdrop.png\" alt=\"\"></p>\n<p>We can always adjust the SVG to tweak the appearance of the grid. Here is a slightly adapted one which highlights 5px, 10px, 50px and 100px boundaries with different colors:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44a68f352926673531\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-17\">17</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-19\">19</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a68f352926673531-20\">20</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-r\">&lt;svg </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100%\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100%\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xmlns</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.w3.org/2000/svg\"</span><span class=\"crayon-r\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-2\"><span class=\"crayon-i\">&nbsp;&nbsp; </span><span class=\"crayon-r\">&lt;defs&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-3\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;pattern </span><span class=\"crayon-e\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"smallGrid\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"5\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"5\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">patternUnits</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"userSpaceOnUse\"</span><span class=\"crayon-r\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-4\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;path </span><span class=\"crayon-e\">d</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"M 10 0 L 0 0 0 10\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"none\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"gray\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke-width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-r\">/&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-5\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;/pattern&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-6\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;pattern </span><span class=\"crayon-e\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"medSmallGrid\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"10\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"10\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">patternUnits</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"userSpaceOnUse\"</span><span class=\"crayon-r\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-7\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;rect </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"url(#smallGrid)\"</span><span class=\"crayon-r\">/&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-8\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;path </span><span class=\"crayon-e\">d</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"M 10 0 L 0 0 0 10\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"none\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"black\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke-width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-r\"> /&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-9\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;/pattern&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-10\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;pattern </span><span class=\"crayon-e\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"medLargeGrid\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"50\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"50\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">patternUnits</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"userSpaceOnUse\"</span><span class=\"crayon-r\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-11\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;rect </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"url(#medSmallGrid)\"</span><span class=\"crayon-r\">/&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-12\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;path </span><span class=\"crayon-e\">d</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"M 10 0 L 0 0 0 10\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"none\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"violet\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke-width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-r\"> /&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-13\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;/pattern&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-14\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;pattern </span><span class=\"crayon-e\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"largeGrid\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">patternUnits</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"userSpaceOnUse\"</span><span class=\"crayon-r\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-15\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;rect </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"url(#medLargeGrid)\"</span><span class=\"crayon-r\">/&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-16\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;path </span><span class=\"crayon-e\">d</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"M 100 0 L 0 0 0 100\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"none\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"red\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stroke-width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-r\">/&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-17\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;/pattern&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-18\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;/defs&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-19\"><span class=\"crayon-i\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;rect </span><span class=\"crayon-e\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100%\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"100%\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fill</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"url(#largeGrid)\"</span><span class=\"crayon-r\"> /&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a68f352926673531-20\"><span class=\"crayon-i\">&nbsp;&nbsp;</span><span class=\"crayon-r\">&lt;/svg&gt;</span></div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0039 seconds] -->\n<p></p>\n\n\n    ",
            "tags": [
                "Frontend",
                "SVG"
            ]
        },
        {
            "id": "https://lorefnon.me/2018/09/23/using-google-diff-match-patch-with-automerge-text/",
            "url": "https://lorefnon.me/2018/09/23/using-google-diff-match-patch-with-automerge-text/",
            "title": "Integrating Google diff-match-patch with AutoMerge.Text",
            "date_published": "2018-09-23T00:00:00.000Z",
            "content_html": "<link rel=\"stylesheet\" href=\"/css/crayon.min.css\" >\n<link rel=\"stylesheet\" href=\"/css/crayon-flatui-light.css\" >\n\n\n\n\t<p>This post outlines the use of Google’s <a href=\"https://github.com/google/diff-match-patch/wiki/Language:-JavaScript\">diff-match-patch library</a> to generate patches that can be translated to operations against an <a href=\"https://github.com/automerge/automerge#text-editing-support\">AutoMerge.Text</a> <a href=\"https://en.wikipedia.org/wiki/Conflict-free_replicated_data_type\">CRDT</a> for situations when deriving the operations directly from user interactions is cumbersome.<br>\n<span id=\"more-469\"></span></p>\n<blockquote><p>\n  <a href=\"https://github.com/automerge/automerge\">Automerge</a> is a so-called Conflict-Free Replicated Data Type (CRDT), which allows concurrent changes on different devices to be merged automatically without requiring any central server.\n</p></blockquote>\n<p></p>\n<blockquote><p>\n  <a href=\"https://github.com/automerge/automerge#text-editing-support\">Automerge.Text</a> provides experimental support for collaborative text editing. Under the hood, text is represented as a list of characters, which is edited by inserting or deleting individual characters. Compared to using a regular JavaScript array, Automerge.Text offers better performance.\n</p></blockquote>\n<p>However, using the AutoMerge.Text API directly is somewhat cumbersome in practice:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba447e7f3ce267270330\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3ce267270330-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3ce267270330-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3ce267270330-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3ce267270330-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3ce267270330-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3ce267270330-6\">6</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba447e7f3ce267270330-1\"><span class=\"crayon-v\">newDoc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Automerge</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">change</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">currentDoc</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">doc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3ce267270330-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Automerge</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Text</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3ce267270330-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insertAt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'h'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'e'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'l'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'l'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'o'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3ce267270330-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">deleteAt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3ce267270330-5\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insertAt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'H'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3ce267270330-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0026 seconds] -->\n<p></p>\n<p>It is of course possible to track every keypress in a text field and translate them to insert/delete operations, but this requires handling of a lot of corner cases like selection tracking, handling clipboard paste etc.</p>\n<p>Many javascript text editor components (eg. Quill, Draft etc.) provide deltas in the change events and we can translate them into AutoMerge operations.</p>\n<p>An alternative to the above is using Google’s diff-match-patch library to compute patches that represent the change between the source document and changed document, and we can easily translate these patches to changes in AutoMerge Text data structure.</p>\n<p>This comes in particularly handly when we don’t have control over the editor component, and deriving change deltas from user interactions is not very straightforward.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba447e7f3e1141648705\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-17\">17</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-19\">19</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-21\">21</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-23\">23</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-25\">25</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-27\">27</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-29\">29</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-31\">31</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-33\">33</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-35\">35</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-37\">37</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-39\">39</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-41\">41</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-43\">43</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-45\">45</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-47\">47</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-49\">49</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-51\">51</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-53\">53</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-55\">55</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-57\">57</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-59\">59</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-61\">61</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5fba447e7f3e1141648705-63\">63</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">DiffMatchPatch </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"diff-match-patch\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">AutoMerge </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"automerge\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-3\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-4\"><span class=\"crayon-c\">// Typically we would get the changedText after some interactions in our UI components:</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-5\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sourceText</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"The angel shall fall\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-6\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">changedText</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Lucifer shall rise\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-7\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-8\"><span class=\"crayon-c\">// Initialize AutoMerge wrapper document</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-9\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">doc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AutoMerge</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-10\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-11\"><span class=\"crayon-v\">doc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AutoMerge</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">change</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">doc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-12\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AutoMerge</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Text</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-13\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insertAt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sourceText</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-14\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-15\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-16\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dmp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DiffMatchPatch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-17\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-18\"><span class=\"crayon-c\">// Compute the diff:</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-19\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">diff</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dmp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">diff_main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sourceText</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">changedText</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-20\"><span class=\"crayon-c\">// diff is simply an array of binary tuples representing the change</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-21\"><span class=\"crayon-c\">// [[-1,\"The ang\"],[1,\"Lucif\"],[0,\"e\"],[-1,\"l\"],[1,\"r\"],[0,\" shall \"],[-1,\"fall\"],[1,\"rise\"]]</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-22\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-23\"><span class=\"crayon-c\">// This cleans up the diff so that the diff is more human friendly.</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-24\"><span class=\"crayon-v\">dmp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">diff_cleanupSemantic</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">diff</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-25\"><span class=\"crayon-c\">// [[-1,\"The angel\"],[1,\"Lucifer\"],[0,\" shall \"],[-1,\"fall\"],[1,\"rise\"]]</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-26\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-27\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">patches</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dmp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">patch_make</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sourceText</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">diff</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-28\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-29\"><span class=\"crayon-c\">// A patch object wraps the diffs along with some change metadata:</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-30\"><span class=\"crayon-c\">//</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-31\"><span class=\"crayon-c\">// [{</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-32\"><span class=\"crayon-c\">//&nbsp;&nbsp; \"diffs\":[[-1,\"The angel\"],[1,\"Lucifer\"],[0,\" shall \"],[-1,\"fall\"], [1,\"rise\"]],</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-33\"><span class=\"crayon-c\">//&nbsp;&nbsp; \"start1\":0,</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-34\"><span class=\"crayon-c\">//&nbsp;&nbsp; \"start2\":0,</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-35\"><span class=\"crayon-c\">//&nbsp;&nbsp; \"length1\":20,</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-36\"><span class=\"crayon-c\">//&nbsp;&nbsp; \"length2\":18</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-37\"><span class=\"crayon-c\">// }]</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-38\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-39\"><span class=\"crayon-c\">// We can use the patch to derive the changedText from the sourceText</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-40\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dmp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">patch_apply</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">patches</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sourceText</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// \"Lucifer shall rise\"</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-41\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-42\"><span class=\"crayon-c\">// Now we translate these patches to operations against AutoMerge.Text instance:</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-43\"><span class=\"crayon-v\">doc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AutoMerge</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">change</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">doc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-44\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">patches</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">patch</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-45\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">idx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">patch</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">start1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-46\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">patch</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">diffs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">operation</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">changeText</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-47\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">switch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">operation</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-48\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Insertion</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-49\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insertAt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">idx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">changeText</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-50\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// No Change</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-51\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">idx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">changeText</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-52\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-53\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Deletion</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-54\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">changeText</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-55\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">deleteAt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">idx</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-56\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-57\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-58\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-59\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-60\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-61\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-62\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba447e7f3e1141648705-63\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// \"Lucifer shall rise\"</span></div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0121 seconds] -->\n<p></p>\n\n\n    ",
            "tags": [
                "Automerge",
                "CRDT",
                "Frontend"
            ]
        },
        {
            "id": "https://lorefnon.me/2018/06/09/javascript-async-await-with-arbitrary-thenables/",
            "url": "https://lorefnon.me/2018/06/09/javascript-async-await-with-arbitrary-thenables/",
            "title": "Javascript Async/Await with arbitrary Thenables",
            "date_published": "2018-06-09T00:00:00.000Z",
            "content_html": "<link rel=\"stylesheet\" href=\"/css/crayon.min.css\" >\n<link rel=\"stylesheet\" href=\"/css/crayon-flatui-light.css\" >\n\n\n\n\t<p>Usage of C# inspired <code>async/await</code> syntax (Now a <a href=\"https://github.com/tc39/proposals/blob/master/finished-proposals.md\" target=\"_blank\">stage 4 proposal</a>) is now fairly mainstream in javascript, and native support is available in major browsers and Node.</p>\n<p>Most of the times we <code>await</code> on promises (typically returned from async functions), however, it is relatively less well known that <code>await</code> works on arbitrary thenables. By thenables we mean any object with a <code>then</code> function member.</p>\n<p>This post covers this usage, and explores some scenarios where it can be interesting.</p>\n<p><span id=\"more-252\"></span></p>\n<h2>Using thenables to represent lazy computations</h2>\n<p>Promises are used to represent output of an operation which has been initiated but may not have yet completed. So by the time we have a promise, the operation it represents has already begun and using await keyword we can (effectively) wait for it to complete.</p>\n<p>Thenables can be useful to represent a computation that is yet to begin. For example:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051aef694301312\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051aef694301312-11\">11</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-2\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Started Then'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">setTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Finishing Task'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">resolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-10\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051aef694301312-11\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0049 seconds] -->\n<p></p>\n<p>It would be obvious here, that calling <code>fn</code> does not actually initiate an asynchronous operation, but simply returns an object – a thenable.</p>\n<p>However, given that <code>await</code> syntax implicitly calls <code>then</code>, we can simply <code>await</code> on the returned thenable exactly in the same way we could have awaited on a promise, but unlike the latter, in this case, calling await will actually initiate the execution of our asynchronous operation.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051afd651445880\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051afd651445880-10\">10</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-2\"><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">experimental</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">repl</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">await</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-3\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* Function above */</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-4\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-e\">fn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-5\"><span class=\"crayon-e\">Started </span><span class=\"crayon-st\">Then</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-6\"><span class=\"crayon-e\">Finishing </span><span class=\"crayon-e\">Task</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-7\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-8\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">_</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-9\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051afd651445880-10\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0010 seconds] -->\n<p></p>\n<p>Libraries like <a href=\"http://mongoosejs.com/\" target=\"_blank\">Mongoose</a> (A popular ODM for mongodb) utilize this behavior and implement the thenable protocol in their <a href=\"https://github.com/Automattic/mongoose/blob/master/lib/query.js#L3143\" target=\"_blank\">Query class</a>.</p>\n<p>This enables us to <code>await</code> on fluent query builder chains.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b01870047597\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b01870047597-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b01870047597-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b01870047597-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b01870047597-4\">4</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b01870047597-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b01870047597-2\"><span class=\"crayon-e\">await </span><span class=\"crayon-v\">Person</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">where</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'name'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">equals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'lorefnon'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b01870047597-3\"><span class=\"crayon-e\">await </span><span class=\"crayon-v\">Person</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">where</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'name'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">equals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'lorefnon'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">where</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'age'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">gt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b01870047597-4\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0008 seconds] -->\n<p></p>\n<h3>Caveats</h3>\n<p>Even though being a thenable enables Query to “quack” like a promise in this case, an important distinction is that calling then multiple times will trigger multiple calls to the database (unlike a promise which is guaranteed to resolve or reject exactly once).</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b04749275254\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b04749275254-6\">6</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-2\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Person</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">where</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'name'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">equals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'lorefnon'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-3\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// triggers database query</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-4\"><span class=\"crayon-c\">// After some lines</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-5\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// triggers another database query</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b04749275254-6\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0009 seconds] -->\n<p></p>\n<p>If this behavior is undesirable, then we can <a href=\"https://github.com/lodash/lodash/blob/4.17.10/lodash.js#L10539\" target=\"_blank\">memoize</a> our then function.</p>\n<p>Also, note that our <code>fn</code> function above could not be an async function.</p>\n<p>An async function is guaranteed to return a promise, and returning a thenable in async function, will cause its then to be invoked.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b07702009001\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-17\">17</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b07702009001-18\">18</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-2\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">asycn</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Starting Task'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// ....</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-7\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-8\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-9\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">promise</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Without await</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-10\"><span class=\"crayon-e\">Starting </span><span class=\"crayon-v\">Task</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-11\"><span class=\"crayon-c\">// ...</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-12\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-13\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">promise</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-14\"><span class=\"crayon-e\">Promise</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-15\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">pending</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-16\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-17\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b07702009001-18\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0016 seconds] -->\n<p></p>\n<h2>Stubbing/Spying</h2>\n<p>Since we know that await implicitly calls promises, we can safely spy on then of a promise in test cases. Or stub async methods to return spied thenables.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b0a860841833\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0a860841833-7\">7</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-2\"><span class=\"crayon-v\">sinon</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stub</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">apiClient</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'makeRequest'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">returns</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sinon</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">spy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">resolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">title</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Dummy Response'</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0a860841833-7\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0010 seconds] -->\n<p></p>\n<p>Since sinon’s stub/spy functions track invocations, we can later find if makeRequest was invoked as well as whether our (pseudo) promises returned were actually awaited upon.</p>\n<h2>Dynamic imports and Thenable modules</h2>\n<p>ES6 modules can export a then method which will be called when these modules are dynamically imported:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b0d585804715\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b0d585804715-8\">8</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-2\"><span class=\"crayon-c\">// importee.mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-3\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-4\"><span class=\"crayon-e\">export </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Running Task'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">resolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-7\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b0d585804715-8\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0008 seconds] -->\n<p></p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b10211716304\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b10211716304-7\">7</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-2\"><span class=\"crayon-c\">// importer.mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-3\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">async</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'resolved =&gt;'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-e\">import</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'./importee'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b10211716304-7\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0007 seconds] -->\n<p></p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b12392719844\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b12392719844-6\">6</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">experimental</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">modules </span><span class=\"crayon-v\">importer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25619</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ExperimentalWarning</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">The </span><span class=\"crayon-e\">ESM </span><span class=\"crayon-e\">module </span><span class=\"crayon-e\">loader </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">experimental</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-4\"><span class=\"crayon-e\">Running </span><span class=\"crayon-e\">Task</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-5\"><span class=\"crayon-v\">resolved</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b12392719844-6\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0009 seconds] -->\n<p></p>\n<p>Note that static imports are not asynchronous and don’t cause thenables to be executed:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b15466922518\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b15466922518-10\">10</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-2\"><span class=\"crayon-c\">// importee.mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-3\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-4\"><span class=\"crayon-e\">export </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"foo\"</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-5\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-6\"><span class=\"crayon-e\">export </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Running Task'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">resolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-9\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b15466922518-10\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0010 seconds] -->\n<p></p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b18426522605\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b18426522605-6\">6</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-2\"><span class=\"crayon-c\">// importer.mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-3\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"./importee\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-4\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-5\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'foo =&gt;'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b18426522605-6\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0006 seconds] -->\n<p></p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b1a362248770\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1a362248770-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1a362248770-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1a362248770-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1a362248770-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1a362248770-5\">5</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b1a362248770-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1a362248770-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">experimental</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">modules </span><span class=\"crayon-v\">importer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mjs</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1a362248770-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25619</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ExperimentalWarning</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">The </span><span class=\"crayon-e\">ESM </span><span class=\"crayon-e\">module </span><span class=\"crayon-e\">loader </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">experimental</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1a362248770-4\"><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">foo</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1a362248770-5\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0008 seconds] -->\n<p></p>\n<h2>Chaining of thenables</h2>\n<p>Similar to promises, thenables can be chained:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b1d808928575\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b1d808928575-9\">9</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-2\"><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">experimental</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">repl</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">await</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-3\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">r</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">r</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">r</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-4\"><span class=\"crayon-v\">undefined</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-5\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-e\">thenable</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-6\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-7\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">_</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-8\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b1d808928575-9\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0016 seconds] -->\n<p></p>\n<h2>Usage with Proxies</h2>\n<p>Dynamic interception of then invocations through proxies works exactly the way we’d expect:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44c051b20469144398\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44c051b20469144398-12\">12</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Proxy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">get</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">object</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prop</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">prop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'then'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">resolve</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reject</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">resolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-8\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-9\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-10\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">await </span><span class=\"crayon-v\">thenable</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-11\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5fba44c051b20469144398-12\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0016 seconds] -->\n<p></p>\n<h2>Closure</h2>\n<p>While implicit resolution of thenables opens up some interesting opportunities, it can also lead to unexpected/surprising behavior if we are not aware of it.</p>\n\n\n    ",
            "tags": [
                "Javascript",
                "Frontend"
            ]
        },
        {
            "id": "https://lorefnon.me/2018/06/02/exposing-slots-in-layout-containers-through-shared-refs-in-react/",
            "url": "https://lorefnon.me/2018/06/02/exposing-slots-in-layout-containers-through-shared-refs-in-react/",
            "title": "Exposing slots in layout containers through shared refs in React",
            "date_published": "2018-06-02T00:00:00.000Z",
            "content_html": "<link rel=\"stylesheet\" href=\"/css/crayon.min.css\" >\n<link rel=\"stylesheet\" href=\"/css/crayon-flatui-light.css\" >\n\n\n\n\t<p>React refs are generally considered an anti-pattern as their usage typically encourages patterns which go against declarative compositon and top down flow of data.</p>\n<p>This post explores a somewhat uncommon use case where refs can be used to expose layout slots in parent components to nested components.</p>\n<p><span id=\"more-242\"></span></p>\n<p>The newly introduced <a href=\"https://reactjs.org/docs/refs-and-the-dom.html#creating-refs\" target=\"_blank\">React.createRef</a> function makes it particularly convenient to create refs in parent components, and pass them down as props to other components.</p>\n<p>While building business applications, I find it convenient to create reusable layout container components (eg. Header + Top Menu + Sidebar) and share them across different LOB applications.</p>\n<p>While this is uncommon, I have occasionally encountered use cases which may benefit from a component being able to render sub-parts of itself “somewhere-else” in the layout structure, without the consumer of the component having to take care of rendering multiple components in different locations in the tree.</p>\n<p>For example, let us say we are creating a <code>DataTable</code> component. When we click on a row, we open a drawer and render a form inside for editing the item represented by the row. Later, we decide that we would also want the flexibility to show this form outside the component in a sidebar exposed by a layout container, if available.</p>\n<p>We could handle this by rendering the sidebar as a part of the <code>DataTable</code> component itself, but that is not suitable if the sidebar may contain other components too which are unrelated to our DataTable.</p>\n<p>We could also expose this drawer as a separate component, and both our <code>DataTable</code> component as well as the <code>RowDetailsForm</code> component could be connected to a shared store, and rendered in independent locations in the component hierarchy, but this obviously requires more work on the part of consumer, and requires us to expose our internal state management concerns to outside world.</p>\n<p>The third solution, which we discuss here, is to use shared refs.</p>\n<p>The consumer component can create a ref and share it with both the layout container component and the presenter component.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44a7a43ff960456084\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a43ff960456084-12\">12</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-2\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">App </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">React</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Component</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">sidebarRef</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">React</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createRef</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">render</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">LayoutContainer </span><span class=\"crayon-v\">sidebarRef</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sidebarRef</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">Panel </span><span class=\"crayon-v\">slotRef</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sidebarRef</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">LayoutContainer</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-10\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-11\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a43ff960456084-12\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0034 seconds] -->\n<p></p>\n<p>Now, our container component can use this <code>sidebarRef</code> to designate a slot which can be populated by the nested presenter:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44a7a4411198396424\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4411198396424-14\">14</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-2\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LayoutContainer </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">React</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Component</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">render</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-r\">ref</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sidebarRef</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">children</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-12\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-13\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4411198396424-14\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0015 seconds] -->\n<p></p>\n<p>And our presenter component can use this shared <code>sidebarRef</code> as a <code>Portal</code> target. Portal here is the <a href=\"https://react-bootstrap.github.io/react-overlays/#portals\" target=\"_blank\">Portal component</a> available from <a href=\"https://github.com/react-bootstrap/react-overlays\" target=\"_blank\">react-overlays</a> package, which is essentially a declarative wrapper over <a href=\"https://reactjs.org/docs/portals.html\" target=\"_blank\">ReactDOM.createPortal</a> API.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44a7a4432339310845\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4432339310845-15\">15</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-2\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Panel </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">React</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Component</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">getSlot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">slotRef</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">render</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">Fragment</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Body </span><span class=\"crayon-v\">Content</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">Portal </span><span class=\"crayon-v\">container</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">getSlot</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Slot </span><span class=\"crayon-v\">Content</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Portal</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Fragment</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-13\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-14\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4432339310845-15\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0019 seconds] -->\n<p></p>\n<p>In case you are wondering how this works during initial render, before the sidebarRef.current is available, the <a href=\"https://github.com/react-bootstrap/react-overlays/blob/master/src/Portal.js\" target=\"_blank\">Portal component</a> implementation can be illuminating:</p>\n<p>Abbreviated source is below:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44a7a4439253066833\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-17\">17</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-19\">19</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-21\">21</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-23\">23</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-25\">25</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-27\">27</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-29\">29</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-31\">31</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-33\">33</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-35\">35</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-37\">37</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-39\">39</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-41\">41</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-43\">43</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-45\">45</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-47\">47</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-49\">49</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-51\">51</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-53\">53</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4439253066833-55\">55</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-2\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Portal </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">React</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Component</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-3\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">componentWillMount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">canUseDom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-8\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">container</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">typeof</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">container</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'function'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">container</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">container</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-13\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">container</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">ReactDOM</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">findDOMNode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">container</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// The container is a React component that has not yet been rendered.</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// Don't set the container node yet.</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-19\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setContainer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">container</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-21\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-22\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-23\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">componentDidMount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_portalContainerNode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setContainer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">container</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">forceUpdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onRendered</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onRendered</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-28\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">onRendered</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-30\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-31\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-32\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">componentWillReceiveProps</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nextProps</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-33\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nextProps</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">container</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!==</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">container</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-34\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setContainer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nextProps</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">container</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-35\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-36\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-37\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-38\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">componentWillUnmount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-39\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_portalContainerNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-40\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-41\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-42\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">setContainer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">container</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-43\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_portalContainerNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getContainer</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-44\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">container</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ownerDocument</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-45\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-46\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-47\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-48\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">render</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-49\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">children</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">_portalContainerNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-50\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">ReactDOM</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createPortal</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">children</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_portalContainerNode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-51\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-52\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-53\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-54\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4439253066833-55\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0057 seconds] -->\n<p></p>\n<p>The render safely handles the scenario when the target container is not available yet, and in <code>componentDidMount</code> lifecycle hook, once the target is available, we set <code>this._portalContainerNode</code> and trigger a re-render.</p>\n<p>This approach also makes it trivial to fallback to a local node if the consumer hasn’t supplied us with a <code>sidebarRef</code>.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44a7a4440605757798\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4440605757798-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4440605757798-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44a7a4440605757798-3\">3</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44a7a4440605757798-1\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4440605757798-2\"><span class=\"crayon-v\">getSlot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">slotRef</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">current</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">props</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">localSlotRef</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">current</span></div><div class=\"crayon-line\" id=\"crayon-5fba44a7a4440605757798-3\">&nbsp;</div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0008 seconds] -->\n<p></p>\n<p>Note that things like event bubbling will work identially in both scenarios even if the component is rendered out of the DOM hierarchy of parent. React’s synthetic event implementation is aware of portals and events are propagated through portal boundaries to parent components.</p>\n\n\n    ",
            "tags": [
                "React",
                "Frontend"
            ]
        },
        {
            "id": "https://lorefnon.me/2018/02/04/redux-loop-a-better-solution-for-managing-asynchronous-operations-in-redux/",
            "url": "https://lorefnon.me/2018/02/04/redux-loop-a-better-solution-for-managing-asynchronous-operations-in-redux/",
            "title": "Redux-loop: A better solution for managing asynchronous operations in redux",
            "date_published": "2018-02-04T00:00:00.000Z",
            "content_html": "<link rel=\"stylesheet\" href=\"/css/crayon.min.css\" >\n<link rel=\"stylesheet\" href=\"/css/crayon-flatui-light.css\" >\n\n\n\n\t<p>The lack of support for asynchronous operations in redux core has spawned a whole ecosystems for managing <em><strong>side-effects</strong></em>&nbsp;<sup><a id=\"side-effects-footer-link-back\" href=\"#side-effects-footer-link\">[1]</a></sup> in Redux.</p>\n<p>This post argues that the <a href=\"https://github.com/redux-loop/redux-loop\">redux-loop</a>&nbsp;library (1.5 k ★ as of this writing) is a much better solution for this job than other more popular alternatives like <a href=\"https://github.com/redux-saga/redux-saga\">redux-sagas</a> (11.8 k&nbsp;★) and <a href=\"https://github.com/gaearon/redux-thunk\">redux-thunk</a> (7.8 k&nbsp;★).</p>\n<p>As has always been prevalent in frontend ecosystem, popularity&nbsp; does not necessarily translate to better suitability.</p>\n<p><span id=\"more-113\"></span></p>\n<h1>What is redux-loop ?</h1>\n<p>Redux loop essentially exposes a <a href=\"https://github.com/reactjs/redux/blob/master/docs/Glossary.md#store-enhancer\">store enhancer</a>.</p>\n<p>Normally our reducers would take in the current state and action and return an updated state.</p>\n<p>For example:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44e6bd90c383944409\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd90c383944409-11\">11</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-1\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reducer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">switch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">type</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'ADD_TODO'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// Derive new state from current state</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">label</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">isDone</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=\"crayon-c\">// ... Other Cases</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-10\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd90c383944409-11\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0018 seconds] -->\n<p></p>\n<p>Redux encourages reducers to be pure functions and strongly discourages side-effects from <strong>being run from within reducers</strong> to <a href=\"https://hashnode.com/post/how-do-you-explain-the-term-predictable-state-container-in-simple-words-ciizdac5300wege53dogz8aqk\">ensure predictability</a>.</p>\n<p>When redux-loop’s enhancer is installed, our reducer could also return a <em><strong>loop</strong></em>.</p>\n<p>While it is a somewhat confusing name, a loop, in this context, is a combination of two things:</p>\n<ol>\n<li>An updated state (which is what you would have normally returned), and</li>\n<li>A command (A plain object which describes an asynchronous operation to be executed).</li>\n</ol>\n<p>A command describes what asynchronous operation is to be run <strong>after</strong> this dispatch cycle. For example:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44e6bd921466673431\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-9\">9</div><div class=\"crayon-num crayon-marked-num crayon-top\" data-line=\"crayon-5fba44e6bd921466673431-10\">10</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-11\">11</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-12\">12</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-13\">13</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-14\">14</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-15\">15</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-16\">16</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-17\">17</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-18\">18</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-19\">19</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-20\">20</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-21\">21</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-22\">22</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-23\">23</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-24\">24</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-25\">25</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-26\">26</div><div class=\"crayon-num crayon-marked-num\" data-line=\"crayon-5fba44e6bd921466673431-27\">27</div><div class=\"crayon-num crayon-marked-num crayon-bottom\" data-line=\"crayon-5fba44e6bd921466673431-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-29\">29</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd921466673431-31\">31</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-1\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reducer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">switch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">type</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'TODO/CREATE'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// 1. Derive new state from updated State</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nextState</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">label</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">isDone</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-marked-line crayon-top\" id=\"crayon-5fba44e6bd921466673431-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// 2. Describe what is to be done next through a command:</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nextOperation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Cmd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">createTask</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// An async function which takes the arguments below and returns a promise</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">args</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">label</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=\"crayon-c\">// Arguments to saveTask</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">successActionCreator</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">task</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Action which will be dispatched when the operation is successful</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"TODO/CREATE/SUCCESS\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">payload</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">task</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">failActionCreator</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-c\">// Action which will be dispatched when the operation is complete</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-21\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"TODO/CREATE/FAILURE\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">payload</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">error</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-23\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-25\">&nbsp;</div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// 3. Combine both in a loop:</span></div><div class=\"crayon-line crayon-marked-line\" id=\"crayon-5fba44e6bd921466673431-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">loop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nextState</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nextOperation</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-marked-line crayon-bottom\" id=\"crayon-5fba44e6bd921466673431-28\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// ... Other Cases</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-30\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd921466673431-31\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0038 seconds] -->\n<p></p>\n<p>While it may not be obvious looking at the example above, our <strong>reducer is still a pure function</strong>.</p>\n<p>The Command that we return as a part of the loop in just an object describing an operation. Even though the API is called <code>Cmd.run</code>, it does not actually run the asynchronous operation from within the reducer. Redux-loop executes the operation (described by the cmd) once the dispatch cycle is over.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\n\n\t\t<div id=\"crayon-5fba44e6bd929710407303\" class=\"crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;\">\n\t\t\n\t\t\t<div class=\"crayon-plain-wrap\"></div>\n\t\t\t<div class=\"crayon-main\" style=\"\">\n\t\t\t\t<table class=\"crayon-table\">\n\t\t\t\t\t<tbody><tr class=\"crayon-row\">\n\t\t\t\t<td class=\"crayon-nums\" data-settings=\"hide\">\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 15px !important; line-height: 20px !important;\"><div class=\"crayon-num crayon-marked-num crayon-top crayon-bottom\" data-line=\"crayon-5fba44e6bd929710407303-1\">1</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-3\">3</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-5\">5</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-7\">7</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-9\">9</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-11\">11</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-13\">13</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-15\">15</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-17\">17</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-19\">19</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-21\">21</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-23\">23</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-25\">25</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-27\">27</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-29\">29</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-31\">31</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-33\">33</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-35\">35</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-37\">37</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5fba44e6bd929710407303-39\">39</div></div>\n\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line crayon-marked-line crayon-top crayon-bottom\" id=\"crayon-5fba44e6bd929710407303-1\">s&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DOM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Component&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Store&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redux-loop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-3\">User -----------------------&gt; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-4\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-5\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Click on \"Add Todo\"&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-6\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-----------&gt;||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-7\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| onClick&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-8\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +------------------------&gt; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-9\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | disatch({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-10\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; type: \"TODO/CREATE\",&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-11\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reducer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-12\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | })&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-13\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+--------------&gt; +&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-14\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-15\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-16\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-17\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&lt;--------------+--------------&gt; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-18\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;Apply&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; render&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ||&nbsp;&nbsp; nextState&nbsp;&nbsp;&nbsp;&nbsp; next&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;createTask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-19\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;diff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ||&lt;------------------------+|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(async operation)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-20\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +-----------&gt; +&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-21\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &lt;-----------+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;promise&nbsp;&nbsp;| |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-22\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | &lt;---------+ |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-23\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;dispatch({&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-24\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;type: \"TODO/CREATE/SUCCESS\", | &lt;-----------+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-25\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;fulfill&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-26\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-27\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&lt;-------------------------------+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-28\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-29\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reducer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-30\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+|------------&gt; +&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-31\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-32\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-33\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &lt;-----------+ +&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-34\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp; nextState&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-35\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; render&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-36\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;Apply&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&lt;------------------------+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-37\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;diff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-38\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &lt;-----------+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div><div class=\"crayon-line\" id=\"crayon-5fba44e6bd929710407303-39\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div></div></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody></table>\n\t\t\t</div>\n\t\t</div>\n<!-- [Format Time: 0.0044 seconds] -->\n<p></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>Interested readers are encouraged to explore the redux-loop documentation for advanced aspects. The rest of the post below compares redux-loop with prevalent alternatives.</p>\n<h1>A comparision with the alternatives</h1>\n<p>If you are writing a redux application today, it is likely that to manage asynchronous operations you are using either redux-thunks or redux-sagas, which are the most popular solutions in this space.</p>\n<p>I believe redux-loop is a better alternative to both of them.</p>\n<p>Redux-thunk encourages handling your asynchronous operations in action creators. The action creators can return thunks which can dispatch other actions when the operation has completed or when it fails.</p>\n<blockquote><p>Redux Thunk&nbsp;<a href=\"https://github.com/reactjs/redux/blob/master/docs/advanced/Middleware.md\">middleware</a>&nbsp;allows you to write action creators that return a function instead of an action. The thunk can be used to delay the dispatch of an action, or to dispatch only if a certain condition is met. The inner function receives the store methods&nbsp;<code>dispatch</code>&nbsp;and&nbsp;<code>getState</code>&nbsp;as parameters.</p></blockquote>\n<p>redux-sagas allows us to define long running generators in the application which can intercept arbitrary actions and perform asynchronous actions based on them.</p>\n<blockquote><p>The mental model is that a saga is like a separate thread in your application that’s solely responsible for side effects.&nbsp;<code>redux-saga</code>&nbsp;is a redux middleware, which means this thread can be started, paused and cancelled from the main application with normal redux actions, it has access to the full redux application state and it can dispatch redux actions as well.</p></blockquote>\n<h2>Coherent mental model</h2>\n<p>With redux-loop, when you are exploring your application codebase (or trying to debug a behavior) and trying to deduce what will happen due to an action dispatch, the starting point of investigation is always the reducer irrespective of whether the action corresponds to a synchronous operation or asynchronous.</p>\n<p>As the authors have explained this in the README:</p>\n<blockquote><p>With&nbsp;<code>redux-loop</code>, the <strong>reducer doesn’t just decide what happens&nbsp;<em>now</em>&nbsp;due to a particular action, it decides what happens&nbsp;<em>next</em>.</strong> All of the behavior of your application can be traced through one place, and that behavior can be easily broken apart and composed back together.</p></blockquote>\n<p><strong>This is not the case with either thunks or sagas.</strong></p>\n<p>In case of thunks, to investigate the impact of an action, along with all reducers which handle the action, we also need to go to each action creator which may have dispatched this action and investigate the thunks which they return.</p>\n<p>In case of sagas, along with all reducers, we need to investigate each saga which may have intercepted the action.</p>\n<p>In this regard it feels like a natural extension of the Redux API as opposed to a solution bolted on top of redux pretending that asynchronous operations are fundamentally different from synchronous operations.</p>\n<h2>Dispatch is decoupled from handling of operation</h2>\n<p>With redux-thunks, <strong>we don’t have a way to intercept actions when we don’t have control over the dispatch site.&nbsp;</strong></p>\n<p>Being able to intercept actions without modifying the dispatch site is handy in multiple scenarios. Let us say we want to show a loader when&nbsp;any asynchronous operation is in progress.</p>\n<p>We can implement this using redux-loop without all the action creators being aware of this. A single reducer can intercept all actions suffixed with <code>_PENDING</code>&nbsp;and <code>_COMPLETE</code>&nbsp;and use them to update the progress bar state in redux.</p>\n<p>Redux-sagas is capable of such interception, but debugging sagas can be quite difficult owning to the fact that sagas can spawn other sagas during their lifetime, so investigation of the impact of an action requires knowledge of what all sagas were running at the point of dispatch.</p>\n<h2>Time variant local state outside redux</h2>\n<p>This is essentially an extension of the above argument. Because sagas are long running, they make it very easy (and even encourage) to have local implicit state within the sagas which is not in the redux store and can not be investigated through redux-dev-tools. Based on this implicit time variant state encapsulated within local scopes of long running generators, sagas can do different things when same action is dispatched and in large complex applications this can be difficult to reason about.</p>\n<p>I believe it is much better to encode all these transient states of various asynchronous operation, which are in progress, within the redux store so that the store remains the primary source of truth in the application. It is much easier to reason about the behavior of application when the outcome of an action is directly deducible from store state and action.</p>\n<p>Can the same approach be adopted while using sagas ? Sure. But for a vast majority of use cases, redux-saga’s flexibility – especially the ability to arbitrarily fork and join sagas – is an undesirable footgun which can make post-mortem debugging a whole lot more complex.</p>\n<p>While it is likely that tooling efforts like <a href=\"https://github.com/redux-saga/redux-saga-devtools\">redux-saga-devtools&nbsp;</a>will help alleviate many of the debugging headaches associated with sagas, but I still prefer to treat the redux store as the singular state machine driving the application.</p>\n<hr>\n<p><sup><a id=\"side-effects-footer-link\" href=\"#side-effects-footer-link-back\">[1]</a></sup>&nbsp;I explicitly avoid the usage of the term <strong>side-effect&nbsp;</strong>because it seems to imply that these operations are something of lesser importance where as, in reality, for most applications, these side effects are the reasons these applications exist.</p>\n<p>In frontend application asynchrony is so prevalent that management of asynchronous flow of control is often the single most important thing in the application.</p>\n\n\n    ",
            "tags": [
                "Javascript",
                "Frontend",
                "Redux",
                "Redux-loop"
            ]
        }
    ]
}