<!DOCTYPE html><html class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/blog.css"><title>Lorefnon | Blog | Object destructuring is useful for arrays too</title><meta property="og:title" content="Lorefnon | Blog | Object destructuring is useful for arrays too"><meta property="og:description" content="Ramblings on Web Development and software architecture"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="icon" href="/images/favicon/favicon.ico"><script data-goatcounter="https://analytics.lorefnon.com/count" async src="https://analytics.lorefnon.com/count.js"></script><script src="https://unpkg.com/htmx.org@1.7.0/dist/htmx.min.js" defer></script><script src="https://unpkg.com/dompurify@2.3.6/dist/purify.min.js" defer></script><script src="/js/blog.js" defer></script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Icicles of Thought" type="application/atom+xml">
</head><body class="blog-body" hx-boost="true"><div class="blog-summary"><a class="primary-link" href="/" hx-boost="false"><h1 class="header-text">Gaurab Paul</h1><h2 class="header-text">Polyglot software developer &amp; consultant passionate about web development, distributed systems and open source technologies</h2></a><div class="blog-support"><div class="blog-support-cta-container"><a class="blog-support-btn" href="https://ko-fi.com/lorefnon" target="_blank" title="Support my work"></a></div></div></div><div class="blog-sidebar"><div class="blog-support"><div class="blog-support-cta-container"><a class="blog-support-btn" href="https://ko-fi.com/lorefnon" target="_blank" title="Support my work"></a><div class="blog-support-arrow"></div><p class="support-text body-text">Support my blog and open-source work</p></div></div><h1 class="header-text">Tags</h1><ul class="tag-list"><li class="body-text"><a class="tag-link" href="/tags/Javascript/"><img src="/images/tag.svg">Javascript</a></li></ul></div><div class="blog-header blog-post-header"><div class="blog-post-header-inner"><div class="header-text">Object destructuring is useful for arrays too</div><div class="posted-date sub-header-text" title="2023-12-26">Posted &nbsp;a day ago</div><hr class="blog-header-separator"></div></div><div class="blog-main"><div class="page-content"><p>Javascript has <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#object_destructuring" target="_blank" rel="noopener external nofollow noreferrer">object destructuring</a> for objects, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#array_destructuring" target="_blank" rel="noopener external nofollow noreferrer">array destructuring</a> for arrays (and other iterables).</p>
<p>However, we sometimes forget that in javascript arrays are objects too, and thus object destructuring can be used with arrays as well.</p>
<pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; <span class="hljs-number">0</span>: a &#125; = [<span class="hljs-number">10</span>]
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a) <span class="hljs-comment">// 10</span></code></pre>

<p>We need to provide an alternative identifier because <code>0</code> can not be used as one. This works because js arrays quack like objects with string keys. </p>
<pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([<span class="hljs-number">10</span>][<span class="hljs-string">&quot;0&quot;</span>]) <span class="hljs-comment">// 10</span></code></pre>

<p>Above usages are not so useful though, but it can be handy in scenarios where you get a collection from somewhere else and want to extract something useful out of it succinctly.</p>
<p>So instead of: </p>
<pre><code class="hljs js">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index, collection</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;index&#125;</span>/<span class="hljs-subst">$&#123;collection.length&#125;</span>`</span>) <span class="hljs-comment">// [&#x27;0/3&#x27;, &#x27;1/3&#x27;, &#x27;2/3&#x27;]</span></code></pre>

<p>We could write: </p>
<pre><code class="hljs js">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index, &#123; length &#125;</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;index&#125;</span>/<span class="hljs-subst">$&#123;length&#125;</span>`</span>) <span class="hljs-comment">// [&#x27;0/3&#x27;, &#x27;1/3&#x27;, &#x27;2/3&#x27;]</span></code></pre>

<p>Or, let&#39;s say we need the siblings of each item while iterating: </p>
<pre><code class="hljs js">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index, &#123; </span></span>
<span class="hljs-params"><span class="hljs-function">    [index-<span class="hljs-number">1</span>]: prev,</span></span>
<span class="hljs-params"><span class="hljs-function">    [index+<span class="hljs-number">1</span>]: next,</span></span>
<span class="hljs-params"><span class="hljs-function">&#125;</span>) =&gt;</span> (&#123; item, prev, next &#125;))
<span class="hljs-comment">// [&#123;&quot;item&quot;:1,&quot;prev&quot;: undefined, &quot;next&quot;:2&#125;,&#123;&quot;item&quot;:2,&quot;prev&quot;:1,&quot;next&quot;:3&#125;,&#123;&quot;item&quot;:3,&quot;prev&quot;:2, &quot;next&quot;: undefined&#125;]</span></code></pre>

<p>Here we take advantage of the feature that while destructuring, our keys can be computed expressions.</p>
<p>Also, there is nothing stopping us from making use of destructured items in key expressions within the same destructuring assignment:</p>
<pre><code class="hljs js">
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">current, index, &#123; </span></span>
<span class="hljs-params"><span class="hljs-function">    length,</span></span>
<span class="hljs-params"><span class="hljs-function">    <span class="hljs-number">0</span>: first,</span></span>
<span class="hljs-params"><span class="hljs-function">    [length-<span class="hljs-number">1</span>]: last</span></span>
<span class="hljs-params"><span class="hljs-function">&#125;</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;first&#125;</span>...<span class="hljs-subst">$&#123;current&#125;</span>...<span class="hljs-subst">$&#123;last&#125;</span>`</span>)
<span class="hljs-comment">// [&#x27;1...1...3&#x27;, &#x27;1...2...3&#x27;, &#x27;1...3...3&#x27;]</span></code></pre>

<p>JS is fun, yeah ?</p>
</div><div class="post-comments"><!-- .comments-target--></div><div class="post-comments" style="margin-top: 10px;"><div id="remark42"></div></div></div><div class="blog-footer body-text"><p class="copyright-container"><strong>Â© 2022 Gaurab Paul</strong></p><p>Unless otherwise mentioned in specific contexts, all code is licensed under the The MIT License and all content and artwork is licensed under CC BY-NC-SA.</p><p>The opinions expressed herein are author's personal viewpoints and may not be taken as professional recommendations from any of his previous or current employers.</p></div></body></html>