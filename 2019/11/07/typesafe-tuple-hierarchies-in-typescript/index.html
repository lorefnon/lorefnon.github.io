<!DOCTYPE html><html class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/blog.css"><title>Lorefnon | Blog | Type-safe tuple hierarchies in TypeScript</title><meta property="og:title" content="Lorefnon | Blog | Type-safe tuple hierarchies in TypeScript"><meta property="og:description" content="Ramblings on Web Development and software architecture"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="icon" href="/images/favicon/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body class="blog-body" hx-boost="true"><a class="blog-summary" href="/" hx-boost="false"><h1 class="header-text">ICICLES OF THOUGHT</h1><h2 class="header-text">Ramblings on Web Development and Software Architecture</h2></a><div class="blog-sidebar"><h1 class="header-text">Tags</h1><ul class="tag-list"><li class="body-text"><a class="tag-link" href="/tags/Typescript/"><img src="/images/tag.svg">Typescript</a></li></ul></div><div class="blog-header blog-post-header"><div class="blog-post-header-inner"><div class="header-text">Type-safe tuple hierarchies in TypeScript</div><div class="posted-date sub-header-text" title="2019-11-07">Posted &nbsp;2 years ago</div><hr class="blog-header-separator"></div></div><div class="blog-main"><div class="page-content"><link rel="stylesheet" href="/css/crayon.min.css" >
<link rel="stylesheet" href="/css/crayon-flatui-light.css" >



	<p>I have a love-hate relationship with type safety. Type Checkers can be  amazingly powerful tools when they work and yet can be frustrating every now and then when you hit some unsupported edge case.</p>
<p>Thankfully more and more of these corners are getting eliminated with the hard work that the typescript team has been putting in.</p>
<p>One such case that was a PITA was support (or lack thereof) for recursive types in TypeScript.</p>
<p><span id="more-638"></span></p>
<p>Let’s say you despise XML/JSX and want to express User interface composition as a composition of tuples.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467baf48879040309" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467baf48879040309-1">1</div><div class="crayon-num" data-line="crayon-5fba4467baf48879040309-2">2</div><div class="crayon-num" data-line="crayon-5fba4467baf48879040309-3">3</div><div class="crayon-num" data-line="crayon-5fba4467baf48879040309-4">4</div><div class="crayon-num" data-line="crayon-5fba4467baf48879040309-5">5</div><div class="crayon-num" data-line="crayon-5fba4467baf48879040309-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467baf48879040309-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf48879040309-2"><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">ui</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-5fba4467baf48879040309-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">id</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"container"</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba4467baf48879040309-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba4467baf48879040309-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba4467baf48879040309-6">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0043 seconds] -->
<p></p>
<p>if you are coming from any of lisp-family languages you are probably already habituated to s-expressions for composing interfaces. <a target="_blank" rel="noopener" href="https://github.com/weavejester/hiccup">Hiccup</a>, for instance, is a cool<br>
templating language that utilizes s-expressions for consize boilerplate-free template composition.</p>
<p>So, now, how do we make this type safe.</p>
<p>Lets try the obvious approach:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467baf6e735348334" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-1">1</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-2">2</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-3">3</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-4">4</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-5">5</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-6">6</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-7">7</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-8">8</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-9">9</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-10">10</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-11">11</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-12">12</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-13">13</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-14">14</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-15">15</div><div class="crayon-num" data-line="crayon-5fba4467baf6e735348334-16">16</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467baf6e735348334-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-2"><span class="crayon-c">// Registry of tags and supported attributes</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-3"><span class="crayon-c">// Simplified for brevity</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-4"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-e">ElementAttrs</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"div"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">id</span><span class="crayon-sy">?</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">string</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"span"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">id</span><span class="crayon-sy">?</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">string</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-11"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-12">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-13"><span class="crayon-e">type </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">keyof </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-14">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-15"><span class="crayon-e">type </span><span class="crayon-v">ElementTuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf6e735348334-16">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0019 seconds] -->
<p></p>
<p>Until the last stable version of typescript this would have failed because recursive type aliases were not well supported. So we’d be greeted with an error:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467baf76968424678" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467baf76968424678-1">1</div><div class="crayon-num" data-line="crayon-5fba4467baf76968424678-2">2</div><div class="crayon-num" data-line="crayon-5fba4467baf76968424678-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467baf76968424678-1"><span class="crayon-e">type </span><span class="crayon-v">ElementTuple</span><span class="crayon-o">&amp;</span><span class="crayon-v">lt</span><span class="crayon-sy">;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-s">"div"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-s">"span"</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"div"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-s">"span"</span><span class="crayon-o">&amp;</span><span class="crayon-v">gt</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">any</span></div><div class="crayon-line" id="crayon-5fba4467baf76968424678-2"><span class="crayon-e">Type </span><span class="crayon-i">alias</span><span class="crayon-h"> </span><span class="crayon-s">'ElementTuple'</span><span class="crayon-h"> </span><span class="crayon-e">circularly </span><span class="crayon-e">references </span><span class="crayon-v">itself</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5fba4467baf76968424678-3">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<p>Hmm… let us see if we can use utilize the typical trick of using interfaces to work around this:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467baf7c211814569" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-1">1</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-2">2</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-3">3</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-4">4</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-5">5</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-6">6</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-7">7</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-8">8</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-9">9</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-10">10</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-11">11</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-12">12</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-13">13</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-14">14</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-15">15</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-16">16</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-17">17</div><div class="crayon-num" data-line="crayon-5fba4467baf7c211814569-18">18</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467baf7c211814569-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-2"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-e">ElementAttrs</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"div"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">id</span><span class="crayon-sy">?</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">string</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"span"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">id</span><span class="crayon-sy">?</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">string</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-9"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-10">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-11"><span class="crayon-e">type </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">keyof </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-12">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-13"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-17"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467baf7c211814569-18">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0022 seconds] -->
<p></p>
<p>This indeed seems to work:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467baf81046550299" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467baf81046550299-1">1</div><div class="crayon-num" data-line="crayon-5fba4467baf81046550299-2">2</div><div class="crayon-num" data-line="crayon-5fba4467baf81046550299-3">3</div><div class="crayon-num" data-line="crayon-5fba4467baf81046550299-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467baf81046550299-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf81046550299-2"><span class="crayon-m">const</span><span class="crayon-v"> t1:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf81046550299-3"><span class="crayon-m">const</span><span class="crayon-v"> t2:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">"di"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf81046550299-4">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<p>TS complains that the second assignment is not valid because:</p>
<blockquote><p>
  Type ‘”di”‘ is not assignable to type ‘”div” | “span”‘.
</p></blockquote>
<p>There is a caveat though:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467baf88200281863" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467baf88200281863-1">1</div><div class="crayon-num" data-line="crayon-5fba4467baf88200281863-2">2</div><div class="crayon-num" data-line="crayon-5fba4467baf88200281863-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467baf88200281863-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf88200281863-2"><span class="crayon-m">const</span><span class="crayon-v"> t1:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"junk"</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf88200281863-3">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p></p>
<p>This passes too !</p>
<p>Why doesn’t TypeScript complain ? Because our interface just cares about 0|1|2 indexes. If our tuple has other irrelevant things at other indexes, it doesn’t matter – it still satisfies the ElementTuple interface.</p>
<p>This is a problem for us if we want to support a variable arity tuples for convenience:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467baf8e227778586" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467baf8e227778586-1">1</div><div class="crayon-num" data-line="crayon-5fba4467baf8e227778586-2">2</div><div class="crayon-num" data-line="crayon-5fba4467baf8e227778586-3">3</div><div class="crayon-num" data-line="crayon-5fba4467baf8e227778586-4">4</div><div class="crayon-num" data-line="crayon-5fba4467baf8e227778586-5">5</div><div class="crayon-num" data-line="crayon-5fba4467baf8e227778586-6">6</div><div class="crayon-num" data-line="crayon-5fba4467baf8e227778586-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467baf8e227778586-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf8e227778586-2"><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-h"> </span><span class="crayon-c">// Attributes can be skipped if not needed</span></div><div class="crayon-line" id="crayon-5fba4467baf8e227778586-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">id</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">10</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba4467baf8e227778586-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-c">// Both attributes and children skipped</span></div><div class="crayon-line" id="crayon-5fba4467baf8e227778586-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba4467baf8e227778586-6"><span class="crayon-sy">]</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba4467baf8e227778586-7">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p></p>
<p>In such cases, typescript’s inference can fallback to type that matches some index and ignore the other indexes (having erroneous values). This can compromise with type safety:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467baf93566686331" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-1">1</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-2">2</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-3">3</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-4">4</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-5">5</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-6">6</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-7">7</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-8">8</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-9">9</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-10">10</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-11">11</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-12">12</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-13">13</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-14">14</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-15">15</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-16">16</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-17">17</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-18">18</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-19">19</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-20">20</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-21">21</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-22">22</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-23">23</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-24">24</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-25">25</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-26">26</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-27">27</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-28">28</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-29">29</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-30">30</div><div class="crayon-num" data-line="crayon-5fba4467baf93566686331-31">31</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467baf93566686331-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf93566686331-2"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-v">Element1Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-4"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-5">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf93566686331-6"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs2Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-9"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-10">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf93566686331-11"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-v">ElementChildren2Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-14"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-15">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf93566686331-16"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-v">Element3Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-20"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-21">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf93566686331-22"><span class="crayon-e">type </span><span class="crayon-v">ElementTuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Element1Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-v">T</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs2Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-v">T</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">ElementChildren2Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-v">T</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Element3Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-v">T</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-27">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf93566686331-28"><span class="crayon-m">const</span><span class="crayon-v"> t:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-v">foo</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"bar"</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf93566686331-31">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0044 seconds] -->
<p></p>
<p>This passes without hiccups ! Why does TypeScript allow random attributes for a div ? Because the nested array can’t match the <code>ElementAttrs2Tuple</code> but can match <code>Element1Tuple</code> so TS doesn’t complain.</p>
<p>Lets see, if we can do something to restrict the other index positions:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467baf99905042116" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467baf99905042116-1">1</div><div class="crayon-num" data-line="crayon-5fba4467baf99905042116-2">2</div><div class="crayon-num" data-line="crayon-5fba4467baf99905042116-3">3</div><div class="crayon-num" data-line="crayon-5fba4467baf99905042116-4">4</div><div class="crayon-num" data-line="crayon-5fba4467baf99905042116-5">5</div><div class="crayon-num" data-line="crayon-5fba4467baf99905042116-6">6</div><div class="crayon-num" data-line="crayon-5fba4467baf99905042116-7">7</div><div class="crayon-num" data-line="crayon-5fba4467baf99905042116-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467baf99905042116-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf99905042116-2"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-v">Element3Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf99905042116-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba4467baf99905042116-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba4467baf99905042116-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba4467baf99905042116-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-v">index</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">Exclude</span><span class="crayon-o">&lt;</span><span class="crayon-v">number</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-o">&gt;</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">never</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf99905042116-7"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467baf99905042116-8">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0031 seconds] -->
<p></p>
<p>Nope. This doesn’t work because:</p>
<blockquote><p>
  An index signature parameter type cannot be a type alias.
</p></blockquote>
<p>Fortunately, there is a simpler solution to this:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467baf9e773358317" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467baf9e773358317-1">1</div><div class="crayon-num" data-line="crayon-5fba4467baf9e773358317-2">2</div><div class="crayon-num" data-line="crayon-5fba4467baf9e773358317-3">3</div><div class="crayon-num" data-line="crayon-5fba4467baf9e773358317-4">4</div><div class="crayon-num" data-line="crayon-5fba4467baf9e773358317-5">5</div><div class="crayon-num" data-line="crayon-5fba4467baf9e773358317-6">6</div><div class="crayon-num" data-line="crayon-5fba4467baf9e773358317-7">7</div><div class="crayon-num" data-line="crayon-5fba4467baf9e773358317-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467baf9e773358317-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467baf9e773358317-2"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-e">Element3Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-e">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-e">keyof</span><span class="crayon-h"> </span><span class="crayon-e">ElementAttrs</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467baf9e773358317-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf9e773358317-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf9e773358317-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf9e773358317-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">?</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">never</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467baf9e773358317-7"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467baf9e773358317-8">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0023 seconds] -->
<p></p>
<p>We really just need care about the last position. Because an attempt to create an array literal with anything at index 3 will fail to match Element3Tuple (including undefined, null etc.) So the array size has to match exactly 3.</p>
<p>We can extend this to the other tuple definitions:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467bafa3489130101" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-1">1</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-2">2</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-3">3</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-4">4</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-5">5</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-6">6</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-7">7</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-8">8</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-9">9</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-10">10</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-11">11</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-12">12</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-13">13</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-14">14</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-15">15</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-16">16</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-17">17</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-18">18</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-19">19</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-20">20</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-21">21</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-22">22</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-23">23</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-24">24</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-25">25</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-26">26</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-27">27</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-28">28</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-29">29</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-30">30</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-31">31</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-32">32</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-33">33</div><div class="crayon-num" data-line="crayon-5fba4467bafa3489130101-34">34</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467bafa3489130101-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-2"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-v">Element1Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">?</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">never</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-5"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-6">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-7"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs2Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">?</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">never</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-11"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-12">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-13"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-v">ElementChildren2Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">?</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">never</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-17"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-18">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-19"><span class="crayon-e">type </span><span class="crayon-v">Element2Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs2Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-v">T</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">ElementChildren2Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-v">T</span><span class="crayon-o">&gt;</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-22">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-23"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-v">Element3Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">?</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">never</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-28"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-29">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-30"><span class="crayon-e">type </span><span class="crayon-v">ElementTuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Element1Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-v">T</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Element2Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-v">T</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Element3Tuple</span><span class="crayon-o">&lt;</span><span class="crayon-v">T</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba4467bafa3489130101-34">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0084 seconds] -->
<p></p>
<p>Note that the trailing <code>never</code> property has to always be optional otherwise we will end up with a type that is impossible to match.</p>
<p>The element tuple that we have now is very close to what we wanted. Go ahead, try it out in the <a target="_blank" rel="noopener" href="http://www.typescriptlang.org/play/?ts=3.6.3&amp;ssl=48&amp;ssc=25&amp;pln=45&amp;pc=1#code/JYOwLgpgTgZghgYwgAgKIBsIFsLgIJhhQDOyA3sgLABQydyARACbABuDAXOTfb8sEwD8XYkVABzHvQC+AGil0GxAA5wQnbrT50Bw5KKgSFyaTVPUaYAJ7KUGbLjAAVOOOQBeZAGsIVgPYwaJg4+IQkANw0NKCQsIh2wY4AjE4ArsqYADxOyBAAHpAgTKT2Ic6uHkEO4C7iAHyavADaAAwAulxOkVp0TUlteiAQrNDd5tHg0PBIVWUERMQATGkZENm5BbjFs461laW7rg1kxq0dyF2n-VwHoQtNTm3dzYsDXEMjUGNR1DFT8TtwABhAAWwHQTCguGW6SyOXyhW2t3Kbk8yNqx1O7U6z3ofXO6NhECaT1Or0Gw1GZh+1lsgLAMNW6wRWxKiRqFTR7JRDXcxgAPvT5iRGXC6gL6aDwZDoSsxd0JrFpglqmAAMxytbwzZFNmqvZc-VHRp47EXXG9a5CsLEB6knrIJqvG7czUki2OtVvZAfKnUcbUWkqsqa5k6pGuzn0jEeCXIlJE7Lih2C5GirXJ3ip7kaxNOZM0BB+ECiZBgF36omxh1NZhsBiyR3GZp19iNigCLgMABGcCgDBMjaaze0jtbDDak8n4SAA">playground</a>:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467bafab482024145" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467bafab482024145-1">1</div><div class="crayon-num" data-line="crayon-5fba4467bafab482024145-2">2</div><div class="crayon-num" data-line="crayon-5fba4467bafab482024145-3">3</div><div class="crayon-num" data-line="crayon-5fba4467bafab482024145-4">4</div><div class="crayon-num" data-line="crayon-5fba4467bafab482024145-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467bafab482024145-1"><span class="crayon-m">const</span><span class="crayon-v"> t:</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-5fba4467bafab482024145-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba4467bafab482024145-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-v">id</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"bar"</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba4467bafab482024145-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-s">"div"</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafab482024145-5">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0016 seconds] -->
<p></p>
<p>While this may be cool if you like fiddling around the edges of type systems, we have to admit that though we worked around the limitations of typescript, what we ended up with is neither elegant nor intuitive.</p>
<p>However, with TypeScript 3.7, these workarounds are no longer needed ! Recursive types are fully supported now. This means, we can simply do:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba4467bafb2135116150" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba4467bafb2135116150-1">1</div><div class="crayon-num" data-line="crayon-5fba4467bafb2135116150-2">2</div><div class="crayon-num" data-line="crayon-5fba4467bafb2135116150-3">3</div><div class="crayon-num" data-line="crayon-5fba4467bafb2135116150-4">4</div><div class="crayon-num" data-line="crayon-5fba4467bafb2135116150-5">5</div><div class="crayon-num" data-line="crayon-5fba4467bafb2135116150-6">6</div><div class="crayon-num" data-line="crayon-5fba4467bafb2135116150-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba4467bafb2135116150-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba4467bafb2135116150-2"><span class="crayon-e">type </span><span class="crayon-v">ElementTuple</span><span class="crayon-o">&lt;</span><span class="crayon-i">T</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ElementTag</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-5fba4467bafb2135116150-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba4467bafb2135116150-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba4467bafb2135116150-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba4467bafb2135116150-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ElementAttrs</span><span class="crayon-sy">[</span><span class="crayon-v">T</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ElementTuple</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba4467bafb2135116150-7">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0045 seconds] -->
<p></p>
<p>Cool, consize and minimal. Works <a target="_blank" rel="noopener" href="http://www.typescriptlang.org/play/?ssl=21&amp;ssc=25&amp;pln=1&amp;pc=1#code/JYOwLgpgTgZghgYwgAgKIBsIFsLgIJhhQDOyA3sgLABQydyARACbABuDAXOTfb8sEwD8XYkVABzHvQC+AGil0GxAA5wQnbrT50Bw5KKgSFyaTVPUaYAJ7KUGbLjAAVOOOQBeZAGsIVgPYwaJg4+IQkANw0ljZ2wY5OAK7KmAA8TsgQAB6QIEyk9iHOrh5BDuAu4gB8HsYAPsgA2k4AunWNTrKlhQRExE3NrVp09U2dBfFJmA0DbaNdjj0k-WNx5ZMQ082RFtQIfiCiyGBc42vJKO7GDcxsDJ0NxrzXLOydFAJcDABGcFAMJvdHtpGjd2ANweEgA">too</a> !</p>


    </div></div><div class="blog-footer body-text"><p class="copyright-container"><strong>© 2021 Gaurab Paul</strong></p><p>Unless otherwise mentioned in specific contexts, all code is licensed under the The MIT License and all content and artwork is licensed under CC BY-NC-SA.</p><p>The opinions expressed herein are author's personal viewpoints and may not be taken as professional recommendations from any of his previous or current employers.</p></div><script src="https://unpkg.com/htmx.org@1.6.1/dist/htmx.min.js"></script><script src="/js/blog.js"></script></body></html>