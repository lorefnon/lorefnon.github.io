<!DOCTYPE html><html class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/blog.css"><title>Lorefnon | Blog | Hiding JSX closing tag noise in vim through conceal</title><meta property="og:title" content="Lorefnon | Blog | Hiding JSX closing tag noise in vim through conceal"><meta property="og:description" content="Making JSX more easily scannable by hiding the closing tags through the conceal feature in vim"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="icon" href="/images/favicon/favicon.ico"><script data-goatcounter="https://analytics.lorefnon.com/count" async src="https://analytics.lorefnon.com/count.js"></script><script src="https://unpkg.com/htmx.org@1.7.0/dist/htmx.min.js" defer></script><script src="https://unpkg.com/dompurify@2.3.6/dist/purify.min.js" defer></script><script src="/js/blog.js" defer></script><meta name="generator" content="Hexo 6.2.0"></head><body class="blog-body" hx-boost="true"><div class="blog-summary"><a class="primary-link" href="/" hx-boost="false"><h1 class="header-text">Gaurab Paul</h1><h2 class="header-text">Polyglot software developer &amp; consultant passionate about web development, distributed systems and open source technologies</h2></a><div class="blog-support"><div class="blog-support-cta-container"><a class="blog-support-btn" href="https://ko-fi.com/lorefnon" target="_blank" title="Support my work"></a></div></div></div><div class="blog-sidebar"><div class="blog-support"><div class="blog-support-cta-container"><a class="blog-support-btn" href="https://ko-fi.com/lorefnon" target="_blank" title="Support my work"></a><div class="blog-support-arrow"></div><p class="support-text body-text">Support my blog and open-source work</p></div></div><h1 class="header-text">Tags</h1><ul class="tag-list"><li class="body-text"><a class="tag-link" href="/tags/vim/"><img src="/images/tag.svg">vim</a></li></ul></div><div class="blog-header blog-post-header"><div class="blog-post-header-inner"><div class="header-text">Hiding JSX closing tag noise in vim through conceal</div><div class="posted-date sub-header-text" title="2022-01-29">Posted &nbsp;8 months ago</div><hr class="blog-header-separator"></div></div><div class="blog-main"><div class="page-content"><p>Thanks to popularity of React and other frameworks that have partly embraced its idioms, the verbose JSX syntax extension to javascript remains quite popular in 2022, despite the declining popularity of XML in the industry at large.</p>
<p>While alternatives exist, in most existing projects one can expect to find JSX in use, and alternatives usually don&#39;t have as great support from typescript, which has first class support for JSX.</p>
<p>Here is a simple tip that makes code using JSX easier to quickly scan through in vim by getting rid of the closing tag noise at editor level. While the tags still exist in the source code we simply collapse them in the editor. Any project level or source level changes are thus not needed.</p>
<p>The end result looks like this:</p>
<p><img src="/images/collapsed-end-tags.png" alt="Collapsed end tags" loading="lazy"></p>
<p>This is achieved by utilizing the <a href="https://vimhelp.org/syntax.txt.html#conceal" target="_blank" rel="noopener external nofollow noreferrer">conceal feature</a> of vim. While the configuration here has only been tested in neovim, it should work on vanilla vim as well.</p>
<p>To achieve the above, we can add the following to <code>~/.config/nvim/after/syntax/typescriptreact.vim</code>:</p>
<pre><code class="hljs plaintext">if exists(&#x27;g:no_vim_conceal&#x27;) || !has(&#x27;conceal&#x27;) || &amp;enc != &#x27;utf-8&#x27;
  finish
endif

syntax match tsxCloseTag &quot;&lt;/.*&gt;&quot; conceal cchar=◆
setlocal conceallevel=1</code></pre>

<p>Now any text matching <code>&lt;/.*&gt;</code> will be concealed and a diamond symbol be shown instead. However if we put the cursor on the specific line, we&#39;ll see the actual source.</p>
<p>If you need more info about the <code>after</code> directory in vim (as used above) this <a href="https://vimhelp.org/options.txt.html#after%2ddirectory" target="_blank" rel="noopener external nofollow noreferrer">vimhelp topic</a> and this <a href="https://vi.stackexchange.com/questions/4975/how-can-i-add-additional-syntax-highlighting-rules-in-my-local-vimrc" target="_blank" rel="noopener external nofollow noreferrer">stackexchange thread</a> are good resources.</p>
<p>If you are wondering how to identify the tag name for other syntax forms eg. the <code>function</code> keyword, this <a href="https://github.com/gerw/vim-HiLinkTrace" target="_blank" rel="noopener external nofollow noreferrer">vim plugin</a> can provide you the complete trace of syntax highlight.</p>
<p>In my setup, <code>:HLT</code> gives me the following trace for a closing tag:</p>
<pre><code class="hljs plaintext">typescriptBlock-&gt;typescriptParenExp-&gt;tsxRegion-&gt;tsxRegion-&gt;tsxRegion-&gt;tsxRegion-&gt;tsxRegion-&gt;tsxRegion-&gt;tsxCloseTag  HltTrace: tsxCloseTag-&gt;htmlTag-&gt;GruvboxBlue   fg&lt;109&gt; bg&lt;&gt;</code></pre>
</div><div class="post-comments"><!-- .comments-target--></div><div class="post-comments" style="margin-top: 10px;"><div id="remark42"></div></div></div><div class="blog-footer body-text"><p class="copyright-container"><strong>© 2022 Gaurab Paul</strong></p><p>Unless otherwise mentioned in specific contexts, all code is licensed under the The MIT License and all content and artwork is licensed under CC BY-NC-SA.</p><p>The opinions expressed herein are author's personal viewpoints and may not be taken as professional recommendations from any of his previous or current employers.</p></div></body></html>