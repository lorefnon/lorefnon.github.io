<!DOCTYPE html><html class="no-js"><head> <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/blog.css"><meta property="og:title" content="Gaurab Paul | Blog"><meta property="og:description" content="Ramblings on Web Development and software architecture"><meta name="generator" content="Hexo 5.4.0"></head><body class="blog-body" hx-boost="true"><a class="blog-summary" href="/" hx-boost="false"><h1 class="header-text">ICICLES OF THOUGHT</h1><h2 class="header-text">Ramblings on Web Development and Software Architecture</h2></a><div class="blog-sidebar"><span class="posted-date header-text" title="2018-05-13">Posted &nbsp;4 years ago</span><hr><h1 class="header-text">Tags</h1><ul class="tag-list"><li class="body-text"><a class="tag-link" href="/tags/Typescript/"><img src="/images/tag.svg">Typescript</a></li><li class="body-text"><a class="tag-link" href="/tags/ReasonML/"><img src="/images/tag.svg">ReasonML</a></li></ul></div><div class="blog-header"><div class="blog-header-inner header-text">ReasonML vs TypeScript – First impressions</div></div><div class="blog-main"><div class="flex-row post-warning"><img src="/images/primary/alert-triangle.svg" style="margin-right: 1rem">I don't actively use ReasonML and this post has not been since it was originally written. So some or more of the content here may be outdated.</div><div class="page-content"><link rel="stylesheet" href="/css/crayon.min.css" >
<link rel="stylesheet" href="/css/crayon-flatui-light.css" >



	<p>This post summarizes preliminary observations while comparing <a target="_blank" href="https://reasonml.github.io/">ReasonML</a> and <a target="_blank" href="https://www.typescriptlang.org/">TypeScript</a> during selection of a reasonably (pun-intended) type safe language for frontend development. The observations here are somewhat biased in favor of experienced javascript developers and focusses primarily on frontend development workflow and does not take into account the (primary) native backend of Reason.</p>
<p>While this post primarily compares Reason and TypeScript, much of what is outlined about TypeScript equally applies to <a target="_blank" href="https://flow.org/">flow</a> as well.</p>
<p><span id="more-173"></span></p>
<h2>Compatibility with ECMAScript semantics</h2>
<p>TypeScript was designed from ground up to be a javascript superset. So all javascript experience naturally carries over to TypeScript.</p>
<p>Reason is an <a target="_blank" href="https://ocaml.org/">OCaml</a> dialect. A different language that has nothing to do with ECMAScript. period.</p>
<p>This gets slightly blurred because of Reason team’s efforts to bring in some javascript inspired syntax sugar to OCaml. So lists look like javascript arrays, records look like javascript objects, functions look like javascript arrow functions, spread syntax looks the same etc. But these syntactic similarities are very much skin deep and while they may aid in muscle memory, one has to keep in mind while writing any non-trivial code that Reason is a different language with very different semantics. We will revisit these semantic differences at multiple places in the later sections of this post.</p>
<p>However it is worth highlighting that most of the ReasonML best practices also map to best practices in Modern javascript. The official documentation elaborates on this in the <a href="https://reasonml.github.io/docs/en/what-and-why.html" target="_blank">What &amp; Why</a> section that explains the motivation behind the ReasonML.</p>
<p>When we say that we are comparing TypeScript with Reason in this post, we are <em>actually</em> comparing TypeScript with the combination of <a target="_blank" href="https://ocaml.org/">OCaml</a> (The underlying language which provides the type system) + <a target="_blank" href="https://bucklescript.github.io/">BuckleScript</a> (The OCaml -&gt; Javascript compiler, a fork of the primary OCaml compiler) + <a target="_blank" href="https://reasonml.github.io/">Reason</a> (The javascript inspired dialect for OCaml – implemented as a frontend for the OCaml compiler).</p>
<h2>Type safety</h2>
<p>TypeScript is intentionally <a target="_blank" href="https://en.wikipedia.org/wiki/Gradual_typing">“gradually-typed”</a>. TypeScript compiler supports various levels of strictness which can be <a target="_blank" href="https://www.typescriptlang.org/docs/handbook/compiler-options.html">configured</a> through the tsconfig.json file.</p>
<p>In loose mode, TypeScript can be freely intermixed with untyped javascript and the compiler will do a best-effort to detect as many type violations as it can, and embrace all untyped data as <a target="_blank" href="https://www.typescriptlang.org/docs/handbook/basic-types.html#any">“any”</a> type which is simply not type-checked.</p>
<p>For example given the following definition:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f594871222478" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f594871222478-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f594871222478-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f594871222478-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f594871222478-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f594871222478-2"><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">fn</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f594871222478-3">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0026 seconds] -->
<p></p>
<p>Compiler infers the type of fn as follows:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5a1844137640" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5a1844137640-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5a1844137640-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5a1844137640-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5a1844137640-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5a1844137640-2"><span class="crayon-m">const</span><span class="crayon-v"> fn:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">any</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">any</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-i">any</span></div><div class="crayon-line" id="crayon-5fba44837f5a1844137640-3">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p></p>
<p>So all that the TypeScript compiler knows about fn is that it is a function and that it takes two arguments. There is no type safety around the parameters, so the compiler will happily accept a usage like:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5a5704502907" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5a5704502907-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5a5704502907-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5a5704502907-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5a5704502907-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5a5704502907-2"><span class="crayon-e">fn</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-v">a</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">b</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5fba44837f5a5704502907-3">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p></p>
<p>We also see that <code>any</code> is <strong>contagious</strong>. Given that the parameters are untyped, any results that depend on these parameters also has <code>any</code> type.</p>
<p>In strict mode, the compiler will warn when variables end up with <code>any</code> type implicitly. But still, the developer has enough flexibility to explicitly use <code>any</code> whenever they see fit.</p>
<p>There is also a <a target="_blank" href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-6.html#suppress-errors-in-ts-files-using--ts-ignore-comments"><code>@ts-ignore</code></a> pragma which simply disables type checking for annotated sections of code.</p>
<p>This can be somewhat advantageous wrt. interoperability because many prevalent javascript usage patterns can not be easily type-checked by the compiler and typescript intends to be a javascript superset so it has to accomodate for all kinds of dynamic and stringly typed APIs.</p>
<p>Example from <a target="_blank" href="https://lodash.com/">lodash library</a>:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5a8729342567" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5a8729342567-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5a8729342567-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5a8729342567-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5a8729342567-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5a8729342567-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5a8729342567-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5a8729342567-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5a8729342567-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5a8729342567-2"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-t">object</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-s">'a'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-s">'b'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-s">'c'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5a8729342567-3">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5a8729342567-4"><span class="crayon-v">_</span><span class="crayon-sy">.</span><span class="crayon-e">set</span><span class="crayon-sy">(</span><span class="crayon-t">object</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'a[0].b.c'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5a8729342567-5"><span class="crayon-v">console</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-t">object</span><span class="crayon-sy">.</span><span class="crayon-v">a</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-v">c</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5a8729342567-6"><span class="crayon-c">// =&gt; 4</span></div><div class="crayon-line" id="crayon-5fba44837f5a8729342567-7">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p></p>
<p>If we look at the <a target="_blank" href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/lodash/common/object.d.ts#L3110-L3124">type definition</a> for <code>set</code>:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5ab765923154" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-8">8</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-9">9</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-10">10</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-11">11</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-12">12</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-13">13</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-14">14</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-15">15</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-16">16</div><div class="crayon-num" data-line="crayon-5fba44837f5ab765923154-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5ab765923154-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-2"><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-3"><span class="crayon-c"> * Sets the value at path of object. If a portion of path doesn’t exist it’s created. Arrays are created for</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-4"><span class="crayon-c"> * missing index properties while objects are created for all other missing properties. Use _.setWith to</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-5"><span class="crayon-c"> * customize path creation.</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-6"><span class="crayon-c"> *</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-7"><span class="crayon-c"> * @param object The object to modify.</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-8"><span class="crayon-c"> * @param path The path of the property to set.</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-9"><span class="crayon-c"> * @param value The value to set.</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-10"><span class="crayon-c"> * @return Returns object.</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-11"><span class="crayon-c"> */</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-12"><span class="crayon-e">set</span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">object</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">path</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">PropertyPath</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">value</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">any</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-16"><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ab765923154-17">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p></p>
<p>TypeScript will not make an attempt to validate that after setting the value, whether or not the resultant object still complies with the interface <code>T</code> and will just <i>assume</i> that it will.</p>
<p>OCaml was designed to be a strongly typed language from the get go, and does not allow these kind of leeways. The type system is intentionally <a target="_blank" href="http://papl.cs.brown.edu/2014/safety-soundness.html">sound</a> and type coverage is <strong>guaranteed</strong> to be 100%.</p>
<p>For interop, BuckleScript compiler supports typed externals which act as type hints for the compiler and are erased afterwards. Examples from <a target="_blank" href="https://bucklescript.github.io/docs/en/bind-to-global-values.html">BuckleScript docs</a>:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5af992797728" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5af992797728-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5af992797728-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5af992797728-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5af992797728-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5af992797728-2"><span class="crayon-sy">[</span><span class="crayon-sy">@</span><span class="crayon-v">bs</span><span class="crayon-sy">.</span><span class="crayon-v">val</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">external </span><span class="crayon-r">clearTimeout</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">float</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">unit</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5af992797728-3">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p></p>
<p>As a “last-resort escape hatch” <a target="_blank" href="https://bucklescript.github.io/docs/en/embed-raw-javascript.html">embedding “raw” untyped javasacript</a> is also possible.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5b2479451320" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5b2479451320-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5b2479451320-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5b2479451320-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5b2479451320-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5b2479451320-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5b2479451320-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5b2479451320-2"><span class="crayon-v">Js</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-s">"this is reason"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5b2479451320-3"><span class="crayon-i">let</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-o">%</span><span class="crayon-v">bs</span><span class="crayon-sy">.</span><span class="crayon-i">raw</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-s">'here is a string from javascript'</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-sy">}</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5b2479451320-4"><span class="crayon-v">Js</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-h"> </span><span class="crayon-s">" back in reason land"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">/* ++ is the operator for string concat */</span></div><div class="crayon-line" id="crayon-5fba44837f5b2479451320-5">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p></p>
<p>The type of <code>x</code> here is akin to <code>any</code> in typescript which “unifies with everything”, and is highly discouraged.</p>
<p>It is recommended that whenever javascript values are pulled in from the “unsafe world”, they are explicitly typed at the interop boundaries so that type safety is not compromised.</p>
<p>TypeScript also supports a zero-commitment opt-in type checking through <a target="_blank" href="https://github.com/Microsoft/TypeScript/wiki/JSDoc-support-in-JavaScript">type annotations in comments</a>.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5b5051085456" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-8">8</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-9">9</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-10">10</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-11">11</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-12">12</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-13">13</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-14">14</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-15">15</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-16">16</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-17">17</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-18">18</div><div class="crayon-num" data-line="crayon-5fba44837f5b5051085456-19">19</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5b5051085456-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-2">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-3"><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-4"><span class="crayon-c"> * @typedef {Object} CustomType - Declares a type named 'CustomType'</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-5"><span class="crayon-c"> * @property {string} prop1 - a string property of CustomType</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-6"><span class="crayon-c"> * @property {number} prop2 - a number property of CustomType</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-7"><span class="crayon-c"> * @prop {number} [prop5=10] - an optional number property of CustomType with default value</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-8"><span class="crayon-c"> */</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-9">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-10"><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-11"><span class="crayon-c"> * @param {CustomType} p1- A string param declared using TS-style</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-12"><span class="crayon-c"> * @param {string}&nbsp;&nbsp;p2 - A string argument.</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-13"><span class="crayon-c"> * @param {string=} p3 - Optional argument</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-14"><span class="crayon-c"> * @return {string}</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-15"><span class="crayon-c"> */</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-16"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fn</span><span class="crayon-sy">(</span><span class="crayon-v">p1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">p2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">p3</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-17"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-c">// TODO</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-18"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba44837f5b5051085456-19">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p></p>
<p>This is advantageous for large javascript projects to ease gradual migration to typescript. And also when a compilation step is not desirable.<br>
However, as with all solutions which abuse comments for purposes other than commenting, this is prone to human errors eg. typos in your type declarations may end up getting ignored by the compiler etc.</p>
<p>In contrast, Reason enthusiasts take the stance that you really value type safety and so are willing to make the commitment and opt into an entirely different language.</p>
<h2>Type inference</h2>
<p>OCaml is quite famous for its <a target="_blank" href="http://www.cs.cornell.edu/courses/cs3110/2011fa/supplemental/lec26-type-inference/type-inference.htm">sophisticated type inference</a>, and is much better at this than typescript. When starting out, type inference in Reason can feel almost magical.</p>
<p>In the code below:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5b9862564727" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5b9862564727-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5b9862564727-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5b9862564727-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5b9862564727-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5b9862564727-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5b9862564727-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5b9862564727-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f5b9862564727-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5b9862564727-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5b9862564727-2"><span class="crayon-e">type </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5b9862564727-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">age</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5b9862564727-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">string</span></div><div class="crayon-line" id="crayon-5fba44837f5b9862564727-5"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5b9862564727-6">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5b9862564727-7"><span class="crayon-e">let </span><span class="crayon-v">printName</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">p</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">Js</span><span class="crayon-sy">.</span><span class="crayon-e">log</span><span class="crayon-sy">(</span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5b9862564727-8">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
<p></p>
<p>The printName function can infer the type of p based on its usage within the function body.</p>
<p><img loading="lazy" class="alignnone size-full wp-image-195" src="/wp-content/uploads/2018/05/Screenshot-from-2018-05-14-00-56-29.png" alt="" width="417" height="164" srcset="/wp-content/uploads/2018/05/Screenshot-from-2018-05-14-00-56-29.png 417w, /wp-content/uploads/2018/05/Screenshot-from-2018-05-14-00-56-29-300x118.png 300w" sizes="(max-width: 417px) 100vw, 417px"></p>
<p>In contrast, TypeScript infers all untyped function arguments as <code>any</code>.</p>
<p>Inference can be nice, but in case of type mismatch, the errors can sometimes be misleading wrt. whether the error is at call site or the definition site.</p>
<p>In last year or so, there has not been a single occurance where I have encountered a TypeScript error and have not been able to comprehend within 5 mins what the error exactly is.</p>
<h2>Type directed emit</h2>
<p>One of the primary design decisions of typescript is to avoid type directed emit. From <a target="_blank" href="https://github.com/Microsoft/TypeScript/wiki/TypeScript-Design-Goals">Non-goals section</a>:</p>
<blockquote><p>[TS will not] Add or rely on run-time type information in programs, or emit different code based on the results of the type system. Instead, encourage programming patterns that do not require run-time metadata.</p></blockquote>
<p>The consequence of this is that the generated javascript is fairly close to handwritten idiomatic javascript. This also has advantage in that opting out of TypeScript is relatively easy.</p>
<p>Reason (or rather BuckleScript) has no such qualms. A lot of optimization efforts have gone into BuckleScript to fully utilize the type system and take advantage of compiler’s intelligence to generate tiny compilation outputs.</p>
<p>In contrast TypeScript explicitly states that aggressive optimization is <strong>not</strong> one of compiler’s goals. From the Non-goals section in the roadmap:</p>
<blockquote><p>[TS will not] Aggressively optimize the runtime performance of programs. Instead, emit idiomatic JavaScript code that plays well with the performance characteristics of runtime platforms.</p></blockquote>
<p>It is to be noted though, that statically analyzable code can often be better optimized by the JIT compiler or optimizers like <a target="_blank" href="http://lisperator.net/uglifyjs/">UglifyJS</a> or <a target="_blank" href="https://developers.google.com/closure/compiler/">Google Closure</a>.</p>
<p>An example of reason’s optimization can be seen in how it implements records:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5bd697202119" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5bd697202119-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5bd697202119-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5bd697202119-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5bd697202119-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5bd697202119-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5bd697202119-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5bd697202119-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f5bd697202119-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5bd697202119-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5bd697202119-2"><span class="crayon-e">type </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5bd697202119-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">age</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5bd697202119-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">string</span></div><div class="crayon-line" id="crayon-5fba44837f5bd697202119-5"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5bd697202119-6">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5bd697202119-7"><span class="crayon-i">let</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-v">age</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">10</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"john"</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5bd697202119-8">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p></p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5c0005012912" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-8">8</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-9">9</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-10">10</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-11">11</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-12">12</div><div class="crayon-num" data-line="crayon-5fba44837f5c0005012912-13">13</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5c0005012912-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-2"><span class="crayon-c">// Generated by BUCKLESCRIPT VERSION 3.0.1, PLEASE EDIT WITH CARE</span></div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-3"><span class="crayon-s">'use strict'</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-4">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-5">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-6"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-c">/* record */</span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-7"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-c">/* age */</span><span class="crayon-cn">10</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-8"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-c">/* name */</span><span class="crayon-s">"john"</span></div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-9"><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-10">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-11"><span class="crayon-v">exports</span><span class="crayon-sy">.</span><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-12"><span class="crayon-c">/* No side effect */</span></div><div class="crayon-line" id="crayon-5fba44837f5c0005012912-13">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p></p>
<p>One might have expected the person type to be represented as a javascript class, but the compiler optimizes away the record type entirely and leaves behind a compact array.</p>
<p>The negative side of this is that there it is that scope of runtime reflection is severly limited. Runtime reflection is typically not idiomatic in OCaml. The metaprogramming section below touches upon some of the alternatives.</p>
<h2>Functional Programming</h2>
<p>Javascript has many functional features, primary among them is support for <a target="_blank" href="https://www.sitepoint.com/higher-order-functions-javascript/">higher order functions</a>. These features carry over seamlessly in TypeScript. TypeScript’s type system handles higher order functions etc. quite well, but besides that it does little on top to encourage functional programming.</p>
<p>There are many <a target="_blank" href="https://hackernoon.com/functional-programming-in-javascript-is-an-antipattern-58526819f21e">caveats</a> of functional programming in javascript, primary among them is that the built-in data structures are not really designed with immutability in mind.</p>
<p>Adopting immutability in javascript boils down to one of these two options:</p>
<ol>
<li>We can use helper libraries to operate on native data structures without mutations. This often requires unnecessary cloning though, and is, in general, not particularly efficient.<p></p>
</li>
<li>
<p>We can use something like <a target="_blank" href="https://facebook.github.io/immutable-js/">ImmutableJS</a>, but most libraries accept native arrays and objects, in such cases cost of coverting to and from and immutable can add up significantly.</p>
</li>
</ol>
<p>Also, while functional composition is possible, the language could certainly benefit from more syntax sugar to make operations on functions as succinct as operations on primitives.</p>
<p>Reason has been designed with functional programming at its core. Though it has some <a target="_blank" href="https://realworldocaml.org/v1/en/html/objects.html">object oriented features</a>, it is primarily a functional language.</p>
<p>Primary built-in data structures are immutable, so it can be expected that all reason libraries play well with them. This includes lists, records, tuples etc. Remember that we said above that Reason’s built in data structures may quack like Javascript but have different semantics ?</p>
<p>BuckleScript has a number of optimizations in place to make operations on immutable entities performant.</p>
<p>Mutability is <a target="_blank" href="https://reasonml.github.io/docs/en/mutation.html">opt in</a> and explicit (through usage of ref cells).</p>
<p>A few primary features of ReasonML that aid in functional programming are highlighted below. The <a target="_blank" href="http://2ality.com/2017/12/functions-reasonml.html#the-reverse-application-operator">2ality blog</a> by Axel Rauschmayer already introduces them very well, so I will defer to that post for elaborations.</p>
<h3>Curried functions</h3>
<p>Reason functions are <a target="_blank" href="https://en.wikipedia.org/wiki/Currying">curried</a> by default. While this may seem weird to javascript developers (or developers from object oriented language backgrounds), this is really common in functional world, and partial application is quite common in practice. Hugh Jackson has written a <a target="_blank" href="https://hughfdjackson.com/javascript/why-curry-helps/">great post</a> on the advantages of currying.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5c5834576184" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5c5834576184-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5c5834576184-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5c5834576184-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5c5834576184-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5c5834576184-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5c5834576184-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5c5834576184-2"><span class="crayon-e">let </span><span class="crayon-v">incrementAgeBy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">p</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">age</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">age</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-i">count</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5c5834576184-3">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5c5834576184-4"><span class="crayon-e">let </span><span class="crayon-v">incrementAgeBy1</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">incrementAgeBy</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5c5834576184-5">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<p>FP enthusiasts have long advocated for currying in javascript and libraries like <a target="_blank" href="/2018/05/13/reasonml-vs-typescript-first-impressions/ramdajs.com">Ramda</a> have embraced it throughout their API.</p>
<p>BuckleScript optimizes curried functions to prevent unnecessary use of closures wherever possible:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5c8005060712" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5c8005060712-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5c8005060712-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5c8005060712-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5c8005060712-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5c8005060712-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5c8005060712-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5c8005060712-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f5c8005060712-8">8</div><div class="crayon-num" data-line="crayon-5fba44837f5c8005060712-9">9</div><div class="crayon-num" data-line="crayon-5fba44837f5c8005060712-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5c8005060712-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5c8005060712-2"><span class="crayon-e">type </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5c8005060712-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">age</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5c8005060712-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">string</span></div><div class="crayon-line" id="crayon-5fba44837f5c8005060712-5"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5c8005060712-6">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5c8005060712-7"><span class="crayon-e">let </span><span class="crayon-v">incrementAgeBy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">p</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">age</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">age</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-i">count</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5c8005060712-8">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5c8005060712-9"><span class="crayon-e">let </span><span class="crayon-v">incrementAgeBy1</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">incrementAgeBy</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5c8005060712-10">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0014 seconds] -->
<p></p>
<p>Compiles to:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5cb919574988" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-8">8</div><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-9">9</div><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-10">10</div><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-11">11</div><div class="crayon-num" data-line="crayon-5fba44837f5cb919574988-12">12</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5cb919574988-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5cb919574988-2"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">incrementAgeBy</span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5cb919574988-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-c">/* record */</span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba44837f5cb919574988-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* age */</span><span class="crayon-v">p</span><span class="crayon-sy">[</span><span class="crayon-c">/* age */</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5cb919574988-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* name */</span><span class="crayon-v">p</span><span class="crayon-sy">[</span><span class="crayon-c">/* name */</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba44837f5cb919574988-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5cb919574988-7"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba44837f5cb919574988-8">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5cb919574988-9"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">incrementAgeBy1</span><span class="crayon-sy">(</span><span class="crayon-v">param</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5cb919574988-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">incrementAgeBy</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">param</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5cb919574988-11"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba44837f5cb919574988-12">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0013 seconds] -->
<p></p>
<p>So when <code>incrementAgeBy</code> is called with two arguments there is no overhead.</p>
<p>Side effect of implicit currying is that, in Reason we don’t have functions with <a target="_blank" href="https://en.wikipedia.org/wiki/Variadic_function">variadic arguments</a>, which is very common in javascript.<br>
TypeScript supports variadic arguments of same type, but the only way to handle heterogenous variadic arguments is through any.</p>
<p>It is a common practice among libraries to handle few arities with generic types and falling back to <code>any</code> for higher index arities.</p>
<p>Example from <a target="_blank" href="https://unpkg.com/mobx-state-tree@2.0.5/dist/utils.d.ts">MobX state tree</a></p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5ce219092526" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5ce219092526-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5ce219092526-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5ce219092526-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5ce219092526-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5ce219092526-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5ce219092526-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5ce219092526-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5ce219092526-2"><span class="crayon-e">export </span><span class="crayon-r">declare</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-v">extend</span><span class="crayon-o">&lt;</span><span class="crayon-v">A</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">B</span><span class="crayon-o">&gt;</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">A</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">B</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">A</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">B</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ce219092526-3"><span class="crayon-e">export </span><span class="crayon-r">declare</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-v">extend</span><span class="crayon-o">&lt;</span><span class="crayon-v">A</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">B</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">C</span><span class="crayon-o">&gt;</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">A</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">B</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">C</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">A</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">B</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">C</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ce219092526-4"><span class="crayon-e">export </span><span class="crayon-r">declare</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-v">extend</span><span class="crayon-o">&lt;</span><span class="crayon-v">A</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">B</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">C</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">D</span><span class="crayon-o">&gt;</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">A</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">B</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">C</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">d</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">D</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">A</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">B</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">C</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-v">D</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ce219092526-5"><span class="crayon-e">export </span><span class="crayon-r">declare</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">extend</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">any</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">b</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">any</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">any</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ce219092526-6">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0031 seconds] -->
<p></p>
<p>Currying also encourages “data-last signatures” where the primary subject of the operation is the last argument.</p>
<p>For cases, where is this is not adequate, Reason also supports <a target="_blank" href="https://reasonml.github.io/docs/en/function.html#labeled-arguments">labeled arguments</a>. Labeled arguments also aid towards readability and while a similar thing can be emulated in javascript through object arguments and destructuring, in case of labeled arguments there is no overhead of an additional object allocation.</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5d2164405679" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5d2164405679-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5d2164405679-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5d2164405679-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5d2164405679-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5d2164405679-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5d2164405679-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5d2164405679-2"><span class="crayon-e">let </span><span class="crayon-v">incrementAgeBy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">~</span><span class="crayon-v">count</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">~</span><span class="crayon-v">p</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">p</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">age</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">age</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-i">count</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5d2164405679-3">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5d2164405679-4"><span class="crayon-e">let </span><span class="crayon-v">incrementAgeBy1</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">incrementAgeBy</span><span class="crayon-sy">(</span><span class="crayon-o">~</span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5d2164405679-5">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<p>Compiles to:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5d4407389347" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-8">8</div><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-9">9</div><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-10">10</div><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-11">11</div><div class="crayon-num" data-line="crayon-5fba44837f5d4407389347-12">12</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5d4407389347-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5d4407389347-2"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">incrementAgeBy</span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5d4407389347-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-c">/* record */</span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba44837f5d4407389347-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* age */</span><span class="crayon-v">p</span><span class="crayon-sy">[</span><span class="crayon-c">/* age */</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5d4407389347-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* name */</span><span class="crayon-v">p</span><span class="crayon-sy">[</span><span class="crayon-c">/* name */</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba44837f5d4407389347-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5d4407389347-7"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba44837f5d4407389347-8">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5d4407389347-9"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">incrementAgeBy1</span><span class="crayon-sy">(</span><span class="crayon-v">param</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5d4407389347-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">incrementAgeBy</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">param</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5d4407389347-11"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba44837f5d4407389347-12">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0014 seconds] -->
<p></p>
<h3>Operators as functions.</h3>
<p>Unlike javascript and typescript, OCaml offers <a target="_blank" href="http://2ality.com/2017/12/functions-reasonml.html#operators">custom operators</a>. Operators are essentially functions with syntax sugar for infix/prefix usage.</p>
<p>When misused this can make code a <b>lot</b> more difficult to grok, but for commonly used patterns it can help towards reducing unnecessary verbosity in code. This can also aid towards embedded <a target="_blank" href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL</a>s.</p>
<h3>Pipe Operator</h3>
<p>ReasonML supports a pipe operator for <a target="_blank" href="http://2ality.com/2017/12/functions-reasonml.html#the-reverse-application-operator">reverse application</a> of functions.</p>
<p>Example from the linked post from 2ality blog:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5d8189347180" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5d8189347180-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5d8189347180-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5d8189347180-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5d8189347180-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5d8189347180-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5d8189347180-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5d8189347180-2"><span class="crayon-sy">[</span><span class="crayon-cn">4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba44837f5d8189347180-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">List</span><span class="crayon-sy">.</span><span class="crayon-e">map</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5fba44837f5d8189347180-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">List</span><span class="crayon-sy">.</span><span class="crayon-e">filter</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">List</span><span class="crayon-sy">.</span><span class="crayon-e">sort</span><span class="crayon-sy">(</span><span class="crayon-v">compare</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5d8189347180-5">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0013 seconds] -->
<p></p>
<p>This makes chaining of operations very easy to grok and helps with functional data transformation pipelines. As should be obvious from the example above, reverse application naturally fits in with support for punning and currying.</p>
<p>There are currently two <a target="_blank" href="https://github.com/tc39/proposal-pipeline-operator/wiki">competing proposals</a> for incorporation of pipe operator in javascript and respective champions are currently debating whether to make this more similar to flow or hack. TypeScript support for this is nowhere to be seen yet.</p>
<h3>Pattern Matching</h3>
<p><a target="_blank" href="https://reasonml.github.io/docs/en/pattern-matching.html">Pattern Matching</a> is the crown jewel of ML. It is amazingly flexible, widely used and results in very clean code. This also goes hand in hand with <a target="_blank" href="https://reasonml.github.io/docs/en/destructuring.html">destructuring support</a>. It is not a coincidence that the single most prominent code example in Reason home page illustrates pattern matching:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5db404443103" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5db404443103-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5db404443103-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5db404443103-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5db404443103-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5db404443103-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5db404443103-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5db404443103-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f5db404443103-8">8</div><div class="crayon-num" data-line="crayon-5fba44837f5db404443103-9">9</div><div class="crayon-num" data-line="crayon-5fba44837f5db404443103-10">10</div><div class="crayon-num" data-line="crayon-5fba44837f5db404443103-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5db404443103-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5db404443103-2"><span class="crayon-e">type </span><span class="crayon-v">schoolPerson</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Teacher</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Director</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">Student</span><span class="crayon-sy">(</span><span class="crayon-t">string</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5db404443103-3">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5db404443103-4"><span class="crayon-e">let </span><span class="crayon-v">greeting</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">stranger</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba44837f5db404443103-5"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">switch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">stranger</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5db404443103-6"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Teacher</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">"Hey professor!"</span></div><div class="crayon-line" id="crayon-5fba44837f5db404443103-7"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Director</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">"Hello director."</span></div><div class="crayon-line" id="crayon-5fba44837f5db404443103-8"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">Student</span><span class="crayon-sy">(</span><span class="crayon-s">"Richard"</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">"Still here Ricky?"</span></div><div class="crayon-line" id="crayon-5fba44837f5db404443103-9"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">Student</span><span class="crayon-sy">(</span><span class="crayon-v">anyOtherName</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">"Hey, "</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-h"> </span><span class="crayon-v">anyOtherName</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-h"> </span><span class="crayon-s">"."</span></div><div class="crayon-line" id="crayon-5fba44837f5db404443103-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5db404443103-11">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0018 seconds] -->
<p></p>
<p>If you have ever used convoluted nested if-else conditionals and have wondered if there could be a better construct, which could support a lower boilerplate unified syntax for branching based on type of the subject, or a member of a collection, or a property of a record — well that is what pattern matching is, and it is available in all its glory in ReasonML right now.</p>
<p>As is to be expected, there is also <a target="_blank" href="https://github.com/tc39/proposal-pattern-matching">a proposal</a> for incorporating pattern matching in javascript. Once again, given the stage 0 status, TypeScript support is nowhere to be seen yet.</p>
<p>Pattern matching and algebraic data types go <a href="https://haifengl.wordpress.com/2014/07/07/ocaml-algebraic-data-types/" target="_blank">hand in hand</a>.</p>
<h2>Asynchronous Programming</h2>
<p>It is fairly easy to use callbacks and promises when interoperating with javascript code. BuckleScript already provides bindings to <a target="_blank" href="https://reasonml.github.io/docs/en/promise.html">javascript promises</a>.</p>
<p>TypeScript has had, for a long time, first class support for ES7 <a target="_blank" href="https://javascript.info/async-await">async/await keywords</a>. There have been <a target="_blank" href="https://jaredforsyth.com/posts/building-async-await-in-reason/">some attempts</a> to rebuild similar support in Reason in Reason, but as the author has highlighted in the linked post, the flexibility of javascript promises makes exact emulation of async/await difficult to play well with Reason’s strict typesystem.</p>
<p>The good news is that since all Javascript async APIs use promises as the foundational abstractions, interop through Promises is quite easy.</p>
<h2>The various flavors of object types</h2>
<p>Typescript embraces <a target="_blank" href="https://en.wikipedia.org/wiki/Structural_type_system">structural typing</a> which is a natural fit for interoperating with a dynamic language. Jamie Kyle has provided a <a target="_blank" href="https://medium.com/@thejameskyle/type-systems-structural-vs-nominal-typing-explained-56511dd969f4">good introduction</a> on the differences between Structural and Nominal type systems.</p>
<p>TypeScript’s interfaces are amazingly flexible and easy to understand. Along with <a target="_blank" href="http://www.typescriptlang.org/docs/handbook/advanced-types.html">Union and Intersection</a> types, they offer a wide berth for modelling polymorphic behavior. And they can be used to model almost all statically analysable usage patterns in javascript.</p>
<p>In contrast, in Reason we have Records (<a target="_blank" href="https://en.wikipedia.org/wiki/Nominal_type_system">nominally typed</a>), Objects (structurally typed) and BuckleScript’s wrapped Objects which have different semantics.</p>
<p>While records are much faster implementation wise, they are rigidly typed: The types have to be declared beforehand and there is little support for deriving record types from other record types. The differences and subtly different syntax of these can be very confusing when starting out. We have already seen usage of Records in previous parts of this article and observed that BuckleScript compiles them away to compact arrays.</p>
<p>So now the question arises, what if you really need a javascript object ? What if we want to have methods with a shared context (this in javascript) ?</p>
<p>That is where the object type comes into picture. Before we get into them, let us try to identify two common usage patterns around objects in javascript :</p>
<h3>Objects as Maps vs Objects as Records</h3>
<p>In javascript, the enormous flexibility of objects have lent them to be used as both dictionaries (A collection of arbitrary key to value mappings) as well as Records (Mapping from fixed set of keys to values of priorly known types).</p>
<p>TypeScript handles the former case through interfaces having a <a target="_blank" href="http://www.typescriptlang.org/docs/handbook/advanced-types.html#index-types-and-string-index-signatures">string index signature:</a></p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5e1191156502" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5e1191156502-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5e1191156502-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5e1191156502-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5e1191156502-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5e1191156502-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5e1191156502-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5e1191156502-2"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-e">Map</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5e1191156502-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">[</span><span class="crayon-v">key</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">string</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">T</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5e1191156502-4"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba44837f5e1191156502-5">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p></p>
<p>and the latter case through explicitly typed interface properties:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5e3413977136" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5e3413977136-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5e3413977136-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5e3413977136-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5e3413977136-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5e3413977136-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5e3413977136-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5e3413977136-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5e3413977136-2"><span class="crayon-t">interface</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5e3413977136-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">string</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5e3413977136-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">age</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">integer</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5e3413977136-5"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba44837f5e3413977136-6">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p></p>
<p>It is easily possible and common to mix and match these two usage patterns.</p>
<p>BuckleScript strives to clearly distinguish between these two usage patterns. For dictionary style usage, <a target="_blank" href="https://bucklescript.github.io/docs/en/object.html#object-as-hash-map">JS.Dict</a> is preferred. And for Record style usage BuckleScript provides a wrapper to be used in conjuction with Object types.</p>
<h2>ReasonML Object Type</h2>
<p>To see an example of object types, let us look an a translated example of stack object type from <a target="_blank" href="https://realworldocaml.org/v1/en/html/objects.html#ocaml-objects">Real world OCaml</a>:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5e6607917240" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-8">8</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-9">9</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-10">10</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-11">11</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-12">12</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-13">13</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-14">14</div><div class="crayon-num" data-line="crayon-5fba44837f5e6607917240-15">15</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5e6607917240-1"><span class="crayon-e">let </span><span class="crayon-v">stack</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">init</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">val </span><span class="crayon-i">mutable</span><span class="crayon-h"> </span><span class="crayon-v">v</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">init</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">pub </span><span class="crayon-v">pop</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">switch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">v</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">hd</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">tl</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">v</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tl</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Some</span><span class="crayon-sy">(</span><span class="crayon-v">hd</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-i">None</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">pub </span><span class="crayon-v">push</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">hd</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">v</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">hd</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">v</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-11"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-12">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-13"><span class="crayon-i">let</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">stack</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-14">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5e6607917240-15"><span class="crayon-v">s</span><span class="crayon-o">#</span><span class="crayon-v">pop</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0023 seconds] -->
<p></p>
<p>Note that we didn’t have to declare the type of the return value of stack beforehand. Objects are less rigidly typed in this regard wrt. records.</p>
<p>If we look at the inferred type of <code>s</code>, there is something interesting to be observed:</p>
<p><img loading="lazy" class="alignnone size-full wp-image-196" src="/wp-content/uploads/2018/05/Screenshot-from-2018-05-14-01-23-57.png" alt="" width="663" height="71" srcset="/wp-content/uploads/2018/05/Screenshot-from-2018-05-14-01-23-57.png 663w, /wp-content/uploads/2018/05/Screenshot-from-2018-05-14-01-23-57-300x32.png 300w" sizes="(max-width: 663px) 100vw, 663px"></p>
<p>No, the dot after the curly brace is not an error and that is how Reason distinguishes between Record Type and Object Types. Don’t you love the syntax already ?</p>
<p>The compiled output for this might be very surprising:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5ea108400493" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-8">8</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-9">9</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-10">10</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-11">11</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-12">12</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-13">13</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-14">14</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-15">15</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-16">16</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-17">17</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-18">18</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-19">19</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-20">20</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-21">21</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-22">22</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-23">23</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-24">24</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-25">25</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-26">26</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-27">27</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-28">28</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-29">29</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-30">30</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-31">31</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-32">32</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-33">33</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-34">34</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-35">35</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-36">36</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-37">37</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-38">38</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-39">39</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-40">40</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-41">41</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-42">42</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-43">43</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-44">44</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-45">45</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-46">46</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-47">47</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-48">48</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-49">49</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-50">50</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-51">51</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-52">52</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-53">53</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-54">54</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-55">55</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-56">56</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-57">57</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-58">58</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-59">59</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-60">60</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-61">61</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-62">62</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-63">63</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-64">64</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-65">65</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-66">66</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-67">67</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-68">68</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-69">69</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-70">70</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-71">71</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-72">72</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-73">73</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-74">74</div><div class="crayon-num" data-line="crayon-5fba44837f5ea108400493-75">75</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5ea108400493-1"><span class="crayon-c">// Generated by BUCKLESCRIPT VERSION 3.0.1, PLEASE EDIT WITH CARE</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-2"><span class="crayon-s">'use strict'</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-3">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-4"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">Curry</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">"stdlib/curry"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-5"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">Caml_oo_curry</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">"stdlib/caml_oo_curry"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-6"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">CamlinternalOO</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">require</span><span class="crayon-sy">(</span><span class="crayon-s">"stdlib/camlinternalOO"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-7">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-8"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">shared</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-9"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"push"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-s">"pop"</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-11"><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-12">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-13"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">class_tables</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-14"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-15"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-16"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-17"><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-18">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-19"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">stack</span><span class="crayon-sy">(</span><span class="crayon-v">init</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-20"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">!</span><span class="crayon-v">class_tables</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">$</span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">CamlinternalOO</span><span class="crayon-sy">.</span><span class="crayon-e">create_table</span><span class="crayon-sy">(</span><span class="crayon-v">shared</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">CamlinternalOO</span><span class="crayon-sy">.</span><span class="crayon-e">new_methods_variables</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-sy">$</span><span class="crayon-t">class</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">shared</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">"v"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">push</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ids</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">pop</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ids</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">v</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">ids</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">CamlinternalOO</span><span class="crayon-sy">.</span><span class="crayon-e">set_methods</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-sy">$</span><span class="crayon-t">class</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-c">/* array */</span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pop</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">$</span><span class="crayon-cn">27</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">match</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">$</span><span class="crayon-cn">27</span><span class="crayon-sy">[</span><span class="crayon-v">v</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">match</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">$</span><span class="crayon-cn">27</span><span class="crayon-sy">[</span><span class="crayon-v">v</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">match</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-c">/* Some */</span><span class="crayon-sy">[</span><span class="crayon-v">match</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-c">/* None */</span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">push</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">(</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">$</span><span class="crayon-cn">27</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">hd</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">$</span><span class="crayon-cn">27</span><span class="crayon-sy">[</span><span class="crayon-v">v</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-c">/* :: */</span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">hd</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">$</span><span class="crayon-cn">27</span><span class="crayon-sy">[</span><span class="crayon-v">v</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-c">/* () */</span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">env_init</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">env</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">CamlinternalOO</span><span class="crayon-sy">.</span><span class="crayon-e">create_object_opt</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">$</span><span class="crayon-t">class</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">[</span><span class="crayon-v">v</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">env</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">CamlinternalOO</span><span class="crayon-sy">.</span><span class="crayon-e">init_class</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-sy">$</span><span class="crayon-t">class</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">class_tables</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">env_init</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-53"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-54"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">Curry</span><span class="crayon-sy">.</span><span class="crayon-e">_1</span><span class="crayon-sy">(</span><span class="crayon-v">class_tables</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">init</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-58"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-59">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-60"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">stack</span><span class="crayon-sy">(</span><span class="crayon-c">/* :: */</span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">3</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* :: */</span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* :: */</span><span class="crayon-sy">[</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* [] */</span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-70">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-71"><span class="crayon-v">Caml_oo_curry</span><span class="crayon-sy">.</span><span class="crayon-e">js1</span><span class="crayon-sy">(</span><span class="crayon-cn">5594513</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-72">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-73"><span class="crayon-v">exports</span><span class="crayon-sy">.</span><span class="crayon-v">stack</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">stack</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-74"><span class="crayon-v">exports</span><span class="crayon-sy">.</span><span class="crayon-v">s</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5ea108400493-75"><span class="crayon-c">/* s Not a pure module */</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0116 seconds] -->
<p></p>
<p>What has happened here is that Object Orientation in OCaml follows very different semantics than javascript’s prototypal inheritance, and BuckleScript by default uses an implementation that is faithful to native OCaml semantics.</p>
<p>However most of the time, when in javascript world, we would want to use javascript objects, and for that BuckleScript provides a <a target="_blank" href="https://bucklescript.github.io/docs/en/object.html#object-as-record">wrapped object type</a>&nbsp;which compile to javascript objects.</p>
<p>While the linked BuckleScript docs cover wrapped object type in detail, I want to highlight the syntax sugar provided by Reason to sweeten the usage of BuckleScript’s wrapped object type :</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5f0782598292" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5f0782598292-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5f0782598292-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5f0782598292-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5f0782598292-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5f0782598292-2"><span class="crayon-e">let </span><span class="crayon-v">jane</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-s">"age"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">10</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5f0782598292-3">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p></p>
<p>The above is a valid code and compiles to exactly what you’d expect:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5f3007452079" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5f3007452079-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5f3007452079-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5f3007452079-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5f3007452079-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5f3007452079-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5f3007452079-1"><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-v">jane</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f5f3007452079-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">age</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">10</span></div><div class="crayon-line" id="crayon-5fba44837f5f3007452079-3"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5f3007452079-4">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5f3007452079-5"><span class="crayon-v">exports</span><span class="crayon-sy">.</span><span class="crayon-v">jane</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">jane</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<p>Note that unlike JavaScript/TypeScript, the quotes here are significant (Otherwise it would be treated as a Record). Remember I noted above that syntactic similarities are only skin deep ?</p>
<p>If we want this object to be explicitly typed, we can specify the object type as follows:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5f6101334644" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5f6101334644-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5f6101334644-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5f6101334644-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5f6101334644-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f5f6101334644-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5f6101334644-1"><span class="crayon-e">type </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Js</span><span class="crayon-sy">.</span><span class="crayon-e">t</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5fba44837f5f6101334644-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">age</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">int</span></div><div class="crayon-line" id="crayon-5fba44837f5f6101334644-3"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5f6101334644-4">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5f6101334644-5"><span class="crayon-e">let </span><span class="crayon-v">jane</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-s">"age"</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">10</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p></p>
<p>At this point I guess the <code>&#123;.</code> seems quite intuitive. No ? Oh well …</p>
<p>When it is at all not possible to fit usage of objects into one of the above two usage patterns, there is also support for a more <a target="_blank" href="https://bucklescript.github.io/docs/en/object.html#object-as-dynamic-record">dynamic usage pattern</a> which is generally discouraged.</p>
<h2>Modules</h2>
<p>ES6 Modules are very different from how most languages implement module systems. For the most part, I am a big fan of the one-to-one correlation between modules and files.</p>
<p>I am also a big fan of explicit imports in ES6 as they make it very easy to follow through logic when doing code reviews in github.</p>
<p>The typescript tooling is so good at this point, that I rarely have to write imports by hand. I can, in almost 100% cases, rely on typescript language server to identify and inject imports in source files and I heavily rely on tools for most of my refactoring.</p>
<p>Reason/OCaml modules are much much different and in <i>some</i> ways more advanced.</p>
<p>Modules are identified and referenced by names and not by relative paths to modules.</p>
<p>While every file implicitly does define its own module, files can have many explicitly defined modules as well.</p>
<p>In case of implicitly defined modules, the module name is derived from the name of the module. The location of the file in the filesystem hierarchy is insignificant and files can be moved around without needing any refactoring. This implies that verbose file names are quite common.</p>
<p>As <a target="_blank" href="https://blog.janestreet.com/better-namespaces-through-module-aliases/">explained</a> by Yaron Minskey :</p>
<blockquote><p>In particular OCaml has no good way of organizing modules into packages. One sign of the problem is that you can’t build an executable that has two modules with the same module name. This is a pretty awkward restriction, and it gets unworkable pretty fast as your codebase gets bigger</p></blockquote>
<p>The post linked above recommends using module aliases as a namespacing alternative.</p>
<p>OCaml is fairly unique in its support of <a target="_blank" href="https://www.cs.cornell.edu/courses/cs3110/2017fa/l/08-functors/notes.html">parameterized modules or Functors</a> which can significantly aid in type-safe code reuse and can serve as foundation for sophisticated abstractions. Fuctors is a fairly large topic in itself and deserves a dedicated post in this blog, which will follow in near future.</p>
<p>As the <a target="_blank" href="https://reasonml.github.io/docs/en/module.html">official documentation</a> explains:</p>
<blockquote><p>Modules and functors are at a different “layer” of language than the rest. </p></blockquote>
<p>Explicit modules are somewhat akin to TypeScript namespaces, but support for module parameterization does not have a direct equally powerful analogue in TypeScript.</p>
<h2>Meta programming</h2>
<p>The work around <a target="_blank" href="http://ocamllabs.io/doc/ppx.html">ppx</a> is arguably one of the most interesting aspects of the OCaml ecosystem.</p>
<p>Quoting from the linked site:</p>
<blockquote><p>The PPX language feature provides a new API for syntactic extensions in OCaml. PPX uses attributes to allow type-driven code generation, extension nodes for custom constructs and quoted strings for insertion of code fragments in unrelated syntax</p></blockquote>
<p>TypeScript has a <a target="_blank" href="https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API#creating-and-printing-a-typescript-ast">compiler API</a> to support similar use cases which facilitates programmatic AST traversal and manipulation. However, as of this writing, this is marked as experimental and is not as mature.</p>
<p>TypeScript also has experimental support for exposing design time type information at runtime through <a target="_blank" href="http://blog.wolksoftware.com/decorators-metadata-reflection-in-typescript-from-novice-to-expert-part-4">metadata reflection</a> which facilitates runtime metaproramming.</p>
<h2>JSX</h2>
<p>Given that Reason is by facebook, it is no surprise that their love of embedded XML-ish DSL carries over (from <a target="_blank" href="https://reactjs.org/docs/introducing-jsx.html">JSX</a>, <a target="_blank" href="https://www.facebook.com/notes/facebook-engineering/xhp-a-new-way-to-write-php/294003943919/">XHP</a> etc.) and thus Reason is blessed with a similar dedicated <a target="_blank" href="https://reasonml.github.io/docs/en/jsx.html">syntax sugar</a>.</p>
<p>There are <a target="_blank" href="https://reasonml.github.io/docs/en/jsx.html#departures-from-js-jsx">subtle differences</a> from what happens in javascript, esp. punning, but overall the superfluous verbosity of the XML inspired DSL disgusts me in either languages, so not much to add here.</p>
<h2>Interop</h2>
<p>Bucklescript has a <a target="_blank" href="https://bucklescript.github.io/docs/en/interop-overview.html">dedicated section</a> on Interop which covers most use cases. But the tl;dr is that while unlike TypeScript not all javascript dynamic usage patterns can be expressed directly in OCaml. But through BuckleScript’s embedded javascript support it is possible to drop down to untyped javascript and wrap such usages and expose them in a type safe manner.</p>
<p>Bucklescript’s interop support is somewhere between Elm’s <a target="_blank" href="https://guide.elm-lang.org/interop/javascript.html">port system</a> (which is the most tedious of all interop solutions I have encountered) and TypeScript which is happy to let you intermix untyped and typed javascript code.</p>
<p>However this also implies that Bucklescript can’t make strong guarantees about <a target="_blank" href="https://www.infoq.com/news/2017/05/elm-zero-runtime-exception">zero runtime errors</a> as Elm can. Of course, TypeScript’s unsound type system has never had any such guarantees and nor is this planned as per their Roadmap.</p>
<h2>Caveats around esoteric syntax</h2>
<p>Javascript is well know to have many <a target="_blank" href="https://medium.com/dailyjs/the-why-behind-the-wat-an-explanation-of-javascripts-weird-type-system-83b92879a8db">“warts”</a> around its weak typing.</p>
<p>OCaml’s type system may be safe and sound, but it has its own set of quirks. Many of these bizarre syntax rules have been <a target="_blank" href="https://reasonml.github.io/docs/en/comparison-to-ocaml.html">“unified”</a> by Reason’s syntax sugar. However some of them are very fundamentally rooted into the type system.</p>
<p>We have already seen the <em>interesting </em>use of operators and quoting in objects above.&nbsp;One such quirk that is most commonly visible is that (as mentioned above) operators are just functions and functions don’t have method overloading so we must use different operators when operating on different types.</p>
<p>For example we need different operators when doing operations on float and integers:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f5fc209261541" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f5fc209261541-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f5fc209261541-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f5fc209261541-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f5fc209261541-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f5fc209261541-1">&nbsp;</div><div class="crayon-line" id="crayon-5fba44837f5fc209261541-2"><span class="crayon-e">let </span><span class="crayon-v">dist</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba44837f5fc209261541-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">sqrt</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f5fc209261541-4">&nbsp;</div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p></p>
<p><code>*.</code>, <code>+.</code> are float multiplication and addition operators respectively.</p>
<p>Adhoc polymorphism and typed languages have had a love hate relationship. Sophisticated type systems like Haskell handle them through features like Type Classes. Dynamic languages, well, have never had any problem with them because type safety is not a concern. OCaml does not have either of these so ad-hoc polymorphism is something of a pain point, which may be addressed in <a target="_blank" href="https://discuss.ocaml.org/t/modular-implicits/144">future</a>.</p>
<p>The 2ality blog points out an <em>interesting</em> workaround for this by locally overriding the operators by opening a module that aliases the float operators:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5fba44837f600642736645" class="crayon-syntax crayon-theme-flatui-light crayon-font-inconsolata crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 20px !important;">
		
			<div class="crayon-plain-wrap"></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums" data-settings="hide">
					<div class="crayon-nums-content" style="font-size: 15px !important; line-height: 20px !important;"><div class="crayon-num" data-line="crayon-5fba44837f600642736645-1">1</div><div class="crayon-num" data-line="crayon-5fba44837f600642736645-2">2</div><div class="crayon-num" data-line="crayon-5fba44837f600642736645-3">3</div><div class="crayon-num" data-line="crayon-5fba44837f600642736645-4">4</div><div class="crayon-num" data-line="crayon-5fba44837f600642736645-5">5</div><div class="crayon-num" data-line="crayon-5fba44837f600642736645-6">6</div><div class="crayon-num" data-line="crayon-5fba44837f600642736645-7">7</div><div class="crayon-num" data-line="crayon-5fba44837f600642736645-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 15px !important; line-height: 20px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5fba44837f600642736645-1"><span class="crayon-e">module </span><span class="crayon-v">FloatOps</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5fba44837f600642736645-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">let</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">+</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">+</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f600642736645-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">let</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">*</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">*</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f600642736645-4"><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5fba44837f600642736645-5"><span class="crayon-e">let </span><span class="crayon-v">dist</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5fba44837f600642736645-6"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">FloatOps</span><span class="crayon-sy">.</span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-5fba44837f600642736645-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">sqrt</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5fba44837f600642736645-8"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0015 seconds] -->
<p></p>
<p>So while TypeScript (being a superset) carries over the warts of javascript,&nbsp; ReasonML also brings in its own set of syntactic eccentricities from its OCaml lineage, some of which may be quite obscure and non-intuitive&nbsp;for frontend developers.</p>
<h2>Ecosystem</h2>
<p>Many libraries for frontend development are being written in TypeScript and for many more (varying quality of) type definitions are available in the <a target="_blank" href="https://github.com/DefinitelyTyped/DefinitelyTyped">Definitively Typed repository</a>.</p>
<p>There is a similar initiative <a target="_blank" href="https://github.com/rrdelaney/ReasonablyTyped">Reasonably Typed</a> for Reason, but that is not yet as comprehensive as TypeScript.</p>
<hr>
<h2>Summary</h2>
<p>This brings us to the end of this post. I hope that this post helps you evaluate the different set of trade offs around which TypeScript and Reason have been designed around and make an informed decision when faced with a choice.</p>
<p>My familiarity with Reason is still very nascent, so please feel free to comment about anything I might have missed out or got wrong.</p>
<h3>Key Takeaways</h3>
<ul>
<li>For experienced javascript developers, Reason’s learning curve may be quite steep given it is a different language with many different semantics. TypeScript in contrast has a comparatively shallow learning curve being a javascript superset.</li>
<li>Deeply integrated features like pattern matching, currying, destructuring and custom operators make functional programming a much more pleasant experience than TypeScript</li>
<li>Reason embraces immutability and while mutability is generally discouraged, it can be explicitly opted in.</li>
<li>In contrast to TypeScript, Reason’s type system is sound and more strict and has much better type inference. However type inference can be a double edged sword wrt. readability of error messages</li>
<li>While Reason has a strict and sound type system, BuckleScript provides many escape hatches to ease interoperability with untyped javascript code.</li>
<li>Unlike TypeScript, Reason embraces type directed emit, and in many cases effectively levarges the information type system has to aggressively optimize the generated code</li>
<li>There are some dynamic usage patterns which have no direct analogues in Reason, and in these cases interop can get tricky.</li>
</ul>
<h2>References:</h2>
<ol>
<li><a target="_blank" href="https://reasonml.github.io/">Reason Official Site</a> maintained by Facebook Team</li>
<li><a target="_blank" href="https://haifengl.wordpress.com/2014/07/08/ocaml-polymorphism/">OCaml: Polymorphism</a> by Haifeng Li</li>
<li><a target="_blank" href="http://reasonmlhub.com/exploring-reasonml/">Exploring ReasonML</a> by Axel Rauschmayer</li>
<li><a target="_blank" href="https://realworldocaml.org/">Real World Ocaml</a> by Anil Madhavapeddy, Jason Hickey and Yaron Minsky.</li>
<li><a target="_blank" href="https://haifengl.wordpress.com/category/programming/ocaml/">Posts on OCaml</a> by Haifeng Li</li>
</ol>


    </div></div><div class="blog-footer body-text"><p class="copyright-container"><strong>© 2021 Gaurab Paul</strong></p><p>Unless otherwise mentioned in specific contexts, all code is licensed under the The MIT License and all content and artwork is licensed under CC BY-NC-SA.</p><p>The opinions expressed herein are author's personal viewpoints and may not be taken as professional recommendations from any of his previous or current employers.</p><hr><p>Header Image credit:<a href="https://www.pexels.com/photo/stainless-steel-lamp-788855/" target="_blank" rel="noreferrer noopener">Nikita Khandelwal</a></p></div><script src="https://unpkg.com/htmx.org@1.6.0/dist/htmx.min.js"></script><script src="/js/blog.js"></script></body></html>